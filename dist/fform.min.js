!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("React")):"function"==typeof define&&define.amd?define(["React"],t):"object"==typeof exports?exports.fform=t(require("React")):e.fform=t(e.React)}(window,(function(e){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=19)}([function(e,t){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t,r){var n=r(17);e.exports=function(e,t){if(null==e)return{};var r,a,i=n(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}},function(t,r){t.exports=e},function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(t){return"function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?e.exports=n=function(e){return r(e)}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)},n(t)}e.exports=n},function(e,t,r){var n=r(13),a=r(14),i=r(15);e.exports=function(e){return n(e)||a(e)||i()}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}},function(e,t){function r(t){return e.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(t)}e.exports=r},function(e,t){function r(){return e.exports=r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},r.apply(this,arguments)}e.exports=r},function(e,t,r){var n=r(4),a=r(1);e.exports=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?a(e):t}},function(e,t,r){var n=r(18);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}},function(e,t,r){var n=r(16);function a(t,r,i){return"undefined"!=typeof Reflect&&Reflect.get?e.exports=a=Reflect.get:e.exports=a=function(e,t,r){var a=n(e,t);if(a){var i=Object.getOwnPropertyDescriptor(a,t);return i.get?i.get.call(r):i.value}},a(t,r,i||t)}e.exports=a},function(e,t){e.exports=function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}},function(e,t){e.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(e,t,r){var n=r(8);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=n(e)););return e}},function(e,t){e.exports=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}},function(e,t){function r(t,n){return e.exports=r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(t,n)}e.exports=r},function(e,t,r){"use strict";r.r(t);var n=r(4),a=r.n(n),i=r(5),o=r.n(i),s=r(12),u=r.n(s),c=r(9),l=r.n(c),f=r(2),p=r.n(f),h=r(10),d=r.n(h),v=r(8),g=r.n(v),m=r(1),y=r.n(m),_=r(11),b=r.n(_),$=r(6),w=r.n($),O=r(7),x=r.n(O),E=r(0),S=r.n(E),k=r(3),j=function(e){return void 0===e},A=function(e){return"number"==typeof e},P=function(e){return"string"==typeof e},D=Array.isArray,F=function(e){return N(e)&&!D(e)},M=function(e){return"function"==typeof e},C=function(e){return D(e)?e:[e]},V=function(e,t){return!t&&D(e)&&1==e.length?e[0]:e};function N(e){return e&&"object"===a()(e)&&"[object RegExp]"!==Object.prototype.toString.call(e)&&"[object Date]"!==Object.prototype.toString.call(e)}var R=Object.keys,I=function(e){return R(e).concat(Object.getOwnPropertySymbols(e))},T="function"==typeof Symbol&&"symbol"===a()(Symbol.iterator)?function(e){return a()(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":a()(e)};function B(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function L(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(B(e,t))return!0;if("object"!==(j(e)?"undefined":T(e))||null===e||"object"!==(j(t)?"undefined":T(t))||null===t)return!1;var n=r.symbol?I:R,a=n(e),i=n(t);if(a.length!==i.length)return!1;for(var o=r.skipKeys,s=void 0===o?[]:o,u=r.deepKeys,c=void 0===u?[]:u,l=0;l<a.length;l++)if(!~s.indexOf(a[l]))if(r.deep||~c.indexOf(a[l])){if(!L(e[a[l]],t[a[l]],r))return!1}else if(!t.hasOwnProperty(a[l])||!B(e[a[l]],t[a[l]]))return!1;return!0}function U(e){return e.cache=new Map,function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];for(var a=[r.length].concat(r),i=e.cache,o=a.pop(),s=0;s<a.length;s++)i.has(a[s])||i.set(a[s],new Map),i=i.get(a[s]);return i.has(o)||i.set(o,e.apply(this,r)),i.get(o)}}function W(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];for(var a=0;a<r.length;a++)D(r[a])?e.push.apply(e,o()(r[a])):e.push(r[a]);return e}function q(e,t,r){var n=e.length;n&&(t=(t%n+n)%n,r=(r%n+n)%n);for(var a=e[t],i=t;i<r;i++)e[i]=e[i+1];for(var o=t;o>r;o--)e[o]=e[o-1];return e[r]=a,e}function K(){for(var e,t=[],r=0;r<arguments.length-1;r++)W(t,0>r||arguments.length<=r?void 0:arguments[r]);var n=0>(e=arguments.length-1)||arguments.length<=e?void 0:arguments[e];return t.length?H({},n,t):n}function G(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(0<r.length)for(var a,i=0;i<r.length;i++){a=D(r[i])?r[i]:[r[i]];for(var o=0;o<a.length;o++)if(!j(a[o])){try{if(!e.hasOwnProperty(a[o]))return!1}catch(e){return!1}e=e[a[o]]}}return!0}function H(e,t){for(var r,n=e,a=arguments.length,i=Array(2<a?a-2:0),o=2;o<a;o++)i[o-2]=arguments[o];if(0<i.length)for(var s,u=0;u<i.length;u++){s=D(i[u])?i[u]:[i[u]];for(var c=0;c<s.length;c++)j(s[c])||(j(r)||(!N(n[r])&&(n[r]={}),n=n[r]),r=s[c])}return j(r)?t:(n[r]=t,e)}function z(e){for(var t,r=e,n=0;n<(1>=arguments.length?0:arguments.length-1);n++){"function"==typeof(t=1>n+1||arguments.length<=n+1?void 0:arguments[n+1])&&(t=t(r)),D(t)||(t=[t]);for(var a=0;a<t.length;a++){if(!N(r))return;j(t[a])||(r=r[t[a]])}}return r}function J(e,t){for(var r=arguments.length,n=Array(2<r?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];return G.apply(void 0,[e].concat(n))||H.apply(void 0,[e,t].concat(n)),z.apply(void 0,[e].concat(n))}function Q(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=r.noSymbol?R:I,a=r.SymbolDelete,i=r.del,o=r.diff,s=r.replace,u=r.arrays,c=s;return"function"!=typeof c&&(c=N(s)?function(e){return z(s,e)}:function(){return!1}),!0===s||!0===c([],e,t)?{state:t,changes:e===t?void 0:t}:(M(u)||(u=void 0),function e(t,r){var s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],l={},f=D(r);N(t)||D(t=f?[]:{})&&(l.length=0);var p=D(t);if(!N(r))return{state:t};p&&f&&(u&&(r=u(t,r,s)),t.length!=r.length&&(l.length=r.length));var h=n(t);if(0==h.length&&!i){if(!p&&!f)return n(r).length?{state:r,changes:r}:{state:t};if(p&&f)return t.length==r.length&&0==r.length?{state:t}:n(r).length||r.length!==t.length?{state:r,changes:r}:{state:t}}var d=n(r),v={},g=p?[]:{};o&&h.forEach((function(e){~d.indexOf(e)||(l[e]=a)})),d.forEach((function(n){if(i&&r[n]===a)t.hasOwnProperty(n)&&(l[n]=a);else{var o=s.concat(n);if(N(r[n])&&N(t[n])&&!0!==c(o,t[n],r[n])){if(t[n]!==r[n]){var u=e(t[n],r[n],o);u.changes&&(v[n]=u)}}else t.hasOwnProperty(n)&&B(t[n],r[n])||(l[n]=r[n])}}));var m=n(v),y=n(l);return 0==y.length&&0==m.length?{state:t}:(Object.assign(g,t),y.forEach((function(e){i&&l[e]===a||o&&!r.hasOwnProperty(e)?delete g[e]:g[e]=l[e]})),m.forEach((function(e){g[e]=v[e].state,l[e]=v[e].changes})),{state:g,changes:l})}(e,t))}var X=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return Q(e,t,r).state};function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Z(e){for(var t,r=1;r<arguments.length;r++)t=null==arguments[r]?{}:arguments[r],r%2?Y(t,!0).forEach((function(r){S()(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Y(t).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}));return e}X.all=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return 0==t.length?e:t.reduce((function(e,t){return X(e,t,r)}),e)};var ee=function(){function e(){w()(this,e),S()(this,"done",!1),S()(this,"vals",[{},{}]);var t=this,r=new Promise((function(e,r){t.setFunction(0,e),t.setFunction(1,r)}));return r.resolve=t.execFunction.bind(t,0),r.reject=t.execFunction.bind(t,1),r.isPending=function(){return!t.done},r.isResolved=function(){return t.vals[0].done},r.isRejected=function(){return t.vals[1].done},r.result=function(){return t.done&&t.vals[t.vals[0].done?0:1].rest},r}return x()(e,[{key:"setFunction",value:function(e,t){var r=this.vals[e];r.func=t,r.done&&t.apply(void 0,o()(r.rest))}},{key:"execFunction",value:function(e){if(!this.done){this.done=!0;for(var t=this.vals[e],r=arguments.length,n=Array(1<r?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];t.rest=n,t.done=!0,this.vals[1-e].done=!1,t.func&&t.func.apply(t,n)}}}]),e}(),te=new WeakMap;function re(e){return te[e]}var ne=function(e){function t(e){var r;w()(this,t),r=d()(this,g()(t).call(this,e)),S()(y()(r),"_noExec",0),S()(y()(r),"_resultPromises",void 0),S()(y()(r),"_newState",void 0),S()(y()(r),"_updates",[]),S()(y()(r),"_validation",null),S()(y()(r),"_defferedTimerId",void 0),S()(y()(r),"getState",r._getState),S()(y()(r),"noExec",(function(){r._noExec++})),S()(y()(r),"execute",(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return r._setExecution(null,X(e,{execute:!0}))})),S()(y()(r),"setState",(function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=y()(r);return n._updates=[],n._newState=e,n._setExecution(null,t)})),S()(y()(r),"getActive",(function(){return r.get(be,"active")})),S()(y()(r),"validate",(function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=y()(r);return"boolean"==typeof e?n._validation=e:lt({path:e,value:!0},n.getState()).forEach((function(e){return n._validation=vt(n._validation||{},!0,e.path)})),n._setExecution(null,t)})),S()(y()(r),"get",(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return ut.apply(void 0,[r.getState()].concat(t))})),S()(y()(r),"set",(function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(null===e)return r._setExecution([null],n);var a=l()({},n);return a.path=e,a.value=t,r._setExecution(a,n)})),S()(y()(r),"getValue",(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return r.get(be,e.inital?"inital":"current",e.path||[])})),S()(y()(r),"setValue",(function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=t.path,a=t.inital,i=t.replace,o=p()(t,["path","inital","replace"]);if(null===n)return r._setExecution([null],t);if(~(n=yt(n||[]).slice()).indexOf(be))o.path=n;else{for(var s,u=r.getState();!z(u,n)&&n.length;)s=n.pop(),e=S()({},s,e),i=S()({},s,i);o.path=[a?"@inital":"@current"].concat(n)}return o.value=e,o.replace=i,r._setExecution(o,t)})),S()(y()(r),"getDefaultValue",(function(){return r.get(be,"default")})),S()(y()(r),"switch",(function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return r.set(e,t,Z({},n,{macros:"switch"}))})),S()(y()(r),"setMessages",(function(e,t){var n=t||{},a=n.priority,i=void 0===a?0:a,o=n.group,s=void 0===o?3:o,u=n.path,c=void 0===u?[]:u,l=n.props,f=void 0===l?void 0:l,h=p()(n,["priority","group","path","props"]),d="@/messages/"+i+"/texts/"+s;null===e?(r.switch([c,d],[],h),F(f)&&r.switch([c,"@/messages/"+i],f,h)):wt(e,{arrayAsValue:!0}).forEach((function(e){r.set([c,e,d],e.pop(),Z({replace:!0},h)),F(f)&&r.set([c,e,"@/messages/"+i],f,h)}))})),S()(y()(r),"reset",(function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return t.status?r.set(yt(t.path||"/"),j(t.value)?Oe:t.value,(e={},S()(e,be,["status",t.status]),S()(e,"macros","switch"),e)):r.setValue(Oe,t)})),S()(y()(r),"clear",(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return r.setValue(xe,e)})),S()(y()(r),"arrayAdd",(function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return r._setExecution(Z({path:e,value:t,macros:"array"},n),n)})),S()(y()(r),"arrayItemOps",(function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return r._setExecution(Z({path:e,op:t,macros:"arrayItem"},n),n)})),S()(y()(r),"setHidden",(function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return r._setExecution([Z({path:[e,"@","/params/hidden"],value:t},n)],n)})),S()(y()(r),"showOnly",(function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return e=yt(e),r._setExecution([Z({path:[e.slice(0,-1),"/*/@/params/hidden"],value:!0},t),Z({path:[e,"@","/params/hidden"],value:!1},t)],t)})),S()(y()(r),"getSchemaPart",(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return e=yt(e),Me(r.schema,e,Pe(r.getState()))}));var n,a,i,o,s,u,c,f=y()(r);e.state?f._setState(e.state):!f._getState()&&f._setState((n=f.UPDATABLE,a=Qe(n.api.schema),i=a.state,o=a.dataMap,s=void 0===o?[]:o,u=a.defaultValues,c=z(i=rt(i=X(i,H({},u,[be,"current"])),n,s),be,"current"),i=tt(i,n,ct([],["inital"],c)),i=et(i=tt(i,n,ct([],["default"],c)),n)));var h=f._getState();return h[we]||f._setState(function(e,t){var r=Ie(t.api.schema,Pe(e)).dataMap;return rt(e,t,void 0===r?[]:r,null)}(h,f.UPDATABLE)),r}return b()(t,e),x()(t,[{key:"wrapper",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=this,r=function(r){return e[r]||t[r]},n=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"./";return t&&yt(t,e.path)},a=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=1<arguments.length?arguments[1]:void 0,a=t.path,i=p()(t,["path"]);return null===a?i.path=null:(!j(a)||r)&&(i.path=n(a||"./")),e.wrapOpts?e.wrapOpts(i):i},i={validate:function(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"./",t=arguments.length,a=Array(1<t?t-1:0),i=1;i<t;i++)a[i-1]=arguments[i];return r("validate").apply(void 0,["boolean"==typeof e?e:n(e)].concat(a))},get:function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return r("get")(n(t))},bind:function(t){return e=t,i},getValue:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return i.get(be,e.inital?"inital":"current",n(e.path))},getApi:function(){return t}};return["setValue","setMessages"].forEach((function(e){return i[e]=function(t){for(var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length,o=Array(2<i?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];return r(e).apply(void 0,[t,a(n)].concat(o))}})),["noExec","setState","getActive","getDefaultValue"].forEach((function(e){return i[e]=function(){return r(e).apply(void 0,arguments)}})),["reset","clear","execute"].forEach((function(e){return i[e]=function(t){for(var n=arguments.length,i=Array(1<n?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return r(e).apply(void 0,[a(t,!0)].concat(i))}})),["showOnly","getSchemaPart"].forEach((function(e){return i[e]=function(){for(var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length,s=Array(2<o?o-2:0),u=2;u<o;u++)s[u-2]=arguments[u];return r(e).apply(void 0,[n(t),a(i)].concat(s))}})),["set","switch","arrayAdd","arrayItemOps","setHidden"].forEach((function(e){return i[e]=function(){for(var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],i=1<arguments.length?arguments[1]:void 0,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length,u=Array(3<s?s-3:0),c=3;c<s;c++)u[c-3]=arguments[c];return r(e).apply(void 0,[n(t),i,a(o)].concat(u))}})),i}},{key:"_clearActions",value:function(){this._newState=void 0,this._defferedTimerId=null,this._validation=null,this._updates=[],this._promise(!0)}},{key:"_execBatch",value:function(e,t,r,n){var a={type:ie,state:this._newState,updates:e,api:this,forceValidation:n,opts:t,promises:r};return this._clearActions(),this.dispatch(Je.bind(a)),r}},{key:"_setExecution",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(t.setExecution)return t.setExecution(e,t);var r=this;e&&W(r._updates,e),!0===t.force&&0<r._noExec&&r._noExec--;var n=r._promise();return!1===t.execute||r._noExec?n:(r._defferedTimerId&&clearTimeout(r._defferedTimerId),!0===t.execute?r._execBatch(r._updates,t,n,r._validation):r._defferedTimerId=setTimeout(r._execBatch.bind(r,r._updates,t,n,r._validation),t.execute||0),n)}},{key:"_promise",value:function(e){return e&&(this._resultPromises=null),this._resultPromises||(this._resultPromises=new ee,this._resultPromises.vAsync=new ee),this._resultPromises}}]),t}(function(){function e(t){if(w()(this,e),S()(this,"_isDispatching",void 0),S()(this,"_currentState",void 0),S()(this,"_reducer",void 0),S()(this,"_validator",void 0),S()(this,"_unsubscribe",void 0),S()(this,"_listeners",[]),S()(this,"JSONValidator",void 0),S()(this,"UPDATABLE",void 0),S()(this,"props",void 0),S()(this,"schema",void 0),S()(this,"dispatch",void 0),S()(this,"name",void 0),1==(t.getState?1:0)+(t.setState?1:0)&&new Error('Expected both "getState" and "setState" or none but not only one of them.'),t.store&&!t.name)throw new Error('Expected "name" to be passed together with "store".');this.props=t,this.schema=ue(t.schema,t.elements),this.name=t.name||"",this.dispatch=t.store?t.store.dispatch:this._dispatch.bind(this),this._reducer=se(),t.JSONValidator&&(this.JSONValidator=t.JSONValidator(this.schema)),this._getState=this._getState.bind(this),this._setState=this._setState.bind(this),t.setState&&t.store&&(this._unsubscribe=this.props.store.subscribe(this._handleChange.bind(this))),t.name&&(te[t.name]=this),this.UPDATABLE={update:{},replace:{},api:this}}return x()(e,[{key:"_dispatch",value:function(e){return"function"==typeof e?e(this._dispatch.bind(this)):(this._setState(this._reducer(this._getState()||{},e)),e)}},{key:"_setState",value:function(e){e===this._getState()||(this.props.setState?this.props.setState(e):this._currentState=e,this.props.store&&this._setStoreState(e),this._listeners.forEach((function(t){return t(e)})))}},{key:"_getState",value:function(){return this.props.store?this._getStoreState():this.props.getState?this.props.getState():this._currentState}},{key:"_setStoreState",value:function(e){return this.props.store.dispatch({type:ae,state:e,api:this})}},{key:"_getStoreState",value:function(){return this.props.name&&this.props.store.getState()[oe][this.props.name]}},{key:"_handleChange",value:function(){var e=this._getStoreState();e!==(this.props.getState?this.props.getState():this._currentState)&&this._setState(e)}},{key:"addListener",value:function(e){return this._listeners.push(e),this.props.store&&!this._unsubscribe&&(this._unsubscribe=this.props.store.subscribe(this._handleChange.bind(this))),this.delListener.bind(this,e)}},{key:"delListener",value:function(e){if(j(e))this._listeners=[];else{var t=this._listeners.indexOf(e);~t&&this._listeners.splice(t,1)}this._listeners.length||!this._unsubscribe||this.props.setState||(this._unsubscribe(),delete this._unsubscribe)}}]),e}()),ae="FFROM_SET_STATE",ie="FFROM_UPDATE_STATE",oe="fforms";function se(e){e&&(oe=e);var t={};return t[ae]=function(e,t){return t.api.props.store?function(e,t,r){if(e[t]!==r){var n=Z({},e);return n[t]=r,n}return e}(e,t.api.name,t.state):t.state},function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=1<arguments.length?arguments[1]:void 0,n=t[r.type];return n?n(e,r):e}}var ue=function(e,t){return fe(e)?e:ce(t,e)},ce=U((function(e,t){return function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=1<arguments.length?arguments[1]:void 0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];if(fe(r))return r;var a=D(r)?[]:{_compiled:!0},i=r,o=i._validators,s=i._data$,u=i._stateMaps,c=i._oneOfSelector,l=p()(i,["_validators","_data$","_stateMaps","_oneOfSelector"]),f={noStrictArrayResult:!0};return o&&(a._validators=Ot(le(ge(t,o,n)),(function(e){return St(e,f)}))),s&&(a._data$=Ot(le(ge(t,s,n)),(function(e){return St(e)}))),u&&(a._stateMaps=ge(t,u,n)),c&&(a._oneOfSelector=ge(t,St(c,f),n)),R(l).forEach((function(r){if("_"==r.substr(0,1))return a[r]="_presets"!==r&&$t(l[r])?ve(t,l[r],n):l[r];switch(r){case"default":case"enum":a[r]=l[r];break;case"definitions":case"properties":case"patternProperties":case"dependencies":var i={},o=l[r]||{};D(o)?i=o:R(o).forEach((function(a){return i[a]=e(t,o[a],n.concat(r,a))})),a[r]=i;break;default:a[r]=N(l[r])?e(t,l[r],n.concat(r)):l[r]}})),a}(e,t)})),le=function(e){return F(e)?e:C(e)};function fe(e){return z(e,"_compiled")}function pe(e,t,r){if(j(e))throw new Error('Reference "'+t+"\" leads to undefined object's property in path: "+_t(r));return!0}function he(e,t){for(var r=e["^"],n=!1;!n;){n=!0;for(var a=0;a<t.length;a++){if(e=z(e,t[a]),$t(e)){t=bt(e).concat(t.slice(a+1)),e={"^":r},n=!1;break}if(M(e)&&a+1!==t.length){e=e(r,t.slice(a+1));break}if(j(e))break}}return e}function de(e,t){return"_$"==e.substr(0,2)||t._$skipKeys&&~t._$skipKeys.indexOf(e)}var ve=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"",a={"^":e};return V(t.split("|").map((function(e){e=e.trim(),$t(e)?n=e.substr(0,e.lastIndexOf("/")+1):e=n+e,e=e.split(":");for(var t,i,o=0;o<e.length;o++)if(i=e[o]){$t(i)||(i=n+i);var s=he(a,bt(i));pe(s,i,r.concat("@"+o)),t=t?X(t,s):s}return t})))};function ge(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];if($t(t))return ve(e,t,r);if(!N(t))return t;var n=function e(t,r){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];if(!N(r))return r;var a=r.$_ref,i=void 0===a?"":a,o=p()(r,["$_ref"]);i=i.split(":");for(var s=[],u=0;u<i.length;u++)if(i[u]){var c=bt(i[u]);if("^"!==c[0])throw new Error("Can reffer only to ^");var l=he({"^":t},c);pe(l,i[u],n.concat("@"+u)),N(l)&&(l=e(t,l,n.concat("@"+u))),s.push(l)}for(var f=D(r)?[]:{},h=0;h<s.length;h++)f=X(f,s[h]);return X(f,Ot(o,e.bind(null,t),n))}(e,t),a=D(n)?[]:{};return R(n).forEach((function(t){var i=n[t];$t(i)&&(i=ve(e,i,r),"$"!==t&&!de(t,n)&&(M(i)||D(i)&&i.every(M))&&(i={$:i})),a[t]=de(t,n)?i:ge(e,i,r.concat(t))})),a}function me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ye(e){for(var t,r=1;r<arguments.length;r++)t=null==arguments[r]?{}:arguments[r],r%2?me(t,!0).forEach((function(r){S()(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):me(t).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}));return e}function _e(e){var t=function(e,t){if("object"!==a()(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==a()(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===a()(t)?t:t+""}var be=Symbol.for("FFormData"),$e=Symbol.for("FFormDataMapTree"),we=Symbol.for("FFormDataMap"),Oe=Symbol.for("FFormReset"),xe=Symbol.for("FFormClear"),Ee=void 0,Se=["null","boolean","integer","number","string","array","object"];Se.any=function(){return!0},Se.null=function(e){return null===e},Se.boolean=function(e){return"boolean"==typeof e},Se.number=A,Se.integer=function(e){return"number"==typeof e&&(Math.floor(e)===e||9007199254740992<e||-9007199254740992>e)},Se.string=P,Se.array=D,Se.object=F,Se.empty={any:null,null:null,boolean:!1,number:0,integer:0,string:"",array:Object.freeze([]),object:Object.freeze({})},Se.detect=function(e){for(var t=0;t<Se.length;t++)if(Se[Se[t]](e))return Se[t]};var ke={};function je(e){var t=[];if(Le(e))return t;if("array"==e[be].fData.type)for(var r=0;r<z(e,be,"length");r++)t.push(r.toString());else t=R(e).filter(Boolean);return t}ke.array=function(e,t,r,n){var a=n,i=a.path,o=(a.macros,a.value,a[be],p()(a,["path","macros","value",be].map(_e))),s=st([r.update,e],i,be,"length");if(!A(s))return e;if(D(n.value)){for(var u=[],c={},l=0;l<n.value.length;l++)u[s+l]=n.value[l],c[s+l]=z(n.replace,l);return u.length=s+n.value.length,Xe(e,r,u,c,i,n.setOneOf)}return 0>(s+=n.value||1)&&(s=0),tt(e,r,ct(i,["length"],s,!1,o))},ke.arrayItem=function(e,t,r,n){var a=n.path,i=n.op,s=n.value||0,u=parseInt(a.pop()),c=u,l=Ce(Me(t,a,Pe(e))),f=st([r.update,e],a,be,"length")-1;"up"==i&&c--,"down"==i&&c++,"first"==i&&(c=l),("last"==i||"del"==i)&&(c=f),"move"==i&&(c=s),"shift"==i&&(c+=s),c<l&&(c=l),c>f&&(c=f);var p={},h={},d={},v=[];v[0]=z(r.update,a),v[1]=z(r.update,be,"current",a),v[2]=z(r.replace,a),v[3]=z(r.replace,be,"current",a);for(var g=o()(ot(e,r)(a,be,"keys")),m=function(t){p[t]=z(e,a,t),h[t]=p[t][be].arrayItem,d[t]=z(e,be,"current",a,t),v.forEach((function(e){return N(e)&&!e.hasOwnProperty(t)&&(e[t]=xe)}))},y=Math.min(u,c);y<=Math.max(u,c);y++)m(y);p=q(p,u,c),d=q(d,u,c),g=q(g,u,c);var _=function e(t){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=z(t,$e,be)||[],a=n.map((function(e){return X(e,{emitter:r})})),i=n.length?S()({},$e,S()({},be,[])):void 0;return R(t).forEach((function(o){var s;t[o]&&(s=e(t[o],r.concat(o)),W(n,s.maps2disable),W(a,s.maps2enable),s.clearBinded&&(!i&&(i={}),i[o]=s.clearBinded))})),{maps2disable:n,maps2enable:a,clearBinded:i}}(p,a),b=_.maps2disable,$=_.maps2enable,w=_.clearBinded;return w&&(p=X(p,w)),v.forEach((function(e){if(N(e)){q(e,u,c);for(var t=Math.min(u,c);t<=Math.max(u,c);t++)e[t]===xe&&delete e[t]}})),R(p).forEach((function(e){p[e]=X(p[e],K(be,"arrayItem",h[e]),{replace:K(be,"arrayItem",!0)})})),e=X(e,K(a,p),{replace:at(n.path.length+1)}),e=tt(e=X(e,K(be,"current",a,d),{replace:at(n.path.length+3)}),r,ct(a,["keys"],g)),"del"==i&&(e=tt(e,r,ct(a,["length"],f))),e=rt(e=et(e,r),r,b,!0),e=rt(e,r,$)},ke.switch=function(e,t,r,n){return wt(K(n[be]||[],n.value),{arrayAsValue:!0}).forEach((function(a){return e=function e(t,r,n,a){var i=z(t,a.path),o=je(i);if(a.value==Oe&&"status"==a[be][0]){var s=ye({},a);s.value="untouched"==a[be][1]?Le(i)?1:o.length:0,t=tt(t,n,s)}else t=tt(t,n,a);return o.forEach((function(i){return t=e(t,r,n,X(a,{path:a.path.concat(i)}))})),t}(e,t,r,ct(n.path,a,a.pop()))})),e},ke.setExtraStatus=function(e,t,r,n){var a=n[be]||[],i=st([r.update,e],n.path,be,a),o=0<n.value;return!i==o&&(e=tt(e,r,ct(n.path,a,o)),e=ke.setStatus(e,t,r,ct(n.path,["status",a[a.length-1]],o?1:-1))),e},ke.setStatus=function(e,t,r,n){var a=n[be]||[];if(2<a.length)return ke.setExtraStatus(e,t,r,n);var i=a[1];if(!i)return e;if("valid"==i||"pristine"==i||"touched"==i)throw new Error('Setting "'+i+'" directly is not allowed');var o=st([r.update,e],n.path,be,a),s=Le(e,n.path);if("untouched"==i&&0==o&&!s)return e;var u,c=o+n.value;return s&&1<c&&(c=1),0>c&&(c=0),e=tt(e,r,ct(n.path,["status",i],c)),0==(u=n.path).length||1==u.length&&"#"==u[0]||!o==!c||(e=ke.setStatus(e,t,r,ct(n.path.slice(0,-1),a,0<c?1:-1))),e},ke.setCurrent=function(e,t,r,n){return Xe(e,r,n.value,n.replace,n.path,n.setOneOf)},ke.setOneOf=function(e,t,r,n){if(z(e,n.path,be,"oneOf")==n.value)return j(n.setValue)||(e=Xe(e,r,n.setValue,!1,n.path)),e;n.macros;var a=p()(n,["macros"]);return a[be]=["oneOf"],j(a.setValue)&&(e=et(e,r),a.setValue=z(e,be,"current",n.path)),tt(e,r,a)};var Ae=U((function(){return{}}));function Pe(e){return function(t){var r=z(M(e)?e():e,t,be);return{oneOf:z(r,"oneOf"),type:z(r,"fData","type")}}}function De(e,t){"function"==typeof e&&(e=e());var r={},n=r;H(n,z(e,be,"oneOf"),be,"oneOf"),H(n,z(e,be,"fData","type"),be,"type");for(var a=0;a<t.length;a++)j(t[a])||""===t[a]||(n[t[a]]={},n=n[t[a]],e=z(e,t[a]),H(n,z(e,be,"oneOf"),be,"oneOf"),H(n,z(e,be,"fData","type"),be,"type"));var i=function(e,t){return j(t)?z(r,e,be):H(r,t,e,be)};return i._canSet=!0,i}var Fe=U((function(e){return{_compiled:!0,oneOf:e,_oneOfSelector:St((function(){return bt(this.path).pop()%e.length}),{noStrictArrayResult:!0})}}));function Me(e,t,r,n){function a(e,r){var n=[];if(r.items){if(!D(r.items))return r.items;n=r.items}if(e<n.length)return n[e];if(!1!==r.additionalItems)return r.additionalItems&&!0!==r.additionalItems?r.additionalItems:Fe(n);throw new Error(f+t.join("/"))}function i(e,t){var r=bt(t);if("#"==t[0])return z(e,r);throw new Error("Can only ref to #")}function o(t){if(t.$ref||t.allOf||t.oneOf)if(d.get(t))t=d.get(t);else{var r=t;if((t=s(e,t)).oneOf){var n=t,a=n.oneOf,i=p()(n,["oneOf"]);t=a.map((function(t,r){return X.all(s(e,t),[i,{_oneOfIndex:r}],{array:"replace"})}))}d.set(r,t)}return t}function s(e,t){if((t=function(e,t){for(;t.$ref;)t=i(e,t.$ref);return t}(e,t)).allOf){for(var r,n=t,a=n.allOf,o=p()(n,["allOf"]),u=0;u<a.length;u++)r=X(r,s(e,a[u]),{array:"replace"});t=X(r,o)}return t}function u(e,t,r){var n=0,a=Se.detect(t);if(a){e=C(e);for(var i,o=0;o<e.length;o++)if(!(i=e[o].type)||C(i).some((function(e){return e===a}))){n=o;break}e[n]._oneOfSelector&&(n=At.call({path:_t(r)},e[n]._oneOfSelector,t),D(n)&&(n=n[0]))}return{oneOf:n,type:a}}for(var c=M(r)?r:void 0,l=M(r)?void 0:r,f="Schema path not found: ",h=e,d=J(Ae(e),new Map,"combinedSchemas"),v="#"==t[0]?1:0;v<t.length;v++){if(!h)throw new Error(f+t.join("/"));h=o(h);var g=t.slice(0,v),m=c?c(g):u(h,z(l,g),g),y=m.oneOf,_=m.type;if(D(h)&&(h=h[y||0]),j(_)&&(_=C(h.type||"null")[0]),"array"==_){if(isNaN(parseInt(t[v])))throw new Error(f+t.join("/"));h=a(t[v],h)}else{if(!h.properties||!h.properties[t[v]])throw new Error(f+t.join("/"));h=h.properties[t[v]]}}if(h=o(h),n)return h;if(D(h)){var b=c?c(t):u(h,z(l,t),t);y=b.oneOf,_=b.type;h=h[y||0]}return h}var Ce=U((function(e){return D(e.items)?!1===e.additionalItems?e.items.length:"object"===a()(e.additionalItems)?e.items.length:0==e.items.length?0:e.items.length-1:0})),Ve={invalid:0,dirty:0,untouched:1,pending:0,valid:!0,touched:!1,pristine:!0},Ne=U((function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:e.default,a=e._params,i=void 0===a?{}:a,o=e._data,s=void 0===o?{}:o,u=Object.assign({params:i},s);F(u.messages)||(u.messages={}),j(n)&&(n=Se.empty[r||"any"]),u.oneOf=t,u.status=Ve,F(u.fData)||(u.fData={});var c=u.fData;if(c.type=r,c.required=e.required,c.title=e.title,c.placeholder=e._placeholder,c.additionalProperties=e.additionalProperties,c.strictLayout=e._strictLayout,e.enum&&(c.enum=e.enum),e._enumExten&&(c.enumExten=e._enumExten),D(e._enumExten)&&D(e.enum)){var l={};c.enumExten=c.enumExten.map((function(e){return P(e)?{label:e}:e})),c.enum.forEach((function(e,t){return l[e]=c.enumExten[t]})),c.enumExten=l}else if(e._enumExten&&!c.enum)if(D(c.enumExten)){var f={},p=[];c.enumExten.forEach((function(e){P(e)?(f[e]={label:e},p.push(e)):F(e)&&(j(e.value)?!j(e.label)&&(f[e.label]=e,p.push(e.label)):(j(e.label)&&(e=ye({},e,{label:e.value})),f[e.value]=e,p.push(e.value)))})),c.enumExten=f,c.enum=p}else c.enum=R(c.enumExten).filter((function(e){return c.enumExten[e]}));e._oneOfSelector&&(c.oneOfSelector=!0),Ue(e,r)?u.value=n:delete u.value;var h=1;if("array"==r?(u.length=z(n,"length")||0,!j(e.minItems)&&u.length<e.minItems&&(u.length=e.minItems),u.fData.canAdd=Te(e,u.length),h=u.length):"object"==r&&(h=R(e.properties||{}).length),1!=h&&(u.status=ye({},u.status,{untouched:h})),e._data$){var d=[];R(e._data$).forEach((function(t){return W(d,At.call({},e._data$[t],e))})),u=X(u,d)}return u}));function Re(){return Date.now().toString(36)+Math.random().toString(36)}function Ie(e,t){var r,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],a=3<arguments.length?arguments[3]:void 0,i={},o=[],s=(t(n)||{}).oneOf,u=C(Me(e,n,t,!0));if(j(s)){var c=u[s||0]._oneOfSelector;if(c){var l=At.call({path:_t(n)},c,a);D(l)&&(l=l[0]),s=l}}var f=We(u,a,s),h=f.schemaPart,d=f.oneOf,v=f.type;if(j(h)||!j(s)&&s!=d){console.info('Passed value: "'+a+'" is not supported by schema.type in path "'+n.join("/")+'" and oneOfIndex "'+s+'". Reset value to default.\n');var g=We(u,a=u[s||0].default,s);h=g.schemaPart,d=g.oneOf,v=g.type}if(W(o,function(e,t){return R(e).map((function(r){var n=e[r],a=n.from,i=n.to,o=p()(n,["from","to"]);return o=!o.$||St(o),a&&i||(o=!1),{emitter:t,from:a,to:i,action:o}}))}(h._stateMaps||[],n)),i[we]={},i[be]=Ne(h,d,v,a),t(n,{oneOf:d,type:v}),i[be].hasOwnProperty("value"))r=i[be].value;else{if("array"==v){(r=[]).length=i[be].length;for(var m=[],y=0;y<r.length;y++){var _=Ie(e,t,n.concat(y),z(j(a)?h.default:a,y)),b=_.state,$=_.dataMap,w=_.defaultValues;r[y]=w,W(o,$),b=X(b,S()({},be,{arrayItem:Be(h,y,r.length)}),{replace:S()({},be,{ArrayItem:!0})}),b=X(b,S()({},be,{params:{uniqKey:Re()}})),i[y]=b,m[y]=b[be].params.uniqKey}i[be]=X(i[be],{keys:m})}else if("object"==v){r=F(h.default)?ye({},h.default):{},a&&!1===h.additionalProperties&&(a=Ye(h,a),r=Ye(h,r)),F(a)&&Object.assign(r,a);var O=i[be].fData.required;O=D(O)&&O.length&&O,R(h.properties||{}).forEach((function(s){var u=Ie(e,t,n.concat(s),z(j(a)?h.default:a,s)),c=u.state,l=u.dataMap,f=u.defaultValues;r[s]=f,W(o,l),O&&~O.indexOf(s)&&(c=X(c,S()({},be,{fData:{required:!0}}))),i[s]=c}))}a&&(r=X(a,r,{replace:at(1)}))}return{state:i,defaultValues:r,dataMap:o}}function Te(e,t){var r=Ce(e);e.minItems;return(!1!==e.additionalItems||t<r)&&t<(e.maxItems||1/0)}function Be(e,t,r){var n={},a=Ce(e);e.minItems;return n.canUp=a<t,n.canDown=a<=t&&t<r-1,n.canDel=t>=Math.min(a,r-1),n}function Le(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return G.apply(void 0,[e].concat(r,[be,"value"]))}function Ue(e,t){return"array"!==t&&"object"!==t||z(e,"_simple")}function We(e,t,r){D(e)||(e=[e]);var n=e.map((function(e,t){return t}));r&&q(n,r,0);for(var a=0;a<n.length;a++){var i=n[a],o=e[i].type||Se;D(o)||(o=[o]);for(var s=void 0,u=j(t)?(s=!0)&&e[i].default:t,c=0;c<o.length;c++)if(Se[o[c]](u)||j(u))return{schemaPart:e[i],oneOf:i,type:o[c]};if(s&&!j(e[i].default))throw new Error("Type of schema.default is not supported by schema.type")}return{}}function qe(e,t,r,n){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0;return C(n).map((function(e){return"object"===a()(e)?e:{group:i,data:e}})).forEach((function(n){var a=n.path,o=p()(n,["path"]);if(a)a=yt(a,r),e=qe(e,t,a,o,i);else{var s=o.group,u=void 0===s?i:s,c=o.data,l=o.priority,f=void 0===l?0:l,h=p()(o,["group","data","priority"]),d=J(t.update,{},r,be,"messages",f);Object.assign(d,h),F(d.texts)||(d.texts={}),D(d.texts[u])||(d.texts[u]=[]),c&&W(d.texts[u],c)}})),e}function Ke(e){for(var t,r=R(e||{}),n=0;n<r.length;n++){for(var a=z(e,r[n],"texts")||{},i=R(a),o=0;o<i.length;o++)if(a[i[o]]&&a[i[o]].length){t=parseInt(r[n]);break}if(!j(t))break}return t}function Ge(e,t,r,n){return e=tt(e,t,ct(r,["status","validation","invalid"],0===n?1:0,!0,{macros:"setStatus"})),e=tt(e,t,ct(r,["status","priority"],n))}function He(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[],a=Ke(z(e,n,be,"messages"));return Le(e=Ge(e,t,n,a),n)||R(r).forEach((function(a){return e=He(e,t,r[a],n.concat(a))})),e}function ze(e,t,r,n){var a,i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:[],o=!!(5<arguments.length&&void 0!==arguments[5])&&arguments[5],s=t.api.schema;try{a=Me(s,i,Pe(e))}catch(e){}if(!a||Le(e,i)){var u=z(e,be,"current",i);j(r)&&(r=z(e,be,"default",i));var c=o||u!==r?1:-1,l=i,f=["status","dirty"];a||(l=l.slice(),f.push(l.pop(),f.pop())),e=tt(e,t,ct(l,f,c,!1,{macros:"setStatus"}))}else{var p=R(n||{});if("array"==a.type){~p.indexOf("length")||p.push("length");var h=je(z(e,i));p=p.filter((function(e){return isNaN(parseInt(e))||~h.indexOf(e)}))}o=o||!N(r),p.forEach((function(a){return e=ze(e,t,z(r,a),z(n,a),i.concat(a),o)}))}return e}function Je(e){var t=this.updates,r=this.state,n=this.api,a=this.forceValidation,i=this.opts,o=this.promises,s=n.getState,u=(n.schema,n.UPDATABLE);r||(r=s());var c=r;t.forEach((function(e){return r=tt(r,u,e)})),r=et(r,u);var l=z(c,be,"current");if(u.forceCheck&&(l=X(l,u.forceCheck),u.forceCheck=void 0),c[be].inital!==r[be].inital){var f=Q(c[be].inital,r[be].inital,{diff:!0}).changes;r=ze(r,u,r[be].inital,f)}var p,h=Q(l,z(r,be,"current"),{diff:!0}).changes;return h&&(r=ze(r,u,r[be].inital,h)),r=et(r=function e(t,r,n){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[];return z(r.update,a,be,"status","pristine")?N(n)&&z(t,be,"current",a)!==n&&(H(r.update,n,be,"current",a),H(r.replace,!0,be,"current",a)):R(z(r.update,a)).forEach((function(i){return e(t,r,z(n,i),a.concat(i))})),t}(r,u,r[be].inital),u),i.noValidation?p=a:a?(wt(h).forEach((function(e){e.pop(),vt(a,!0,e)})),p=a):p=N(h)?h:!j(h),p&&(r=function(e,t,r){var n=r.api,a=r.force,i=(r.opts,r.promises),o=n.JSONValidator,s=n.schema,u=n.getState,c=n.UPDATABLE,l=e[be].current,f=[],p=!0===a?l:a;if(!p||0==R(p).length)return i.resolve(),i.vAsync.resolve(),e;o&&(e=function e(t,r){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],a=z(t,n,be,"fData","type");return a?(("object"==a||"array"==a)&&r&&R(r).forEach((function(a){return e(t,r[a],n.concat(a))})),Ze(c,{},!0,n,be,"messages","0","texts"),t):t}(e,p),o(l).forEach((function(t){return qe(e,c,t[0],t[1])}))),e=function e(t,r,n){var a,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[];try{a=Me(s,i,Pe(t))}catch(e){return t}var o=Le(t,i);!o&&n&&R(n).forEach((function(a){return t=e(t,r[a],n[a],i.concat(a))}));var u=z(a,"_validators");if(u){var l=it(c.api,_t(i));R(u).forEach((function(e){var n=u[e],a=[];l.updates=a;var s=At.call(l,n,r);s&&s.then&&"function"==typeof s.then?(s.validatedValue=r,s.path=i,s.selfManaged=o,f.push(s),t=tt(t,c,ct(i,["status","validation","pending"],1,!0,{macros:"setStatus"}))):t=qe(t,c,i,s,1),a.length&&a.forEach((function(e){return t=tt(t,c,e)})),l.updates=null}))}return t}(e,l,p);var h=c.update;return e=et(e,c),e=et(e=He(e,c,h),c),i.resolve(),f.length?Promise.all(f).then((function(e){for(var r=u(),a=n.UPDATABLE,o=r[be].current,s=0;s<f.length;s++){var c=f[s],l=c.validatedValue,p=c.path;c.selfManaged;l==z(o,p)&&(r=tt(r=qe(r,a,p,e[s]||"",2),a,ct(p,["status","validation","pending"],0,!1,{macros:"setStatus"})))}var h=a.update;r=et(r,a),r=et(r=He(r,a,h),a),t({type:ae,state:r,api:n}),i.vAsync.resolve()})).catch((function(e){for(var r=u(),a=n.UPDATABLE,o=r[be].current,s=0;s<f.length;s++){var c=f[s],l=c.validatedValue,p=c.path;c.selfManaged;l==z(o,p)&&(r=tt(r,a,ct(p,["status","validation","pending"],0,!1,{macros:"setStatus"})))}var h=a.update;r=et(r,a),r=et(r=He(r,a,h),a),t({type:ae,state:r,api:n}),i.vAsync.reject(e)})):i.vAsync.resolve(),e}(r,e,{force:p,api:n,opts:i,promises:o})),e({type:ae,state:r,api:n}),o}var Qe=U((function(e){return Ie(e,De({},[]))}));function Xe(e,t,r,n){var a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:[],i=5<arguments.length?arguments[5]:void 0;if((r===Oe||j(r))&&(r=z(e,be,"inital",a)),(r===xe||j(r))&&(r=z(e,be,"default",a)),z(e,be,"current",a)===r&&!G(t.update,be,"current",a))return e;var o=t.api.schema,s=z(e,a);if(!s){if("length"==a[a.length-1]){var u=a.slice(0,-1);if("array"==z(e,u)[be].fData.type)return tt(e,t,ct(u,["length"],r))}return tt(e,t,ct([],["current"].concat(a),r,n))}s[be].fData.oneOfSelector&&it(t.api,_t(a));var c=s[be].fData.oneOfSelector,l=s[be].fData.type;if(!j(i)||c||!Se[l||"any"](r)){var f=Me(o,a,Pe(e),!0),p=s[be].oneOf;if(c){var h=f[p]._oneOfSelector;i=At.call({path:_t(a)},h,r),D(i)&&(i=i[0])}var d=We(f,r,j(i)?p:i),v=d.schemaPart,g=d.oneOf,m=d.type;if(p!==g){if(v)return z(e,be,"current",a),Ue(v,m)||s[be].fData.type!==m||(r=X(z(e,be,"current",a),r,{replace:n})),tt(e,t,ct(a,["oneOf"],g,!1,{type:m,setValue:r}));console.warn('Type "'+Se.detect(r)+'" not found in path ['+a.join("/")+"]")}}if(Le(s))e=tt(e,t,ct(a,["value"],r,n));else if(N(r)){"array"!=l||j(r.length)||(s=z(e=tt(e,t,ct(a,["length"],r.length)),a));var y="object"==l&&!1===s[be].fData.additionalProperties;if(y&&(r=Ye(Me(o,a,Pe(e)),r)),!0===n){var _=D(r)?[]:{};je(s).forEach((function(e){return _[e]=void 0})),r=Object.assign(_,r)}if(R(r).forEach((function(i){return e=Xe(e,t,r[i],!0===n||z(n,i),a.concat(i))})),!0===n||y){s=z(e=et(e,t),a);var b=z(e,be,"current",a);je(s).forEach((function(e){return r[e]=b[e]})),e=tt(e,t,ct([],["current"].concat(a),r,n))}}return e}function Ye(e,t){if("object"!==e.type||!1!==e.additionalProperties)return t;var r={},n=e.properties||{},a=R(e.patternProperties||{}).map((function(e){return new RegExp(e)}));return R(t).forEach((function(e){(n[e]||a.some((function(t){return e.match(t)})))&&(r[e]=t[e])})),r}function Ze(e,t,r){for(var n=arguments.length,a=Array(3<n?n-3:0),i=3;i<n;i++)a[i-3]=arguments[i];return wt(r).forEach((function(r){var n=r.pop();H.apply(void 0,[e,z(t,r),"update"].concat(a,[r])),n&&H.apply(void 0,[e,n,"replace"].concat(a,[r]))})),e}function et(e,t){return e=X(e,t.update,{replace:t.replace}),t.update={},t.replace={},e}function tt(e,t,r){if(!r)return e;var n,a=t.update,i=(t.replace,t.api.schema);if(j(z(n=r,be))||!D(n[be]))return function(e,t,r){return lt(r,e).forEach((function(r){if(0===r.path.length&&"current"==r[be][0]&&(r.macros="setCurrent",r.path=r[be].slice(1),r[be]=[]),"value"==r[be][0])r.macros="setCurrent",r.path=r.path.concat(r[be].slice(1)),r[be]=[];else{if("status"==r[be][0])return void console.warn("Status should not be changed through StateApi. Update ignored.");"oneOf"==r[be][0]&&(r.macros="setOneOf")}e=tt(e,t,r)})),e}(e,t,r);if(r.macros){var s=ke[r.macros];if(!s)throw new Error('"'+s+'" not found in macros');return s(e,i,t,r)}var u=r.value,c=r.path,l=r.replace,f=r[be];if(M(u)&&(u=u(ot(e,t)(c,be,f))),0!=c.length||"inital"!=f[0]&&"default"!=f[0]){if(F(u)&&(0==f.length&&(G(u,"value")||G(u,"status")||G(u,"length")||G(u,"oneOf"))||1==f.length&&"status"==f[0]))return function(e,t,r){var n=r.value,a=r.path,i=r.replace,o=r[be]||[];if(0==o.length){n.value,n.status,n.length,n.oneOf;var s=p()(n,["value","status","length","oneOf"]);["value","status","length","oneOf"].forEach((function(r){G(n,r)&&(e=tt(e,t,ct(a,[r],n[r],z(i,r))))})),R(s).length&&(e=tt(e,t,ct(a,o,s,i)))}else R(n).forEach((function(r){e=tt(e,t,ct(a,o.concat(r),n[r],z(i,r)))}));return e}(e,t,r);var h=z(e,c);if(!F(h))return e;if("value"==f[0]&&!G(h,be,"value"))return ke.setCurrent(e,i,t,{value:u,replace:l,path:c.concat(f.slice(1))});if(u===st([t.update,e],c,be,f))return e;if(Ze(t,u,l,c,be,f),"value"==f[0])e=tt(e,t,ct([],W(["current"],c,f.slice(1)),u,l));else if("messages"==f[0]){var d=Ke(ot(e,t)(c,be,"messages"));e=Ge(e,t,c,d)}else if("length"==f[0]){e=tt(e,t,ct([],W(["current"],c,f),u,l));var v=h[be].length;v=Math.max(v,0);var g=Math.max(u||0),m=De(e,c),y=[],_=[],b=o()(ot(e,t)(c,be,"keys"));b.length=g;for(var $,w=v;w<g;w++){$=c.concat(w),j(r.setOneOf)||m($,{oneOf:r.setOneOf});var O=Ie(i,m,$),x=O.state,E=O.dataMap,k=void 0===E?[]:E,A=O.defaultValues,P=st([e,t.update],c,be,"status","untouched"),C=S()({},be,{params:{uniqKey:Re()}});b[w]=C[be].params.uniqKey,P||H(C[be],{untouched:0,touched:!0},"status"),x=X(x,C),e=tt(e=X(e,H({},x,$),{replace:H({},!0,$)}),t,ct([],W(["current"],$),A,!0)),W(y,k),P&&(e=ke.setStatus(e,i,t,ct(c,["status","untouched"],1)))}for(var V=function(r){var n=c.concat(r);W(_,z(e,n,$e,be)||[]),["invalid","dirty","untouched","pending"].forEach((function(r){st([a,e],n,be,"status",r)&&(e=ke.setStatus(e,i,t,ct(c,["status",r],-1)))})),Ze(t,Ee,!0,n)},I=g;I<v;I++)V(I);var T=Me(i,c,Pe(e));H(a,Te(T,g),c,be,"fData","canAdd");for(var B=Math.max(Math.min(v,g)-1,0);B<g;B++)Ze(t,Be(T,B,g),!0,c,B,be,"arrayItem");e=rt(e=et(e,t),t,_,!0),e=tt(e=rt(e,t,y),t,ct(c,["keys"],b))}else if("status"==f[0]){var L,U,q=f[1];"invalid"==q||"pending"==q?(U=st([a,e],c,be,"status","pending")?null:!st([a,e],c,be,"status","invalid"),L="valid"):("untouched"==q||"dirty"==q)&&(U=!st([a,e],c,be,"status",q),L="untouched"==q?"touched":"pristine"),j(L)||(e=tt(e,t,ct(c,["status",L],U)))}else if("oneOf"==f[0]){var J=z(e,c);if((z(J,be,"oneOf")||0)!=z(t.update,c,be,"oneOf")||r.type&&r.type!=z(J,be,"fData","type")){vt(t,Oe,"forceCheck",r.path),e=rt(e=et(e,t),t,z(e,c,$e,be)||[],!0);var Q=Ie(i,De(e,c),c,r.setValue),Y=Q.state,Z=Q.dataMap,ee=void 0===Z?[]:Z,te=(A=Q.defaultValues,J[be]),re=(te.value,te.length,te.oneOf,te.fData,p()(te,["value","length","oneOf","fData"]));if(Le(J)&&Le(Y)||delete re.status,Y=X(Y,S()({},be,re),{arrays:"replace"}),c.length){var ne=c.slice(),ae=ne.pop();["invalid","dirty","pending"].forEach((function(r){var n=z(J,be,"status",r),a=z(Y,be,"status",r);!n!=!a&&(e=ke.setStatus(e,i,t,ct(ne,["status",r],a?1:-1)))}));var ie=z(e,ne,be,"fData","required");(ie=D(ie)&&ie.length&&ie)&&~ie.indexOf(ae)&&(Y=X(Y,S()({},be,{fData:{required:!0}})))}0==z(J,be,"status","untouched")&&(Y=X(Y,S()({},be,{status:{untouched:0}}))),e=rt(e=tt(e=X(e,H({},Y,c),{replace:H({},!0,c)}),t,ct([],W(["current"],c),A,!0)),t,ee),0==z(Y,be,"status","untouched")&&(e=ke.switch(e,i,t,ct(c,["status","untouched"],0)))}}}else e=X(e,K(be,f,u),{replace:K(be,f,l)});for(var oe=z(e,c,$e),se=0;se<f.length&&oe;se++)e=nt(e,t,oe[we],ct(c,f.slice(0,se),H({},u,f.slice(se)),H({},l,f.slice(se)))),oe=oe[f[se]];return oe&&(e=function r(n,a,i){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[];return e=nt(e,t,n[we],ct(c,o,a,i)),N(a)&&R(n).forEach((function(t){return a.hasOwnProperty(t)&&(e=r(n[t],a[t],z(i,t),o.concat(t)))})),e}(oe,u,l,f)),e}function rt(e,t,r){var n=!!(3<arguments.length&&void 0!==arguments[3])&&arguments[3],a=[];return r.forEach((function(r){var i=r.emitter,s=!1;if(lt({path:("/"==r.from[0]?"":i.join("/"))+"/"+r.from,value:null},e).forEach((function(u){var c=u[be][0];("current"==c||"inital"==c||"default"==c&&u.path.length)&&(u=ye({},u,S()({path:[]},be,[c].concat(o()(u.path),o()(u[be].slice(1)))))),lt({path:i.join("/")+"/"+r.to,value:null},e).forEach((function(c){var l,f=_t(dt(u.path,(l=c.path).concat.apply(l,[be].concat(o()(c[be])))));z(e,u.path)&&H(t.update,n?void 0:r.action,u.path,$e,u[be],we,f),n||(a.push({map:K(f,r.action),fromPath:u.path,keyPath:u[be]}),!s&&"."!=dt(i,u.path)[0]&&(s=!0))}))})),s){var u=z(e,i);if(u){var c,l=z(u,$e,be)||[];for(c=0;c<l.length&&(r.from!==l[c].from||r.to!==l[c].to);c++);(l=l.slice())[c]=r,Ze(t,l,!0,i,$e,be)}}e=et(e,t)})),null!==n&&a.forEach((function(r){e=et(e=nt(e,t,r.map,ct(r.fromPath,r.keyPath,z(e,r.fromPath,be,r.keyPath))),t)})),e}function nt(e,t,r,n){var a=n.value,i=n.path,o=n.replace,s=function(e){var t=_t(e.path);return t+(e[be]&&!~t.indexOf("@")?"/@/"+_t(e[be]):"")}(n);return R(r||{}).forEach((function(n){if(r[n]){var u=r[n],c=_t(yt(n,i)),l=a,f=[];if(F(u)){var p=it(t.api,c,s);p.get=ot(e,t),p.updates=f,l=At.call(p,u,a),p.updates=null,p.get=null}f.length||j(l)&&F(u)||f.push({path:c,value:l,replace:j(u.replace)?o:u.replace}),f.forEach((function(r){return e=tt(e,t,r)}))}})),e}var at=function(e){return function(t){return z(t,"length")===e}};var it=U((function(e,t,r){var n=t.split("@")[0],a=r?r.split("@")[0]:n,i={from:r,to:t,path:n,stateApi:e,updates:[]};return i.api=e.wrapper(i),i.wrapOpts=function(e){return i.updates&&j(e.setExecution)&&(e.setExecution=function(e){return e&&W(i.updates,e)}),e},i.getData=function(){return i.api.get(a,be)},i}));function ot(e,t){return function(){for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];return G.apply(void 0,[t.update].concat(o()(n.map((function(e){return yt(e)})))))?X(ut.apply(void 0,[e].concat(n)),ut.apply(void 0,[t.update].concat(n)),{replace:ut.apply(void 0,[t.replace].concat(n))}):ut.apply(void 0,[e].concat(n))}}function st(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];for(var a=0;a<e.length;a++)if(G.apply(void 0,[e[a]].concat(r)))return z.apply(void 0,[e[a]].concat(r))}function ut(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return z.apply(void 0,[e].concat(o()(r.map((function(e){return yt(e)})))))}var ct=function(e,t,r,n){var a,i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{};return ye((a={path:e},S()(a,be,t),S()(a,"value",r),S()(a,"replace",n),a),i)};function lt(e,t){var r=e.path,n=e.value,a=e.replace,i=e.base,o=p()(e,["path","value","replace","base"]),s=[];return _t(r).split(";").forEach((function(e){var r=yt(e,i),u=[],c=r.indexOf(be);~c&&(u=r.slice(c+1),r=r.slice(0,c)),r=pt(r,{"*":function(e){return je(z(t,e)).join(",")}}),u=pt(u),R(r).forEach((function(e){return R(u).forEach((function(t){return s.push(ct(r[e],u[t],n,a,o))}))}))})),s}var ft=function(e,t){return j(t)?ft._data[e]:(ft._data[e]=t,void(ft._data[t]=e))};function pt(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r={"":[]};return e.forEach((function(e){var n={};"string"==typeof(e=t[e]||e)&&~e.indexOf(",")?R(r).forEach((function(t){return e.split(",").forEach((function(e){return n[t&&t+","+e||e]=r[t].concat(e.trim())}))})):"function"==typeof e?R(r).forEach((function(a){var i=e(r[a]);"string"==typeof i&&(i=bt(i)),i=pt(i,t),R(i).forEach((function(e){return n[a&&a+(e?","+e:"")||e]=r[a].concat(i[e])}))})):R(r).forEach((function(t){return W(r[t],e)})),R(n).length&&(r=n)})),r}ft._data={"#":""},ft.sym2str=function(e){return"symbol"!=a()(e)||j(ft(e))?e:ft(e)},ft.str2sym=function(e){return"string"!=typeof e||j(ft(e))?e:ft(e)},ft("@",be);var ht=function(e){return"number"==typeof e?e.toString():e};function dt(e,t){"#"===e[0]&&(e=e.slice(1)),"#"===t[0]&&(t=t.slice(1));var r,n=[];for(r=0;r<e.length&&ht(e[r])===ht(t[r]);r++);for(var a=r;a<e.length;a++)n.push("..");return n.length||n.push("."),W(n,t.slice(r))}function vt(e,t){if(e===t)return e;for(var r=arguments.length,n=Array(2<r?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];for(var i=gt(n),o=e,s=0;s<i.length-1;s++){if(o[i[s]]===t)return e;F(o[i[s]])||(o[i[s]]={}),o=o[i[s]]}return i.length?(o[i[i.length-1]]=t,e):t}function gt(e){if(D(e)){var t=[];return W.apply(void 0,[t].concat(o()(e.map(gt)))),t}return"string"==typeof e?bt(e):[e]}function mt(e){return N(e)&&"nPath"===z(e,be)}function yt(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],r=function(e,t){for(var r,n=!t||"."!==e[0]&&".."!=e[0]?[]:t.slice(),a=0;a<e.length;a++)".."===(r=e[a])?n.pop():""!==r&&"."!==r&&n.push(r);return n}(gt(e),t.length?gt(t):[]);return r[be]="nPath",r}function _t(e){return D(e)?e.map(_t).join("/"):ft.sym2str(e)}function bt(e){e=(e=e.replace(ft(be),"/"+ft(be)+"/")).replace(/\/+/g,"/");var t=[];return e.split("/").forEach((function(e){return e&&(e=ft.str2sym(e.trim()))&&t.push(e)})),t}var $t=function(e){return P(e)&&"^/"==e.trim().substr(0,2)};function wt(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],n=t.symbol?I:R,a=t.arrayAsValue?F:N;if(!a(e))return[[e]];var i=[];return n(e).forEach((function(n){var o=r.concat(n);a(e[n])?wt(e[n],t,o).forEach((function(e){return i.push(e)})):(o.push(e[n]),i.push(o))})),i.length?i:[W(r.slice(),{})]}var Ot=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];return R(e).reduce((function(n,a){return n[a]=t(e[a],r.concat(a)),n}),D(e)?[]:{})},xt=function(e){return F(e)&&e.$||M(e)&&e._map};function Et(e,t){var r=!1;return e=C(j(e)?[]:e).map((function(e){if(P(e)){var n=0;if("@"==e[0]&&(n=1),"!@"==e.substr(0,2)&&(n=2),"!!@"==e.substr(0,3)&&(n=3),n){r=!0;var a=yt(e.substr(n));return 2==n&&(a[we]="not"),3==n&&(a[we]="doubleNot"),a}}if(xt(e)){var i=Et(e.args,t);return i.dataRequest&&(r=!0),i=ye({},e,{},i),t?t(i):i}return t&&N(e)?t(e):e})),{dataRequest:r,args:e,norm:!0}}function St(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=(t.wrapFn,p()(t,["wrapFn"])),n=F(e)?ye({},e,{},r):ye({$:e},r);return n.args?Object.assign(n,Et(n.args,t.wrapFn)):n.args=["${...}"],n}function kt(e){if(j(e))return[];if(!D(e))throw new Error("array expected");return e}function jt(e,t){var r=z(e,t);switch(t[we]){case"not":return!r;case"doubleNot":return!!r;default:return r}}function At(e){for(var t=this,r=arguments.length,n=Array(1<r?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];var i=e.dataRequest?this.getData():null,o=function(e){for(var r,a=[],o=0;o<e.length;o++)mt(r=e[o])?a.push(jt(i,r)):xt(r)?a.push(r._map?r.apply(void 0,n):At.call.apply(At,[t,r].concat(n))):"${...}"==r?a.push.apply(a,n):P(r)&&~r.search(/^\${\d+}$/)?a.push(n[r.substring(2,r.length-1)]):a.push(r);return a}(e.args),s=C(e.$).reduce((function(r,n){return M(n)?(e.noStrictArrayResult?C:kt)(n.apply(t,r)):r}),o);return e.noStrictArrayResult?V(s):kt(s)[0]}r.d(t,"elements",(function(){return rr})),r.d(t,"FForm",(function(){return Vt})),r.d(t,"FField",(function(){return Rt})),r.d(t,"extractMaps",(function(){return Qt})),r.d(t,"normalizeMaps",(function(){return Xt})),r.d(t,"updateProps",(function(){return Yt})),r.d(t,"classNames",(function(){return tr})),r.d(t,"comparePropsFn",(function(){return er})),r.d(t,"getExten",(function(){return Zt})),r.d(t,"formReducer",(function(){return se})),r.d(t,"FFormStateAPI",(function(){return ne})),r.d(t,"fformCores",(function(){return re}));var Pt;function Dt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ft(e){for(var t,r=1;r<arguments.length;r++)t=null==arguments[r]?{}:arguments[r],r%2?Dt(t,!0).forEach((function(r){S()(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Dt(t).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}));return e}var Mt=Symbol("_$cx"),Ct=function(){function e(t){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};w()(this,e),S()(this,"type",void 0),S()(this,"bubbles",void 0),S()(this,"cancelable",void 0),S()(this,"detail",void 0),S()(this,"defaultPrevented",void 0);this.type=t,this.bubbles=!!r.bubbles,this.cancelable=!!r.cancelable,this.detail=!!r.detail}return x()(e,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),e}(),Vt=function(e){function t(e){var r,n;w()(this,t);for(var a=arguments.length,i=Array(1<a?a-1:0),o=1;o<a;o++)i[o-1]=arguments[o];n=d()(this,(r=g()(t)).call.apply(r,[this,e].concat(i))),S()(y()(n),"_unsubscribe",void 0),S()(y()(n),"_savedState",void 0),S()(y()(n),"_savedValue",void 0),S()(y()(n),"_root",void 0),S()(y()(n),"_form",void 0),S()(y()(n),"_methods",{onSubmit:null,onChange:null,onStateChange:null}),S()(y()(n),"api",void 0),S()(y()(n),"elements",void 0),S()(y()(n),"parent",void 0),S()(y()(n),"wrapFns",Ht);var s=y()(n);return s.api=s._coreFromParams(e.core),Object.defineProperty(s,"elements",{get:function(){return s.api.props.elements}}),Object.defineProperty(s,"valid",{get:function(){return s.api.get("/@/status/valid")}}),s.parent=e.parent,s._updateMethods(e),s._initState(e),s._unsubscribe=s.api.addListener(s._handleStateUpdate.bind(s)),s._setRootRef=s._setRootRef.bind(s),s._setFormRef=s._setFormRef.bind(s),s._submit=s._submit.bind(s),s.reset=s.reset.bind(s),n}return b()(t,e),x()(t,[{key:"_coreFromParams",value:function(e){return e instanceof ne?e:re(e.name)||new ne(e)}},{key:"_initState",value:function(e){var r=Ft({},e);null!==e.touched&&(r.touched=!!r.touched),t.params.forEach((function(t){j(r[t])||(r[t]=function(r){return j(r)?e[t]:r})})),j(r.value)&&(r.value=r.inital),this._updateValues(r),e.noValidation||this.api.validate(!0)}},{key:"_updateMethods",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=this,n={};R(r._methods).forEach((function(r){t[r]!==e[r]&&(n[r]=e[r])})),Object.assign(r._methods,r.wrapFns(ge(r.elements,n),{noStrictArrayResult:!0}))}},{key:"_setRootRef",value:function(e){this._root=e}},{key:"_setFormRef",value:function(e){this._form=e}},{key:"_updateValues",value:function(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=e.state,a=e.value,i=e.inital,o=e.extData,s=e.noValidation,u=e.touched,c=this;n&&n!==r.state&&c.api.setState(n),i&&i!==r.inital&&c.api.setValue(i,{replace:!0,inital:!0,noValidation:s}),a&&a!==r.value&&c.api.setValue(a,{replace:!0,noValidation:s}),o&&o!==r.extData&&R(o).forEach((function(e){return c.api.set(e,o[e],{replace:!0})})),j(u)||null===u||u===r.touched||c.api.reset({status:"untouched",value:u?0:void 0}),t.params.forEach((function(t){return!j(e[t])&&e[t]!==r[t]&&c.api.switch("/@/params/"+t,e[t])}))}},{key:"_handleStateUpdate",value:function(e){this._savedState==e||(this._savedState=e,this._methods.onStateChange&&this._methods.onStateChange(this._extendEvent(new Ct("stateChanged"))),e[be].current!==this._savedValue&&(this._savedValue=e[be].current,this._methods.onChange&&this._methods.onChange(this._extendEvent(new Ct("valueChanged")))),this._root&&this._root.setState({branch:e}))}},{key:"_extendEvent",value:function(e){return e.value=this.api.getValue(),e.state=this.api.getState(),e.fform=this,e}},{key:"_submit",value:function(e){var t,r=this,n=r.api.get("/@active");n&&(r.getRef(n+"@")._updateCachedValue(!0),r.api.execute());var a=function(e){return r.api.set([],e,S()({},be,["status","pending"]))},i=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];j(e)||C(e).forEach((function(e){if(e){var t=e[be];r.api.setMessages(R(e).length?e:null,t)}}))};if(r.api.set([],0,(t={},S()(t,be,["status","untouched"]),S()(t,"execute",!0),S()(t,"macros","switch"),t)),r._methods.onSubmit){r.api.setMessages(null,{execute:!0});var o=r._methods.onSubmit(r._extendEvent(e));o&&o.then&&"function"==typeof o.then?(a(1),o.then((function(e){a(0),i(e)}),(function(e){a(0),i(e)}))):i(o)}}},{key:"shouldComponentUpdate",value:function(e){this.parent=e.parent;var t=!1,r=this._coreFromParams(e.core);return this.api===r?this._updateValues(e,this.props):(this._unsubscribe(),this.api=r,this._unsubscribe=this.api.addListener(this._handleStateUpdate.bind(this)),t=!0,this._initState(e)),this._updateMethods(e,this.props),t||!L(this.props,e,{skipKeys:["core","state","value","inital","extData","fieldCache","flatten","noValidate","parent","onSubmit","onChange","onStateChange"]})}},{key:"componentWillUnmount",value:function(){this._unsubscribe&&this._unsubscribe()}},{key:"getRef",value:function(e){return this._root&&this._root.getRef(e)}},{key:"getDataObject",value:function(e){return z(e,be)}},{key:"getValue",value:function(e,t){return Le(e)?z(e,be,"value"):this.api.getValue({path:t.path})}},{key:"getBranch",value:function(e){return this.api.get(e)}},{key:"reset",value:function(e){e&&e.preventDefault(),this.api.reset()}},{key:"submit",value:function(){var e=new Ct("submit",{cancelable:!0});this._submit(e),e.defaultPrevented||this._form.submit()}},{key:"render",value:function(){var e=this.props,r=(e.core,e.state,e.value,e.inital,e.extData,e.fieldCache,e.touched,e.parent,e.onSubmit,e.onChange,e.onStateChange,e._$useTag),n=void 0===r?this.elements.widgets.Form||"form":r,a=p()(e,["core","state","value","inital","extData","fieldCache","touched","parent","onSubmit","onChange","onStateChange","_$useTag"]);return t.params.forEach((function(e){return delete a[e]})),R(a).forEach((function(e){return("_"===e[0]||"$"===e[0])&&delete a[e]})),Object(k.createElement)(n,l()({ref:this._setFormRef},a,{onSubmit:this._submit,onReset:this.reset}),Object(k.createElement)(Rt,{ref:this._setRootRef,id:(a.id||this.api.name)+"/#",name:this.api.name,pFForm:this,getPath:t._getPath,FFormApi:this.api}))}}],[{key:"_getPath",value:function(){return"#"}}]),t}(k.Component);S()(Vt,"params",["readonly","disabled","viewer","liveValidate","liveUpdate"]);var Nt=function(e){function t(e,r){var n;w()(this,t),n=d()(this,g()(t).call(this,e,r)),S()(y()(n),"$refs",{});var a=y()(n);return a._setRef=a._setRef.bind(a),n}return b()(t,e),x()(t,[{key:"getRef",value:function(e){return e.length?1!=e.length||this.$refs[e[0]].getRef?this.$refs[e[0]]&&this.$refs[e[0]].getRef&&this.$refs[e[0]].getRef(e.slice(1)):this.$refs[e[0]]:this}},{key:"_setRef",value:function(e){var t=this;return function(r){return t.$refs[e]=r}}},{key:"_refProcess",value:function(e,t){return!0===t?this._setRef(e):P(t)?this._setRef(t):N(t)?Ot(t,this._refProcess.bind(this,e)):t}}]),t}(k.Component),Rt=function(e){function t(e,r){var n;w()(this,t),n=d()(this,g()(t).call(this,e,r)),S()(y()(n),"_mappedData",{}),S()(y()(n),"_builderData",{}),S()(y()(n),"_rebuild",!0),S()(y()(n),"_cached",void 0),S()(y()(n),"_cachedTimeout",void 0),S()(y()(n),"_blocks",[]),S()(y()(n),"_widgets",void 0),S()(y()(n),"_components",void 0),S()(y()(n),"_maps",{}),S()(y()(n),"_$_parse",void 0),S()(y()(n),"_forceLiveUpd",!1),S()(y()(n),"_forceUpd",!1),S()(y()(n),"get",null),S()(y()(n),"_layout",void 0),S()(y()(n),"$branch",void 0),S()(y()(n),"schemaPart",void 0),S()(y()(n),"liveValidate",void 0),S()(y()(n),"liveUpdate",void 0),S()(y()(n),"path",void 0),S()(y()(n),"api",void 0),S()(y()(n),"pFForm",void 0),S()(y()(n),"stateApi",void 0),S()(y()(n),"wrapFns",Ht);var a=y()(n);return Object.defineProperty(a,"path",{get:function(){return a.props.getPath()}}),Object.defineProperty(a,"pFForm",{get:function(){return a.props.pFForm}}),Object.defineProperty(a,"liveValidate",{get:function(){return z(a.getData(),"params","liveValidate")}}),Object.defineProperty(a,"liveUpdate",{get:function(){return z(a.getData(),"params","liveUpdate")}}),Object.defineProperty(a,"value",{get:function(){return a.props.pFForm.getValue(a.state.branch,a)}}),Object.defineProperty(a,"stateApi",{get:function(){return a.props.pFForm.api}}),a.state={branch:a.pFForm.getBranch(a.path)},a.$branch=a.state.branch,a._updateStateApi(e.pFForm.api),n}return b()(t,e),x()(t,[{key:"getRef",value:function(e){return(e=yt(e)).length?1==e.length&&e[0]==be?this:"@"==e[0][0]?1==e.length?this.$refs[e[0]]:this.$refs[e[0]].getRef(e.slice(1)):this.$refs["@Main"]&&this.$refs["@Main"].getRef&&this.$refs["@Main"].getRef(e):this.$refs["@Main"]}},{key:"_resolver",value:function(e){try{return ge(this.pFForm.elements,e)}catch(e){throw this._addErrPath(e)}}},{key:"_addErrPath",value:function(e){return e.message=e.message+", in form '"+(this.pFForm.props.name||"")+"', path: '"+this.path+"'",e}},{key:"_updateStateApi",value:function(e){var t=this;if(e){if(!e.wrapper)return void(t.api=e);var r=e.wrapper({get path(){return t.path}});r._set=r.set,r._setValue=r.setValue,r.set=function(){return t._cacheValue(0>=arguments.length?void 0:arguments[0],1>=arguments.length?void 0:arguments[1],"set",2>=arguments.length?void 0:arguments[2])||r._set.apply(r,arguments)},r.setValue=function(){return t._cacheValue(((1>=arguments.length?void 0:arguments[1])||{}).path,0>=arguments.length?void 0:arguments[0],"setValue",1>=arguments.length?void 0:arguments[1])||r._setValue.apply(r,arguments)},t.api=r}}},{key:"_updateCachedValue",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.liveUpdate||this._forceLiveUpd,t=this;t._cachedTimeout=void 0,e&&t._cached&&(t.stateApi.setValue(t._cached.value,Ft({noValidation:!t.liveValidate&&!t._forceLiveUpd,path:t.path},t._cached.opts)),t._forceLiveUpd=!1,t._cached=void 0)}},{key:"_cacheValue",value:function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"set",n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},a=this,i=a.pFForm.props.fieldCache;(j(i)||!0===i)&&(i=A(this.liveUpdate)?this.liveUpdate:40);var o="setValue"===r&&(!e||"./"==e||"."==e);if(!o){var s=a.path;o=(e="#/"+_t(yt(e,a.path))+("setValue"===r?"/@/value":""))==s+"/@/value"||e=="#/@/current/"+s.slice(2)}if(o){var u=a.getData();if(a._cached={value:t,opts:n},i&&!a._forceUpd){a._cachedTimeout&&clearTimeout(a._cachedTimeout),a._cachedTimeout=setTimeout(a._updateCachedValue.bind(a),i);var c=a.getData(),l=a._mappedData;a.get=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=yt(t,a.path);return L(n,yt("./@value",a.path))?c.value:a.stateApi.get(n)},a._setMappedData(u,c,!0),a.get=null,l!=a._mappedData&&a.forceUpdate()}else a._forceUpd=!1,a._updateCachedValue();return!0}}},{key:"_build",value:function(){var e=this;e.state={branch:e.pFForm.getBranch(e.path)},e.$branch=e.state.branch;var t=e.api.getSchemaPart(e.path);if(e.schemaPart=t,(D(t.type)||j(t.type))&&!t._presets)throw new Error("schema._presets should be defined explicitly for multi type");e._layout=e.wrapFns(Jt(e.pFForm.elements,t._layout));var r=Jt(e.pFForm.elements,t._custom,t._presets||t.type),n=Qt(r=e.wrapFns(r)),a=n.$_maps,i=n.rest;e._maps=Xt(a),e._widgets={},e._components=i,e._blocks=R(i).filter((function(e){return i[e]})),e._blocks.forEach((function(t){var r=i[t],n=r._$widget,a=r.$_reactRef,o=(r._$skipKeys,p()(r,["_$widget","$_reactRef","_$skipKeys"]));if(!n)throw new Error('_$widget for "'+t+'" is empty');if(e._widgets[t]=n,a){var s=e._refProcess("@"+t,a);o[M(s)?"ref":"$_reactRef"]=s}e._mappedData[t]=o})),e._setMappedData(void 0,e.getData(),"build"),e._rebuild=!1}},{key:"_setMappedData",value:function(e,t,r){var n=this.getData;this.getData=function(){return t};var a=Yt(this._mappedData,e,t,"build"==r&&this._maps.build,r&&this._maps.data,this._maps.every);return this.getData=n,this._mappedData!=a&&(this._mappedData=a,!0)}},{key:"getData",value:function(e){var t=this.pFForm.getDataObject(e||z(this,"state","branch"),this);return this._cached?X(t,{value:this._cached.value},{replace:{value:this._cached.opts.replace}}):t}},{key:"shouldComponentUpdate",value:function(e,t){if(e.FFormApi!==this.props.FFormApi)return this._updateStateApi(e.FFormApi),this._rebuild=!0;if(!L(e,this.props))return this._rebuild=!0;if(j(t.branch))return!0;this.$branch=t.branch;var r=!1,n=this.getData(),a=this.getData(z(t,"branch"));if(z(a,"oneOf")!==z(n,"oneOf"))return this._rebuild=!0;try{r=(r=this._setMappedData(n,a,a!==n)||r)||z(a,"params","norender")!==z(n,"params","norender")}catch(e){throw this._addErrPath(e)}return r}},{key:"render",value:function(){return j(this.state.branch)?null:!z(this.getData(),"params","norender")&&(this._rebuild&&this._build(),this._widgets.Builder?Object(k.createElement)(this._widgets.Builder,this._mappedData.Builder,this._mappedData):null)}}]),t}(Nt),It=function(e){function t(){var e,r;w()(this,t);for(var n=arguments.length,a=Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=d()(this,(e=g()(t)).call.apply(e,[this].concat(a))),S()(y()(r),"refs",void 0),r}return b()(t,e),x()(t,[{key:"_cn",value:function(e){return e&&this.props._$cx&&e.className&&!P(e.className)?zt(this.props._$widget)?Ft({_$cx:this.props._$cx},e):Ft({},e,{className:this.props._$cx(e.className)}):e}},{key:"render",value:function(){var e=this._cn(this.props.getMappedData());return Object(k.createElement)(this.props._$widget,e,this.props.children||e.children)}}]),t}(k.Component),Tt=function(e){function t(e,r){var n;w()(this,t),n=d()(this,g()(t).call(this,e,r)),S()(y()(n),"_arrayStart",0),S()(y()(n),"_rebuild",!0),S()(y()(n),"_focusField",""),S()(y()(n),"_arrayKey2field",{}),S()(y()(n),"_widgets",{}),S()(y()(n),"_objectLayouts",[]),S()(y()(n),"_arrayLayouts",[]),S()(y()(n),"_setWidRef",void 0),S()(y()(n),"_maps",{}),S()(y()(n),"_mappedData",{}),S()(y()(n),"_$widget",void 0),S()(y()(n),"_isArray",!1);var a=y()(n);return a._setWidRef=function(e){return function(t){return a._widgets[e]=t}},n}return b()(t,e),x()(t,[{key:"_getMappedData",value:function(e){var t=this;return function(){return t._mappedData[e]}}},{key:"_build",value:function(e){function t(e,t){var n=Qt(t,["$_fields"]),a=n.$_maps,i=n.rest,s=i.$_fields,u=i.$_reactRef,c=(i._$skipKeys,i._$widget),f=void 0===c?l:c,d=i.className,g=p()(i,["$_fields","$_reactRef","_$skipKeys","_$widget","className"]);(s||!e)&&(d=X(h,d)),g.className=d;var m=r._refProcess("@widget_"+e,u)||{};M(m)&&(m={ref:m}),Object.assign(g,m);var y=Xt(a,e.toString());return v.forEach((function(e){var t;return(t=r._maps[e]).push.apply(t,o()(y[e]))})),r._mappedData[e]=g,{_$widget:f,$_fields:s}}var r=this,n=e.$branch,a=e.$layout,i=e._$cx,s=e.arrayStart,u=e.strictLayout,c=e.LayoutDefaultWidget,l=void 0===c?"div":c,f=e.LayoutDefaultClass,h=void 0===f?{}:f,d=(e.uniqKey,e.focusField),v=["build","data","every"];v.forEach((function(e){return r._maps[e]=[]})),r.$refs={},r._widgets={},r._mappedData={},r._objectLayouts=[];var g={keys:r._getObjectKeys(n),counter:1};r._focusField=d||g.keys[0]||"";var m=t(0,D(a)?{$_fields:a}:a),y=m._$widget,_=m.$_fields;if(r._$widget=y,_&&(r._objectLayouts=function e(n,a){var o=[];return R(a).forEach((function(s){var u=a[s];n.keys,n.counter;if(P(u)){var c=n.keys.indexOf(u);~c&&(o.push(r._makeFField(u)),n.keys.splice(c,1))}else if(F(u)){var l=n.counter++,f=t(l,u),p=f._$widget,h=f.$_fields;o.push(Object(k.createElement)(It,{_$widget:p,_$cx:i,key:"widget_"+l,ref:r._setWidRef(l),getMappedData:r._getMappedData(l)},h&&e(n,h)))}})),o}(g,_)),!0!==u&&g.keys.forEach((function(e){return r._objectLayouts.push(r._makeFField(e))})),r._arrayLayouts=[],r._arrayKey2field={},r.props.isArray)for(var b,$=s;$<r.props.length;$++)b=r._arrayIndex2key(n[$]),r._arrayLayouts.push(r._makeFField($.toString(),b)),b&&(r._arrayKey2field[b]=$);r._mappedData=r._updateMappedData(void 0,r._getData(n),"build"),r._rebuild=!1}},{key:"_makeFField",value:function(e,t){return Object(k.createElement)(Rt,{ref:this._setRef(t||e),key:t||e,pFForm:this.props.$FField.pFForm,FFormApi:this.props.FFormApi,id:this.props.id?this.props.id+"/"+(t||e):void 0,name:this.props.name?this.props.name+"["+(this.props.isArray?"${idx}_"+(t||e):e)+"]":void 0,getPath:t?this._getArrayPath.bind(this,t):this._getObjectPath.bind(this,e)})}},{key:"_arrayIndex2key",value:function(e){return this.props.uniqKey?z(this._getData(e),bt(this.props.uniqKey)):void 0}},{key:"_getObjectKeys",value:function(e){var t=[];if(this.props.isArray)for(var r=0;r<this.props.arrayStart;r++)t.push(r.toString());else t=je(e);return t}},{key:"_getObjectPath",value:function(e){return this.props.$FField.path+"/"+e}},{key:"_getArrayPath",value:function(e){return this.props.$FField.path+"/"+this._arrayKey2field[e]}},{key:"_getArrayField",value:function(e){return this._arrayLayouts[e-this.props.arrayStart]}},{key:"_reorderArrayLayout",value:function(e,t,r){for(var n,a=[],i=!1,o=r.arrayStart;o<r.length;o++){if(n=this._arrayIndex2key(t[o]),j(n))throw new Error("no unique key provided for array item");this.$refs[n]&&this.$refs[n].setState({branch:t[o]});var s=this._arrayKey2field[n];this._arrayKey2field[n]!==o&&(this._arrayKey2field[n]=o,i=!0),a.push(j(s)?this._makeFField(o.toString(),n):this._getArrayField(s))}return this._arrayLayouts.length!==a.length&&(i=!0),i&&(this._arrayLayouts=a),i}},{key:"_updateMappedData",value:function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:e!==t,n=this;return Yt(n._mappedData,e,t,"build"==r&&n._maps.build,r&&n._maps.data,n._maps.every)}},{key:"_getData",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.props.$branch;return this.props.$FField.getData(e)}},{key:"shouldComponentUpdate",value:function(e){var t=this;if(["FFormApi","oneOf","branchKeys"].some(er(t.props,e)))return t._rebuild=!0;var r=!L(e,t.props,{skipKeys:["$branch"]}),n=t.props.$branch,a=e.$branch;if(n!=a){var i;try{i=t._updateMappedData(t._getData(n),t._getData(a))}catch(e){throw t.props.$FField._addErrPath(e)}if(i!=t._mappedData){var o=t._mappedData;t._mappedData=i,R(i).forEach((function(e){return t._widgets[e]&&i[e]!=o[e]&&t._widgets[e].forceUpdate()}))}t._getObjectKeys(a).forEach((function(e){return a[e]!==n[e]&&t.$refs[e]&&t.$refs[e].setState({branch:a[e]})})),t.props.isArray&&(r=t._reorderArrayLayout(n,a,e)||r)}return r}},{key:"getRef",value:function(e){if(!this.props.isArray||isNaN(parseInt(e[0]))||e[0]<this.props.arrayStart)return u()(g()(t.prototype),"getRef",this).call(this,e);var r=this._getArrayField(e[0]);return r&&this.$refs[r.key].getRef(e.slice(1))}},{key:"render",value:function(){var e=this.props;if(e.viewer){var t=e.$_viewerProps||{},r=t._$widget,n=void 0===r?Ut:r,a=p()(t,["_$widget"]);return a.inputProps=e,a.value=e.$FField.value,Object(k.createElement)(n,a)}return Le(e.$branch)?null:(this._rebuild&&this._build(e),Object(k.createElement)(It,{_$widget:this._$widget,_$cx:e._$cx,key:"widget_0",ref:this._setWidRef(0),getMappedData:this._getMappedData(0)},this._objectLayouts,this._arrayLayouts))}}]),t}(Nt),Bt=function(e){function t(e,r){var n;return w()(this,t),n=d()(this,g()(t).call(this,e,r)),S()(y()(n),"_children",void 0),S()(y()(n),"_reactRef",void 0),S()(y()(n),"_mapped",void 0),n}return b()(t,e),x()(t,[{key:"_newWidget",value:function(e,r){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},a=r._$widget,i=void 0===a?t:a,o=r.className,s=r.$_reactRef,u=p()(r,["_$widget","className","$_reactRef"]),c=this,f=c._refProcess(e,s)||{};return M(f)&&(f={ref:f}),M(n)?f.ref=n:Object.assign(f,n),Object(k.createElement)(i,l()({key:e,className:!zt(i)&&this.props._$cx?this.props._$cx(o):o,_$cx:zt(i)?this.props._$cx:void 0},u,f))}},{key:"_mapChildren",value:function(e,t){var r=this;if(e!==r._children||r._reactRef!==t){var n=r._children&&C(r._children),a=e&&C(e);r._mapped=a&&a.map((function(e,i){return!F(e)||e.$$typeof?e:r._mapped&&z(r._mapped,i)&&n[i]===a[i]&&z(r._reactRef,i)===z(t,i)?r._mapped[i]:r._newWidget(i,e,z(t,i))})),r._children=e,r._reactRef=t}}},{key:"setRef2rest",value:function(e,t){return t?(R(t).filter((function(e){return isNaN(+e)})).forEach((function(r){return e[r]=t[r]})),e):e}},{key:"setElements2rest",value:function(e,t){if(!t)return e;var r={"^":t};return R(e).forEach((function(t){return $t(e[t])&&(e[t]=z(r,bt(e[t])))})),e}},{key:"render",value:function(){if(this.props.norender)return null;var e=this.props,t=e._$useTag,r=void 0===t?"div":t,n=e._$cx,a=e._$elements,i=e.className,o=e.$_reactRef,s=e.children,u=p()(e,["_$useTag","_$cx","_$elements","className","$_reactRef","children"]);return this._mapChildren(s,o),this.setRef2rest(u,o),this.setElements2rest(u,a),!n&&a&&(n=a._$cx),Object(k.createElement)(r,l()({children:this._mapped,className:n?n(i):i},u))}}]),t}(Nt);function Lt(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length?arguments[2]:void 0;return function(e){return N(e)?0===R(e).length:null==e||""===e}(r)?e:D(r)?r.map(Lt.bind(null,e,t)).join(", "):(r=Zt(t,r).label||r,P(r)?r:JSON.stringify(r))}function Ut(e){var t=e._$useTag,r=void 0===t?"div":t,n=e.value,a=(e.inputProps,e._$cx),i=e.enumExten,o=void 0===i?{}:i,s=e.emptyMock,u=void 0===s?"(none)":s,c=p()(e,["_$useTag","value","inputProps","_$cx","enumExten","emptyMock"]);return c.className&&a&&(c.className=a(c.className)),Object(k.createElement)(r,c,Lt(u,o,n))}var Wt=function(e){function t(){return w()(this,t),d()(this,g()(t).apply(this,arguments))}return b()(t,e),x()(t,[{key:"render",value:function(){var e=this.props;if(e.viewer){var t=e.$_viewerProps||{},r=t._$widget,n=void 0===r?Ut:r,a=p()(t,["_$widget"]);return a.inputProps=e,a.value=e.value,Object(k.createElement)(n,a)}var i=e.value,o=e._$useTag,s=e.type,u=e.$_reactRef,c=e._$cx,l=e._$elements,f=(e.viewer,e.$_viewerProps,e.children),h=p()(e,["value","_$useTag","type","$_reactRef","_$cx","_$elements","viewer","$_viewerProps","children"]);return this._mapChildren(f,u),this.setRef2rest(h,u),this.setElements2rest(h,l),!c&&l&&(c=l._$cx),o?h.type=s:"textarea"==s||"select"==s?o=s:(o="input",h.type=s),h["checkbox"===s?"checked":"value"]=i,h.className&&c&&(h.className=c(h.className)),Object(k.createElement)(o,h,this._mapped)}}]),t}(Bt),qt=function(e){function t(){var e,r;w()(this,t);for(var n=arguments.length,a=Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=d()(this,(e=g()(t)).call.apply(e,[this].concat(a))),S()(y()(r),"_elem",void 0),r}return b()(t,e),x()(t,[{key:"componentDidMount",value:function(){var e,t=this;try{e=window&&window.getComputedStyle(this.props.$FField.$refs["@Main"])}catch(e){}e&&this._elem&&["fontSize","fontFamily","fontWeight","fontStyle","letterSpacing"].forEach((function(r){return t._elem.style[r]=e[r]}))}},{key:"render",value:function(){var e=this,r=e.props,n=(j(r.value)||null===r.value?"":r.value.toString())||r.placeholder||"";return Object(k.createElement)("div",{style:t.sizerStyle,ref:function(t){(e._elem=t)&&r.$FField.$refs["@Main"]&&r.$FField.$refs["@Main"].style&&(r.$FField.$refs["@Main"].style.width=Math.max(t.scrollWidth+(r.addWidth||45),r.minWidth||0)+"px")}},n)}}]),t}(k.Component);S()(qt,"sizerStyle",{position:"absolute",top:0,left:0,visibility:"hidden",height:0,overflow:"scroll",whiteSpace:"pre"});var Kt=Object(k.forwardRef)((function(e,t){var r=e.$tags,n=void 0===r?{}:r,a=e.$props,i=void 0===a?{}:a,o=(e.children,e.placeholder),s=e.role,u=void 0===s?"checkbox":s,c=e.type,l=void 0===c?"checkbox":c,f=e.className,h=void 0===f?"":f,d=p()(e,["$tags","$props","children","placeholder","role","type","className"]);return d.ref=t,d.type=l,d.key="input",d.role="input",i.input&&Object.assign(d,i.input),Object(k.createElement)(n.parent||"label",Object.assign({className:h,role:u},i.parent||{}),[Object(k.createElement)(n.input||"input",d),Object(k.createElement)(n.label||"span",Ft({key:"label",role:"label"},i.label||{}),o)])})),Gt=Object(k.forwardRef)((function(e,t){var r=e.checked,n=e.onChange,a=e.nullValue,i=void 0===a?"":a,o=(e.type,p()(e,["checked","onChange","nullValue","type"]));return Object(k.createElement)("input",l()({type:"checkbox",checked:!0===r},o,{onChange:function(e){n(!(r!==i)||!0!==r&&i,e)},ref:function(e){t&&t(e),e&&(e.indeterminate=r===i)}}))}));function Ht(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=Ht.bind(this);if(M(e)&&(e={$:e}),xt(e)){var n=e.norm?e:St(e,Ft({},t,{wrapFn:r})),a=At.bind(this,n);return a._map=n,a}if(N(e)){var i=D(e)?[]:{};//!~ignore.indexOf(key) &&
return R(e).forEach((function(n){return i[n]=de(n,e)?e[n]:r(e[n],t)})),i}return e}function zt(e){return e instanceof Bt}var Jt=U((function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length?arguments[2]:void 0;if(r){var n=r.split(":").map((function(e){return(e=e.trim())&&("^"==e[0]?e:"^/sets/"+e)})).join(":")+":"+(t.$_ref||"");t=X(t,{$_ref:n})}return ge(e,t)}));function Qt(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],r=e.$_maps,n=p()(e,["$_maps"]);r=Ft({},r);var a=D(e)?[]:{};return R(n).forEach((function(e){if(N(n[e])&&!~t.indexOf(e)){var i=Qt(n[e],t);a[e]=i.rest,R(i.$_maps).forEach((function(t){return r[e+"/"+t]=i.$_maps[t]}))}else a[e]=n[e]})),{$_maps:r,rest:a}}function Xt(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",r={data:[],every:[],build:[]};return R(e).forEach((function(n){var a=e[n];if(a){var i=pt(yt((t?t+"/":"")+n));if(M(a)||D(a))C(a).forEach((function(e){var t=e._map,n=t.update,a=void 0===n?"data":n,o=t.replace,s=p()(t,["update","replace"]);r[a].push(Ft({update:a,replace:void 0===o||o},s,{to:i,$:e}))}));else{P(a)&&(a={args:a});var o=a=Ft({},a,{},Et(a.args)),s=o.args,u=o.update,c=void 0===u?"data":u,l=o.replace,f=p()(o,["args","update","replace"]);r.data.push(Ft({args:s[0],update:c,replace:void 0===l||l,to:i,dataRequest:!0},f))}}})),r}//!map.$ && map.args[0] == 'selectorValue' && args[0]
function Yt(e,t,r){for(var n=function(e){return j(t)||!e.$||e.dataRequest&&e.args.some((function(e){return mt(e)?z(t,e)!==z(r,e):!!xt(e)&&n(e._map||e)}))},a={update:{},replace:{},api:{}},i=arguments.length,o=Array(3<i?i-3:0),s=3;s<i;s++)o[s-3]=arguments[s];return o.forEach((function(t){return t&&t.forEach((function(t){if("data"!=t.update||n(t)){var i=t.$?t.$():jt(r,t.args);R(t.to).forEach((function(e){return Ze(a,i,t.replace,t.to[e])})),t.replace||(e=et(e,a))}}))})),et(e,a)}var Zt=function(e,t){var r=M(e)?e(t):z(e,t);return r&&P(r)&&(r={label:r}),F(r)?r:{}};function er(e,t){return(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).equal?function(r){return e[r]===t[r]}:function(r){return e[r]!==t[r]}}function tr(){for(var e=this,t=arguments,r=[],n=function(n){var i=0>n||t.length<=n?void 0:t[n];if(!i)return"continue";var o=a()(i);"string"===o||"number"===o?r.push(e&&e[i]||i):D(i)?r.push(tr.apply(e,i)):"object"===o&&R(i).forEach((function(t){i[t]&&("number"==typeof i[t]||!0===i[t]?r.push(e&&e[t]||t):r.push(tr.call(e,i[t])))}))},i=0;i<arguments.length;i++)n(i);return r.join(" ")}var rr=(Pt={extend:function(e,t){var r=X.all(this,e,t);return this["_$cx.bind"]!==r["_$cx.bind"]&&(r=X(r,{_$cx:r["_$cx.bind"]?this[Mt].bind(r["_$cx.bind"]):this[Mt]})),r},widgets:{Section:Tt,Generic:Bt,Input:Wt,Autowidth:qt,Builder:function(e){var t=e.children,r=e.widgets,n=r.Title,a=r.Body,i=r.Main,o=r.Message,s=r.Wrapper,u=r.Autowidth;return t=V(t),s?Object(k.createElement)(s,t.Wrapper,n?Object(k.createElement)(n,t.Title):"",a?Object(k.createElement)(a,t.Body,i?Object(k.createElement)(i,t.Main):"",o?Object(k.createElement)(o,t.Message):"",u?Object(k.createElement)(u,t.Autowidth):""):""):""},Wrapper:function(e){var t=e._$useTag,r=void 0===t?"div":t,n=e._$cx,a=void 0===n?tr:n,i=e.className,o=e.wrapperClassName,s=void 0===o?{}:o,u=e.ArrayItemMenu,c=e.ArrayItemBody,f=e.arrayItem,h=p()(e,["_$useTag","_$cx","className","wrapperClassName","ArrayItemMenu","ArrayItemBody","arrayItem"]),d=c||{},v=d._$widget,g=void 0===v?"div":v,m=d.className,y=void 0===m?{}:m,_=p()(d,["_$widget","className"]),b=u||{},$=b._$widget,w=void 0===$?"div":$,O=b.className,x=void 0===O?{}:O,E=p()(b,["_$widget","className"]);f?y=[y,i]:s=[s,i];var S=Object(k.createElement)(r,l()({className:a?a(s):s},h));return f?Object(k.createElement)(g,l()({className:a?a(y):y},_),S,Object(k.createElement)(w,l()({className:a&&a(x)},E))):S},ItemMenu:function(e){var t=e._$useTag,r=void 0===t?"div":t,n=e._$buttonDefaults,a=void 0===n?{}:n,i=e._$cx,o=e.disabled,s=e.className,u=e.buttonsProps,c=void 0===u?{}:u,f=e.arrayItem,h=e.buttons,d=void 0===h?[]:h,v=e.onClick,g=p()(e,["_$useTag","_$buttonDefaults","_$cx","disabled","className","buttonsProps","arrayItem","buttons","onClick"]);return f?(d.forEach((function(e){return delete g[e]})),Object(k.createElement)(r,l()({className:i(s)},g),d.map((function(e){var t=Object.assign({},a,c[e]||{}),r=t._$widget,n=void 0===r?"button":r,s=t.type,u=void 0===s?"button":s,h=t.disabledCheck,d=void 0===h?"":h,g=t.className,m=void 0===g?{}:g,y=t.onClick,_=void 0===y?v:y,b=t.title,$=void 0===b?e:b,w=t.children,O=void 0===w?e:w,x=p()(t,["_$widget","type","disabledCheck","className","onClick","title","children"]);return x.dangerouslySetInnerHTML||(x.children=O),Object(k.createElement)(n,l()({key:e,type:u,title:$,className:i?i(m):m},x,{disabled:o||d&&!f[d],onClick:function(){return _(e)}}))})))):null},Checkbox:Kt,CheckboxNull:Gt},sets:{base:{Wrapper:{_$widget:"^/widgets/Wrapper",ArrayItemMenu:{$_ref:"^/parts/ArrayItemMenu"},_$cx:"^/_$cx",$_maps:{"className/fform-hidden":"@/params/hidden",arrayItem:"@/arrayItem"}},Builder:{_$widget:"^/widgets/Builder",_$cx:"^/_$cx",$_maps:{widgets:{$:"^/fn/getProp",args:["_widgets"],update:"build"}}},Body:{_$widget:"^/widgets/Generic",_$cx:"^/_$cx",className:"fform-body"},Message:{$_ref:"^/parts/Message"}},simple:{$_ref:"^/sets/base",Main:{_$widget:"^/widgets/Input",_$cx:"^/_$cx",$_reactRef:{ref:!0},$_viewerProps:{_$cx:"^/_$cx",emptyMock:"(no value)",className:{"fform-viewer":!0}},onChange:{$:"^/fn/eventValue|setValue"},onBlur:{$:"^/fn/blur"},onFocus:{$:"^/fn/focus"},$_maps:{value:{$:"^/fn/iif",args:[{$:"^/fn/equal",args:["@value",null]},"","@value"]},viewer:"@/params/viewer",autoFocus:"@/params/autofocus",readOnly:"@/params/readonly",disabled:"@/params/disabled",placeholder:"@/fData/placeholder",required:"@/fData/required",label:"@/fData/title","$_viewerProps/enumExten":"@/fData/enumExten",id:{$:"^/fn/getProp",args:"props/id",update:"build"},name:{$:"^/fn/getProp",args:"props/name",update:"build"},"className/fform-input-priority":{$:"^/fn/setInputPriority",args:"@/status/priority"}}},Title:{_$widget:"^/widgets/Generic",_$cx:"^/_$cx",_$useTag:"label",children:[],$_maps:{"className/fform-required":"@/fData/required","children/0":"@/fData/title","className/fform-hidden":{$:"^/fn/not",args:"@/fData/title"},htmlFor:{$:"^/fn/getProp",args:["id"],update:"build"},"className/fform-title-viewer":"@/params/viewer"}}},string:{$_ref:"^/sets/simple",Main:{type:"text"}},textarea:{$_ref:"^/sets/simple",Main:{type:"textarea",$_viewerProps:{className:{"fform-viewer":!1,"fform-viewer-inverted":!0}}},Title:{$_maps:{"className/fform-title-viewer-inverted":"@/params/viewer"}}},integer:{$_ref:"^/sets/simple",Main:{type:"number",onChange:{$:"^/fn/eventValue|parseNumber|setValue",args:["${0}",!0,0]}}},integerNull:{$_ref:"^/sets/integer",Main:{onChange:{args:{2:null}}}},number:{$_ref:"^/sets/integer",Main:{onChange:{args:{1:!1}},step:"any"}},numberNull:{$_ref:"^/sets/integerNull",Main:{onChange:{args:{1:!1,2:null}},step:"any"}},null:{$_ref:"^/sets/simple",Main:!1},boolean:{$_ref:"^/sets/simple",Main:{type:"checkbox",_$useTag:"^/widgets/Checkbox",onChange:{$:"^/fn/eventChecked|setValue|liveUpdate"}}},booleanNull:{$_ref:"^/sets/boolean",Main:{$tags:{input:"^/widgets/CheckboxNull",_$skipKeys:["input"]},onChange:{$:"^/fn/parseTristate|setValue|liveUpdate",args:["${0}"]}}},booleanLeft:{$_ref:"^/sets/boolean"},booleanNullLeft:{$_ref:"^/sets/booleanNull"},object:{$_ref:"^/sets/base",Main:{_$widget:"^/widgets/Section",_$cx:"^/_$cx",$_reactRef:!0,uniqKey:"params/uniqKey",LayoutDefaultClass:"layout",LayoutDefaultWidget:"div",$_viewerProps:{$_ref:"^/sets/simple/Main/$_viewerProps"},$_maps:{length:"@/length",oneOf:"@/oneOf",branchKeys:"@/branchKeys",strictLayout:"@/fData/strictLayout",isArray:{$:"^/fn/equal",args:["@/fData/type","array"]},$branch:{$:"^/fn/getProp",args:"$branch",update:"every"},arrayStart:{$:"^/fn/getArrayStart",args:[],update:"build"},$FField:{$:"^/fn/getProp",args:[],update:"build"},FFormApi:{$:"^/fn/getProp",args:"props/pFForm/api",update:"build"},id:{$:"^/fn/getProp",args:"props/id",update:"build"},name:{$:"^/fn/getProp",args:"props/name",update:"build"},$layout:{$:"^/fn/getProp",args:"_layout",update:"build"}}},Title:{_$widget:"^/widgets/Generic",_$cx:"^/_$cx",_$useTag:"legend",children:[{$_ref:"^/sets/simple/Title",_$useTag:"span"},{$_ref:"^/parts/ArrayAddButton"},{$_ref:"^/parts/ArrayDelButton"},{$_ref:"^/parts/ArrayEmpty"}]},Wrapper:{_$useTag:"fieldset"}},array:{$_ref:"^/sets/object"},select:{$_ref:"^/sets/simple",Main:{type:"select",children:[],onChange:{$:"^/fn/eventValue|setValue|liveUpdate"},$_maps:{children:{$:"^/fn/arrayOfEnum",args:["@/fData/enum","@/fData/enumExten",{_$widget:"option"}],replace:!1},label:!1}}},multiselect:{$_ref:"^/sets/select",Main:{multiple:!0,onChange:{$:"^/fn/eventMultiple|setValue|liveUpdate"}}},radio:{$_ref:"^/sets/base",Title:{$_ref:"^/sets/simple/Title"},Main:{$_ref:"^/parts/RadioSelector",$_reactRef:!0,$_viewerProps:{$_ref:"^/sets/simple/Main/$_viewerProps"},$_maps:{value:"@/value",viewer:"@/params/viewer",children:[{args:["@/fData/enum","@/fData/enumExten",{onChange:{args:["${0}"]}},!0]},{args:["@/fData/enum","@/value"]},{args:{0:"@/fData/enum"}}]}}},checkboxes:{$_ref:"^/sets/radio",Main:{$_maps:{children:{0:{args:{2:{type:"checkbox",onChange:{$:"^/fn/eventCheckboxes|setValue|liveUpdate"}},5:"[]"}}}}}},$radioNull:{Main:{$_maps:{children:{0:{args:{3:{onClick:"^/fn/eventValue|radioClear|liveUpdate"}}}}}}},$radioEmpty:{Main:{$_maps:{children:{0:{args:{3:{onClick:{$:"^/fn/eventValue|radioClear|liveUpdate",args:["${0}",""]}}}}}}}},$autowidth:{Autowidth:{$_ref:"^/parts/Autowidth"},Wrapper:{className:{"fform-shrink":!0}}},$noArrayControls:{Wrapper:{$_maps:{arrayItem:!1}}},$noArrayButtons:{Title:{$_ref:"^/sets/simple/Title"}},$inlineItems:{Main:{className:{"fform-inline":!0}}},$inlineTitle:{Wrapper:{wrapperClassName:{"fform-inline":!0}}},$inlineLayout:{Main:{LayoutDefaultClass:{"fform-inline":!0}}},$inlineArrayControls:{Wrapper:{ArrayItemBody:{className:{"fform-inline":!0}}}},$arrayControls3but:{Wrapper:{ArrayItemMenu:{buttons:["up","down","del"]}}},$arrayControlsDelOnly:{Wrapper:{ArrayItemMenu:{buttons:["del"]}}},$noTitle:{Title:!1},$noMessage:{Message:!1},$shrink:{Wrapper:{className:{"fform-shrink":!0}}},$expand:{Wrapper:{className:{"fform-expand":!0}}},$password:{Main:{type:"password"}},$:"^/$",$C:"^/$C",$S:"^/$S"},fn:{api:function(e){for(var t,r=arguments.length,n=Array(1<r?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];(t=this.api)[e].apply(t,n)},format:function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return[r.reduce((function(e,t,r){return e.replace("{"+r+"}",t)}),e)]},iif:function(e,t,r){for(var n=arguments.length,a=Array(3<n?n-3:0),i=3;i<n;i++)a[i-3]=arguments[i];return[e?t:r].concat(a)},not:function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return[!e].concat(r)},equal:function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return[r.some((function(t){return e===t}))]},equalAll:function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return[r.every((function(t){return e===t}))]},or:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return[t.some(Boolean)]},and:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return[t.every(Boolean)]},getArrayStart:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return[Ce(this.schemaPart)].concat(t)},getProp:function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return[z(this,yt(e))].concat(r)},eventValue:function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return[e.target.value].concat(r)},eventChecked:function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return[e.target.checked].concat(r)},parseTristate:function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return[""===e?null:e].concat(r)},eventMultiple:function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return[Array.from(e.target.options).filter((function(e){return e.selected})).map((function(e){return e.value}))].concat(r)},parseNumber:function(e){for(var t=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length,a=Array(3<n?n-3:0),i=3;i<n;i++)a[i-3]=arguments[i];return[""===e?r:(t?parseInt:parseFloat)(e)].concat(a)},setValue:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.api.setValue(e,t);for(var r=arguments.length,n=Array(2<r?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];return n},focus:function(){this.api.set("/@/active",this.path,{noValidation:!0});for(var e=arguments.length,t=Array(1<e?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return t},blur:function(){var e;this.api.set("./",-1,(e={},S()(e,be,["status","untouched"]),S()(e,"noValidation",!0),S()(e,"macros","setStatus"),e)),this.api.set("/@/active",void 0,{noValidation:!0}),this._updateCachedValue(!0),this.liveValidate||this.api.validate("./");for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return r},liveUpdate:function(){this._forceLiveUpd=!0;for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t},forceUpdate:function(){this._forceUpd=!0;for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t},eventCheckboxes:function(e){var t=(this.getData().value||[]).slice(),r=e.target.value,n=t.indexOf(r),a=t.slice();-1==n?a.push(r):a.splice(n,1);var i=this.getData().fData.enum;a.sort((function(e,t){return i.indexOf(e)>i.indexOf(t)}));for(var o=arguments.length,s=Array(1<o?o-1:0),u=1;u<o;u++)s[u-1]=arguments[u];return[a].concat(s)},radioClear:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;this.api.getValue()===e&&this.api.setValue(t);for(var r=arguments.length,n=Array(2<r?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];return n},messages:function(e){var t=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=r.className,a=void 0===n?{}:n,i=p()(r,["className"]);return[R(e||[]).map((function(r){var n=e[r],o=n.norender,s=n.texts,u=n.className,c=void 0===u?{}:u,l=p()(n,["norender","texts","className"]),f=[];return R(s).forEach((function(e){return C(s[e]).forEach((function(e){$t(e)&&(e=t._resolver(e)),P(e)&&P(f[f.length-1])?f.push({_$widget:"br"},e):f.push(e)}))})),o||!f.length?null:Ft({children:f},i,{className:Ft(S()({},"fform-message-priority-"+r,!0),a,{},c)},l)}))]},arrayOfEnum:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},a=3<arguments.length?arguments[3]:void 0;return[t.map((function(t){var i=Zt(r,t);return Ft({key:t,children:[i.label||t],name:a&&e.name+(!0===a?"":a)},i,{},n,{value:t})}))]},enumInputs:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};return delete(n=Ft({},n))._$skipKeys,[t.map((function(t){var i=Zt(r,t),o=i.label,s=p()(i,["label"]);return Ft({key:t,name:name&&e.props.name+(!0===a.name?"":a.name)},X(n,s),{placeholder:o||t,value:t})}))]},enumInputProps:function(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t={},r=arguments.length,n=Array(1<r?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];for(var i=0;i<n.length;i+=2)t[n[i]]=n[i+1];return[e.map((function(){return t}))]},enumInputValue:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length?arguments[1]:void 0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"checked";return t=C(t),[e.map((function(e){return S()({},r,!!~t.indexOf(e))}))]},setInputPriority:function(e){return"number"==typeof e?["fform-input-priority-"+e]:[!1]}},parts:{Message:{_$widget:"^/widgets/Generic",_$cx:"^/_$cx",children:[],$_maps:{children:{$:"^/fn/messages",args:["@/messages",{}]},"className/fform-hidden":{$:"^/fn/or",args:["@/params/viewer","!@/status/touched"]}}},RadioSelector:{_$widget:"^/widgets/Input",_$cx:"^/_$cx",_$useTag:"div",children:[],$_maps:{value:"@/selector/value",children:[{$:"^/fn/enumInputs",args:["@/selector/enum","@/selector/enumExten",{_$widget:"^/widgets/Checkbox",type:"radio",onChange:{$:"^/fn/eventValue|setValue|liveUpdate",args:["${0}",{path:"./@/selector/value"}]},onBlur:"^/sets/simple/Main/onBlur",onFocus:"^/sets/simple/Main/onFocus"},{name:!0}],replace:!1},{$:"^/fn/enumInputValue",args:["@/selector/enum","@/selector/value"],replace:!1},{$:"^/fn/enumInputProps",args:["@/selector/enum","readOnly","@/params/readonly","disabled","@/params/disabled"],replace:!1}]}},Autowidth:{_$widget:"^/widgets/Autowidth",addWidth:35,minWidth:60,$_maps:{value:"value",placeholder:"@/params/placeholder","className/fform-hidden":"@/params/hidden",$FField:{$:"^/fn/getProp",args:[],update:"build"}}},Button:{_$widget:"button",type:"button",$_maps:{"className/fform-hidden":"@/params/viewer",disabled:"@/params/disabled"}},Submit:{$_ref:"^/parts/Button",type:"submit",children:["Submit"]},Reset:{$_ref:"^/parts/Button",type:"reset",children:["Reset"],$_maps:{disabled:"@/status/pristine"}},ArrayAddButton:{$_ref:"^/parts/Button",children:["+"],onClick:{$:"^/fn/api",args:["arrayAdd","./",1]},$_maps:{"className/fform-hidden":{$:"^/fn/or",args:["@/params/viewer",{$:"^/fn/equal | ^/fn/not",args:["@/fData/type","array"]}]},disabled:{$:"^/fn/or",args:["!@/fData/canAdd","@params/disabled"]}}},ArrayDelButton:{$_ref:"^/parts/ArrayAddButton",children:["-"],onClick:{args:{2:-1}},$_maps:{disabled:{$:"^/fn/or",args:["!@/length","@params/disabled"]}}},ArrayEmpty:{children:"(array is empty)",_$widget:"span",$_maps:{"className/fform-hidden":{$:"^/fn/equal | ^/fn/not",args:["@/length",0]}}},ArrayItemMenu:{_$widget:"^/widgets/ItemMenu",_$cx:"^/_$cx",_$buttonDefaults:"^/parts/Button",buttons:["first","last","up","down","del"],onClick:{$:"^/fn/api",args:["arrayItemOps","./","${0}"]},buttonsProps:{first:{disabledCheck:"canUp"},last:{disabledCheck:"canDown"},up:{disabledCheck:"canUp"},down:{disabledCheck:"canDown"},del:{disabledCheck:"canDel"}},$_maps:{arrayItem:"@/arrayItem","className/fform-button-viewer":"@/params/viewer",disabled:"@params/disabled"}},Expander:{_$widget:"div",className:{"fform-expand":!0}}},_$cx:tr},S()(Pt,Mt,tr),S()(Pt,"$",(function(e,t){var r=pt(t.map((function(t){if(t=e._$shorts[t]||t,P(t)&&2==t.length){var r=e._$shorts[t[0]],n=e._$shorts[t[1]];return r&&n&&(t=D(n)?n.map((function(e){return r+e})):r+n),C(t).join(",")}return t}))),n={};return R(r).forEach((function(e){return H(n,r[e].pop(),r[e])})),n})),S()(Pt,"$C",(function(e,t){var r=(t=t.slice()).pop(),n="!"!==r[0];return n||(r=r.substr(1)),W(t,"className",r,n),e.$(e,t)})),S()(Pt,"$S",(function(e,t){t=t.slice();var r=[];return r.unshift(t.pop()),r.unshift(t.pop()),W(t,"style",r),e.$(e,t)})),S()(Pt,"_$shorts",{W:"Wrapper",M:"Main",B:"Body",T:"Title",MSG:"Message",m:"margin",p:"padding",t:"Top",b:"Bottom",l:"Left",r:"Right",x:["Left","Right"],y:["Top","Bottom"],fg:"flexGrow",fs:"flexShirnk",fd:"flexDirection",fw:"flexWrap",fb:"flexBasis",minW:"minWidth",minH:"minHeight",maxW:"maxWidth",maxH:"maxHeight",as:"alignSelf",ai:"alignItems",jc:"justifyContent"}),Pt)}])}));
//# sourceMappingURL=fform.min.js.map