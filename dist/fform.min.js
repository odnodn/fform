!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("React")):"function"==typeof define&&define.amd?define(["React"],t):"object"==typeof exports?exports.fform=t(require("React")):e.fform=t(e.React)}(window,(function(e){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=16)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=e=>void 0===e;t.isUndefined=n;t.isNumber=e=>"number"==typeof e;t.isInteger=e=>"number"==typeof e&&(Math.floor(e)===e||e>9007199254740992||e<-9007199254740992);t.isString=e=>"string"==typeof e;const a=Array.isArray;t.isArray=a;t.isObject=e=>s(e)&&!a(e);const i=e=>"function"==typeof e;t.isFunction=i;t.isPromise=e=>i(g(e,"then"));t.toArray=e=>a(e)?e:[e];function s(e){return e&&"object"==typeof e&&"[object RegExp]"!==Object.prototype.toString.call(e)&&"[object Date]"!==Object.prototype.toString.call(e)}t.deArray=(e,t)=>!t&&a(e)&&1==e.length?e[0]:e,t.isMergeable=s;const o=Object.keys;t.objKeys=o;const l=e=>o(e).concat(Object.getOwnPropertySymbols(e));t.objKeysNSymb=l;const c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e=>typeof e:e=>e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e;function u(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function p(e,...t){for(let r=0;r<t.length;r++)a(t[r])?e.push(...t[r]):e.push(t[r]);return e}function f(...e){let t=[];for(let r=0;r<e.length-1;r++)p(t,e[r]);const r=e[e.length-1];return t.length?h({},r,t):r}function d(e,...t){if(t.length>0)for(let r=0;r<t.length;r++){let i=a(t[r])?t[r]:[t[r]];for(let t=0;t<i.length;t++)if(!n(i[t])){try{if(!e.hasOwnProperty(i[t]))return!1}catch(e){return!1}e=e[i[t]]}}return!0}function h(e,t,...r){let i,o=e;if(r.length>0)for(let e=0;e<r.length;e++){let t=a(r[e])?r[e]:[r[e]];for(let e=0;e<t.length;e++)n(t[e])||(n(i)||(s(o[i])||(o[i]={}),o=o[i]),i=t[e])}return n(i)?t:(o[i]=t,e)}function g(e,...t){let r=e;for(let e=0;e<t.length;e++){let i=t[e];"function"==typeof i&&(i=i(r)),a(i)||(i=[i]);for(let e=0;e<i.length;e++){if(!s(r))return;n(i[e])||(r=r[i[e]])}}return r}function m(e,t,r={}){const n=r.noSymbol?o:l;let{SymbolDelete:c,del:p,diff:f,replace:d,arrays:h}=r,m=d;if("function"!=typeof m&&(m=s(d)?e=>g(d,e):()=>!1),!0===d||!0===m([],e,t))return{state:t,changes:e!==t?t:void 0};return i(h)||(h=void 0),function e(t,r,i=[]){const o={},l=a(r);s(t)||a(t=l?[]:{})&&(o.length=0);const d=a(t);if(!s(r))return{state:t};d&&l&&(h&&(r=h(t,r,i)),t.length!=r.length&&(o.length=r.length));let g=n(t);if(0==g.length&&!p){if(!d&&!l)return n(r).length?{state:r,changes:r}:{state:t};if(d&&l)return t.length==r.length&&0==r.length?{state:t}:n(r).length||r.length!==t.length?{state:r,changes:r}:{state:t}}let y=n(r);const b={},v=d?[]:{};f&&g.forEach(e=>{~y.indexOf(e)||(o[e]=c)}),y.forEach(n=>{if(p&&r[n]===c)t.hasOwnProperty(n)&&(o[n]=c);else{let a=i.concat(n);if(s(r[n])&&s(t[n])&&!0!==m(a,t[n],r[n])){if(t[n]!==r[n]){let i=e(t[n],r[n],a);i.changes&&(b[n]=i)}}else t.hasOwnProperty(n)&&u(t[n],r[n])||(o[n]=r[n])}});let _=n(b),O=n(o);return 0==O.length&&0==_.length?{state:t}:(Object.assign(v,t),O.forEach(e=>{p&&o[e]===c||f&&!r.hasOwnProperty(e)?delete v[e]:v[e]=o[e]}),_.forEach(e=>{v[e]=b[e].state,o[e]=b[e].changes}),{state:v,changes:o})}(e,t)}t.isEqual=function e(t,r,a={}){if(u(t,r))return!0;if("object"!==(n(t)?"undefined":c(t))||null===t||"object"!==(n(r)?"undefined":c(r))||null===r)return!1;const i=a.symbol?l:o,s=i(t),p=i(r);if(s.length!==p.length)return!1;const{skipKeys:f=[],deepKeys:d=[]}=a;for(let n=0;n<s.length;n++)if(!~f.indexOf(s[n]))if(a.deep||~d.indexOf(s[n])){if(!e(t[s[n]],r[s[n]],a))return!1}else if(!r.hasOwnProperty(s[n])||!u(t[s[n]],r[s[n]]))return!1;return!0},t.asNumber=function(e){if(""===e)return null;if(/\.$/.test(e))return e;if(/\.0$/.test(e))return e;const t=Number(e),r="number"==typeof t&&!Number.isNaN(t);return/\.\d*0$/.test(e)?e:r?t:e},t.memoize=function(e){return e.cache=new Map,function(...t){let r=[t.length].concat(t),n=e.cache,a=r.pop();for(let e=0;e<r.length;e++)n.has(r[e])||n.set(r[e],new Map),n=n.get(r[e]);return n.has(a)||n.set(a,e.apply(this,t)),n.get(a)}},t.push2array=p,t.moveArrayElems=function(e,t,r){let n=e.length;n&&(t=(t%n+n)%n,r=(r%n+n)%n);let a=e[t];for(let n=t;n<r;n++)e[n]=e[n+1];for(let n=t;n>r;n--)e[n]=e[n-1];return e[r]=a,e},t.makeSlice=f,t.hasIn=d,t.setIn=h,t.delIn=function e(t,r){if(!r.length)return t;const n="string"==typeof r[0]?r[0].split(","):[r[0]],a=r.slice(1);if(a.length)n.forEach(r=>{let n;s(t[r])&&(n=e(t[r],a)),n&&n!==t[r]&&(t=y(y(t,f(r,void 0)),f(r,n)))});else{for(let e=0;e<n.length;e++)if(t.hasOwnProperty(n[e])){t=Object.assign({},t);break}for(let e=0;e<n.length;e++)delete t[n[e]]}return t},t.getIn=g,t.getCreateIn=function(e,t,...r){return d(e,...r)||h(e,t,...r),g(e,...r)},t.mergeState=m;const y=(e,t,r={})=>m(e,t,r).state;t.merge=y,y.all=function(e,t,r={}){return 0==t.length?e:t.reduce((e,t)=>y(e,t,r),e)}},function(e,t){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t,r){"use strict";var n=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r};Object.defineProperty(t,"__esModule",{value:!0});const a=r(0),i=r(0),s=r(6),o=Symbol.for("FFormData");t.SymData=o;const l=Symbol.for("FFormDataMapTree"),c=Symbol.for("FFormDataMap");t.SymDataMap=c;const u=Symbol.for("FFormReset");t.SymReset=u;const p=Symbol.for("FFormClear");t.SymClear=p;const f=void 0;t.SymDelete=f;const d=["null","boolean","integer","number","string","array","object"];t.types=d,d.any=()=>!0,d.null=e=>null===e,d.boolean=e=>"boolean"==typeof e,d.number=i.isNumber,d.integer=i.isInteger,d.string=i.isString,d.array=i.isArray,d.object=i.isObject,d.empty={any:null,null:null,boolean:!1,number:0,integer:0,string:"",array:Object.freeze([]),object:Object.freeze({})},d.detect=e=>{for(let t=0;t<d.length;t++)if(d[d[t]](e))return d[t]};const h={};function g(e){let t=[];if(I(e))return t;if("array"==e[o].fData.type)for(let r=0;r<a.getIn(e,o,"length");r++)t.push(r.toString());else t=a.objKeys(e).filter(Boolean);return t}h.array=(e,t,r,s)=>{let l=s,{path:c,macros:u,value:p}=l,f=o,d=(l[f],n(l,["path","macros","value","symbol"==typeof f?f:f+""])),h=G([r.update,e],c,o,"length");if(!i.isNumber(h))return e;if(i.isArray(s.value)){let t=[],n={};for(let e=0;e<s.value.length;e++)t[h+e]=s.value[e],n[h+e]=a.getIn(s.replace,e);return t.length=h+s.value.length,N(e,r,t,n,c,s.setOneOf)}return(h+=s.value||1)<0&&(h=0),T(e,r,J(c,["length"],h,!1,d))},h.arrayItem=(e,t,r,n)=>{let s=n.path,c=n.op,u=n.value||0;const f=parseInt(s.pop());let d=f;const h=O(_(t,s,y(e))),g=G([r.update,e],s,o,"length")-1;"up"==c&&d--,"down"==c&&d++,"first"==c&&(d=h),"last"!=c&&"del"!=c||(d=g),"move"==c&&(d=u),"shift"==c&&(d+=u),d<h&&(d=h),d>g&&(d=g);let m={},b={},v={},j=[];j[0]=a.getIn(r.update,s),j[1]=a.getIn(r.update,o,"current",s),j[2]=a.getIn(r.replace,s),j[3]=a.getIn(r.replace,o,"current",s);for(let t=Math.min(f,d);t<=Math.max(f,d);t++)m[t]=a.getIn(e,s,t),b[t]=m[t][o].arrayItem,v[t]=a.getIn(e,o,"current",s,t),j.forEach(e=>i.isMergeable(e)&&!e.hasOwnProperty(t)&&(e[t]=p));m=a.moveArrayElems(m,f,d),v=a.moveArrayElems(v,f,d);const{maps2disable:$,maps2enable:S,clearBinded:w}=function e(t,r=[]){const n=a.getIn(t,l,o)||[],i=n.map(e=>a.merge(e,{emitter:r}));let s=n.length?{[l]:{[o]:[]}}:void 0;return a.objKeys(t).forEach(o=>{let l;t[o]&&(l=e(t[o],r.concat(o)),a.push2array(n,l.maps2disable),a.push2array(i,l.maps2enable),l.clearBinded&&(s||(s={}),s[o]=l.clearBinded))}),{maps2disable:n,maps2enable:i,clearBinded:s}}(m,s);return w&&(m=a.merge(m,w)),j.forEach(e=>{if(i.isMergeable(e)){a.moveArrayElems(e,f,d);for(let t=Math.min(f,d);t<=Math.max(f,d);t++)e[t]===p&&delete e[t]}}),a.objKeys(m).forEach(e=>{m[e]=a.merge(m[e],a.makeSlice(o,"arrayItem",b[e]),{replace:a.makeSlice(o,"arrayItem",!0)})}),e=a.merge(e,a.makeSlice(s,m),{replace:q(n.path.length+1)}),e=a.merge(e,a.makeSlice(o,"current",s,v),{replace:q(n.path.length+3)}),"del"==c&&(e=T(e,r,J(s,["length"],g))),e=B(e=K(e,r),r,$,!0),e=B(e,r,S)},h.switch=(e,t,r,n)=>{let i=n[o]||[];return oe(a.makeSlice(i,n.value),{arrayAsValue:!0}).forEach(i=>e=function e(t,r,n,i){const s=a.getIn(t,i.path);const l=g(s);if(i.value==u&&"status"==i[o][0]){let e=Object.assign({},i);e.value="untouched"==i[o][1]?I(s)?1:l.length:0,t=T(t,n,e)}else t=T(t,n,i);l.forEach(s=>t=e(t,r,n,a.merge(i,{path:i.path.concat(s)})));return t}(e,t,r,J(n.path,i,i.pop()))),e},h.setExtraStatus=(e,t,r,n)=>{const a=n[o]||[];let i=G([r.update,e],n.path,o,a),s=n.value>0;return!i==s&&(e=T(e,r,J(n.path,a,s)),e=h.setStatus(e,t,r,J(n.path,["status",a[a.length-1]],s?1:-1))),e},h.setStatus=(e,t,r,n)=>{const a=n[o]||[];if(a.length>2)return h.setExtraStatus(e,t,r,n);let i=a[1];if(!i)return e;if("valid"==i||"pristine"==i||"touched"==i)throw new Error('Setting "'+i+'" directly is not allowed');let s=G([r.update,e],n.path,o,a);const l=I(e,n.path);if("untouched"==i&&0==s&&!l)return e;let c=s+n.value;return l&&c>1&&(c=1),c<0&&(c=0),e=T(e,r,J(n.path,["status",i],c)),function(e){return 0==e.length||1==e.length&&"#"==e[0]}(n.path)||!s==!c||(e=h.setStatus(e,t,r,J(n.path.slice(0,-1),a,c>0?1:-1))),e},h.setCurrent=(e,t,r,n)=>N(e,r,n.value,n.replace,n.path,n.setOneOf),h.setOneOf=(e,t,r,s)=>{if(a.getIn(e,s.path,o,"oneOf")==s.value)return i.isUndefined(s.setValue)||(e=N(e,r,s.setValue,!1,s.path)),e;const{macros:l}=s,c=n(s,["macros"]);return c[o]=["oneOf"],i.isUndefined(c.setValue)&&(e=K(e,r),c.setValue=a.getIn(e,o,"current",s.path)),T(e,r,c)},t.branchKeys=g;const m=a.memoize((function(e){return{}}));function y(e){return t=>{let r=a.getIn(i.isFunction(e)?e():e,t,o);return{oneOf:a.getIn(r,"oneOf"),type:a.getIn(r,"fData","type")}}}function b(e,t){"function"==typeof e&&(e=e());const r={};let n=r;a.setIn(n,a.getIn(e,o,"oneOf"),o,"oneOf"),a.setIn(n,a.getIn(e,o,"fData","type"),o,"type");for(let r=0;r<t.length;r++)i.isUndefined(t[r])||""===t[r]||(n[t[r]]={},n=n[t[r]],e=a.getIn(e,t[r]),a.setIn(n,a.getIn(e,o,"oneOf"),o,"oneOf"),a.setIn(n,a.getIn(e,o,"fData","type"),o,"type"));const s=function(e,t){return i.isUndefined(t)?a.getIn(r,e,o):a.setIn(r,t,e,o)};return s._canSet=!0,s}t.oneOfFromState=y;const v=a.memoize((function(e){return{_compiled:!0,oneOf:e,_oneOfSelector:ue((function(){return se(this.path).pop()%e.length}),{noStrictArrayResult:!0})}}));function _(e,t,r,s){function o(e,r){let n=[];if(r.items){if(!i.isArray(r.items))return r.items;n=r.items}if(e<n.length)return n[e];if(!1!==r.additionalItems)return r.additionalItems&&!0!==r.additionalItems?r.additionalItems:v(n);throw new Error(g+t.join("/"))}function l(e,t){const r=se(t);if("#"==t[0])return a.getIn(e,r);throw new Error("Can only ref to #")}function c(t){if(t.$ref||t.allOf||t.oneOf)if(b.get(t))t=b.get(t);else{let r=t;if((t=u(e,t)).oneOf){let{oneOf:r}=t,i=n(t,["oneOf"]);t=r.map((t,r)=>a.merge.all(u(e,t),[i,{_oneOfIndex:r}],{array:"replace"}))}b.set(r,t)}return t}function u(e,t){if((t=function(e,t){for(;t.$ref;)t=l(e,t.$ref);return t}(e,t)).allOf){let r,{allOf:i}=t,s=n(t,["allOf"]);for(let t=0;t<i.length;t++)r=a.merge(r,u(e,i[t]),{array:"replace"});t=a.merge(r,s)}return t}function p(e,t,r){let n=0,s=d.detect(t);if(s){e=a.toArray(e);for(let t=0;t<e.length;t++){let r=e[t].type;if(!r||a.toArray(r).some(e=>e===s)){n=t;break}}e[n]._oneOfSelector&&(n=de.call({path:ie(r)},e[n]._oneOfSelector,t),i.isArray(n)&&(n=n[0]))}return{oneOf:n,type:s}}const f=i.isFunction(r)?r:void 0,h=i.isFunction(r)?void 0:r,g="Schema path not found: ";let y=e;const b=a.getCreateIn(m(e),new Map,"combinedSchemas");for(let e="#"==t[0]?1:0;e<t.length;e++){if(!y)throw new Error(g+t.join("/"));y=c(y);let r=t.slice(0,e),{oneOf:n,type:s}=f?f(r):p(y,a.getIn(h,r),r);if(i.isArray(y)&&(y=y[n||0]),i.isUndefined(s)&&(s=a.toArray(y.type||"null")[0]),"array"==s){if(isNaN(parseInt(t[e])))throw new Error(g+t.join("/"));y=o(t[e],y)}else{if(!y.properties||!y.properties[t[e]])throw new Error(g+t.join("/"));y=y.properties[t[e]]}}if(y=c(y),s)return y;if(i.isArray(y)){let{oneOf:e,type:r}=f?f(t):p(y,a.getIn(h,t),t);y=y[e||0]}return y}t.getSchemaPart=_;const O=a.memoize((function(e){return i.isArray(e.items)?!1===e.additionalItems?e.items.length:"object"==typeof e.additionalItems?e.items.length:0==e.items.length?0:e.items.length-1:0}));t.arrayStart=O;const j={invalid:0,dirty:0,untouched:1,pending:0,valid:!0,touched:!1,pristine:!0},$=a.memoize((function(e,t,r,n=e.default){const{_params:s={},_data:o={}}=e;let l=Object.assign({params:s},o);i.isObject(l.messages)||(l.messages={}),i.isUndefined(n)&&(n=d.empty[r||"any"]),l.oneOf=t,l.status=j,i.isObject(l.fData)||(l.fData={});const c=l.fData;if(c.type=r,c.required=e.required,c.title=e.title,c.placeholder=e._placeholder,c.additionalProperties=e.additionalProperties,c.strictLayout=e._strictLayout,e.enum&&(c.enum=e.enum),e._enumExten&&(c.enumExten=e._enumExten),i.isArray(e._enumExten)&&i.isArray(e.enum)){let e={};c.enumExten=c.enumExten.map(e=>i.isString(e)?{label:e}:e),c.enum.forEach((t,r)=>e[t]=c.enumExten[r]),c.enumExten=e}else if(e._enumExten&&!c.enum)if(i.isArray(c.enumExten)){let e={},t=[];c.enumExten.forEach(r=>{i.isString(r)?(e[r]={label:r},t.push(r)):i.isObject(r)&&(i.isUndefined(r.value)?i.isUndefined(r.label)||(e[r.label]=r,t.push(r.label)):(i.isUndefined(r.label)&&(r=Object.assign(Object.assign({},r),{label:r.value})),e[r.value]=r,t.push(r.value)))}),c.enumExten=e,c.enum=t}else c.enum=a.objKeys(c.enumExten).filter(e=>c.enumExten[e]);e._oneOfSelector&&(c.oneOfSelector=!0),A(e,r)?l.value=n:delete l.value;let u=1;if("array"==r?(l.length=a.getIn(n,"length")||0,!i.isUndefined(e.minItems)&&l.length<e.minItems&&(l.length=e.minItems),l.fData.canAdd=E(e,l.length),u=l.length):"object"==r&&(u=a.objKeys(e.properties||{}).length),1!=u&&(l.status=Object.assign(Object.assign({},l.status),{untouched:u})),e._data$){let t=[];a.objKeys(e._data$).forEach(r=>a.push2array(t,de.call({},e._data$[r],e))),l=a.merge(l,t)}return l}));function S(){return Date.now().toString(36)+Math.random().toString(36)}function w(e,t,r=[],s){const l={},u=[];let p,f=(t(r)||{}).oneOf;const d=a.toArray(_(e,r,t,!0));if(i.isUndefined(f)){const e=d[f||0]._oneOfSelector;if(e){let t=de.call({path:ie(r)},e,s);i.isArray(t)&&(t=t[0]),f=t}}let{schemaPart:h,oneOf:g,type:m}=P(d,s,f);if(i.isUndefined(h)||!i.isUndefined(f)&&f!=g){console.info('Passed value: "'+s+'" is not supported by schema.type in path "'+r.join("/")+'" and oneOfIndex "'+f+'". Reset value to default.\n');const e=P(d,s=d[f||0].default,f);h=e.schemaPart,g=e.oneOf,m=e.type}var y,b;if(a.push2array(u,(y=h._stateMaps||[],b=r,a.objKeys(y).map(e=>{let t=y[e],{from:r,to:a}=t,i=n(t,["from","to"]);return i=!i.$||ue(i),r&&a||(i=!1),{emitter:b,from:r,to:a,action:i}}))),l[c]={},l[o]=$(h,g,m,s),t(r,{oneOf:g,type:m}),l[o].hasOwnProperty("value"))p=l[o].value;else{if("array"==m){(p=[]).length=l[o].length;for(let n=0;n<p.length;n++){let{state:c,dataMap:f,defaultValues:d}=w(e,t,r.concat(n),a.getIn(i.isUndefined(s)?h.default:s,n));p[n]=d,a.push2array(u,f),c=a.merge(c,{[o]:{arrayItem:x(h,n,p.length)}},{replace:{[o]:{ArrayItem:!0}}}),c=a.merge(c,{[o]:{params:{uniqKey:S()}}}),l[n]=c}}else if("object"==m){p=i.isObject(h.default)?Object.assign({},h.default):{},s&&!1===h.additionalProperties&&(s=U(h,s),p=U(h,p)),i.isObject(s)&&Object.assign(p,s);let n=l[o].fData.required;n=i.isArray(n)&&n.length&&n,a.objKeys(h.properties||{}).forEach(c=>{let{state:f,dataMap:d,defaultValues:g}=w(e,t,r.concat(c),a.getIn(i.isUndefined(s)?h.default:s,c));p[c]=g,a.push2array(u,d),n&&~n.indexOf(c)&&(f=a.merge(f,{[o]:{fData:{required:!0}}})),l[c]=f})}s&&(p=a.merge(s,p,{replace:q(1)}))}return{state:l,defaultValues:p,dataMap:u}}function E(e,t){const r=O(e);e.minItems;return(!1!==e.additionalItems||t<r)&&t<(e.maxItems||1/0)}function x(e,t,r){let n={};const a=O(e);e.minItems;return n.canUp=a<t,n.canDown=a<=t&&t<r-1,n.canDel=t>=Math.min(a,r-1),n}function I(e,...t){return a.hasIn(e,...t,o,"value")}function A(e,t){return"array"!==t&&"object"!==t||a.getIn(e,"_simple")}function P(e,t,r){i.isArray(e)||(e=[e]);const n=e.map((e,t)=>t);r&&a.moveArrayElems(n,r,0);for(let r=0;r<n.length;r++){let a,s=n[r],o=e[s].type||d;i.isArray(o)||(o=[o]);let l=i.isUndefined(t)?(a=!0)&&e[s].default:t;for(let t=0;t<o.length;t++)if(d[o[t]](l)||i.isUndefined(l))return{schemaPart:e[s],oneOf:s,type:o[t]};if(a&&!i.isUndefined(e[s].default))throw new Error("Type of schema.default is not supported by schema.type")}return{}}function F(e,t,r,s,l=0){return a.toArray(s).map((function(e){return"object"==typeof e?e:{group:l,data:e}})).forEach(s=>{let{path:c}=s,u=n(s,["path"]);if(c)c=ae(c,r),e=F(e,t,c,u,l);else{let{group:e=l,data:s,priority:c=0}=u,p=n(u,["group","data","priority"]);const f=a.getCreateIn(t.update,{},r,o,"messages",c);Object.assign(f,p),i.isObject(f.texts)||(f.texts={}),i.isArray(f.texts[e])||(f.texts[e]=[]),s&&a.push2array(f.texts[e],s)}}),e}function k(e){let t,r=a.objKeys(e||{});for(let n=0;n<r.length;n++){let s=a.getIn(e,r[n],"texts")||{},o=a.objKeys(s);for(let e=0;e<o.length;e++)if(s[o[e]]&&s[o[e]].length){t=parseInt(r[n]);break}if(!i.isUndefined(t))break}return t}function D(e,t,r,n){return e=T(e,t,J(r,["status","validation","invalid"],0===n?1:0,!0,{macros:"setStatus"})),e=T(e,t,J(r,["status","priority"],n))}function M(e,t,r,n=[]){let i=k(a.getIn(e,n,o,"messages"));return I(e=D(e,t,n,i),n)||a.objKeys(r).forEach(a=>e=M(e,t,r[a],n.concat(a))),e}function C(e,t,r,n,s=[],l=!1){const{schema:c}=t.api;let u;try{u=_(c,s,y(e))}catch(e){}if(!u||I(e,s)){let n=a.getIn(e,o,"current",s);i.isUndefined(r)&&(r=a.getIn(e,o,"default",s));let c=l||n!==r?1:-1,p=s,f=["status","dirty"];u||(p=p.slice(),f.push(p.pop(),f.pop())),e=T(e,t,J(p,f,c,!1,{macros:"setStatus"}))}else{let o=a.objKeys(n||{});if("array"==u.type){~o.indexOf("length")||o.push("length");let t=g(a.getIn(e,s));o=o.filter(e=>isNaN(parseInt(e))||~t.indexOf(e))}l=l||!i.isMergeable(r),o.forEach(i=>e=C(e,t,a.getIn(r,i),a.getIn(n,i),s.concat(i),l))}return e}t.getUniqKey=S,t.isSelfManaged=I,t.isSchemaSelfManaged=A,t.rehydrateState=function(e,t){let{dataMap:r=[]}=w(t.api.schema,y(e));return B(e,t,r,null)},t.updateState=function(e){let{updates:t,state:r,api:n,forceValidation:l,opts:c,promises:u}=this,{getState:p,schema:f,UPDATABLE:d}=n;r||(r=p());let h=r;t.forEach(e=>r=T(r,d,e)),r=K(r,d);let g=a.getIn(h,o,"current");if(d.forceCheck&&(g=a.merge(g,d.forceCheck),d.forceCheck=void 0),h[o].inital!==r[o].inital){let e=a.mergeState(h[o].inital,r[o].inital,{diff:!0}).changes;r=C(r,d,r[o].inital,e)}let m,b=a.mergeState(g,a.getIn(r,o,"current"),{diff:!0}).changes;return b&&(r=C(r,d,r[o].inital,b)),r=K(r=function e(t,r,n,s=[]){return a.getIn(r.update,s,o,"status","pristine")?i.isMergeable(n)&&a.getIn(t,o,"current",s)!==n&&(a.setIn(r.update,n,o,"current",s),a.setIn(r.replace,!0,o,"current",s)):a.objKeys(a.getIn(r.update,s)).forEach(i=>e(t,r,a.getIn(n,i),s.concat(i))),t}(r,d,r[o].inital),d),c.noValidation?m=l:l?(oe(b).forEach(e=>{e.pop(),te(l,!0,e)}),m=l):m=i.isMergeable(b)?b:!i.isUndefined(b),m&&(r=function(e,t,r){let{api:n,force:i,opts:l,promises:c}=r;const{JSONValidator:u,schema:p,getState:f,UPDATABLE:d}=n,h=e[o].current,g=[],m=!0===i?h:i;if(!m||0==a.objKeys(m).length)return c.resolve(),c.vAsync.resolve(),e;if(u){e=function e(t,r,n=[]){const i=a.getIn(t,n,o,"fData","type");return i?("object"!=i&&"array"!=i||r&&a.objKeys(r).forEach(a=>e(t,r[a],n.concat(a))),V(d,{},!0,n,o,"messages","0","texts"),t):t}(e,m),u(h).forEach(t=>F(e,d,t[0],t[1]))}e=function e(t,r,n,i=[]){let s;try{s=_(p,i,y(t))}catch(e){return t}const o=I(t,i);o||n&&a.objKeys(n).forEach(a=>t=e(t,r[a],n[a],i.concat(a)));let l=a.getIn(s,"_validators");if(l){const e=W(d.api,ie(i));a.objKeys(l).forEach(n=>{let a=l[n];const s=[];e.updates=s;let c=de.call(e,a,r);c&&c.then&&"function"==typeof c.then?(c.validatedValue=r,c.path=i,c.selfManaged=o,g.push(c),t=T(t,d,J(i,["status","validation","pending"],1,!0,{macros:"setStatus"}))):t=F(t,d,i,c,1),s.length&&s.forEach(e=>t=T(t,d,e)),e.updates=null})}return t}(e,h,m);let b=d.update;return e=K(e,d),e=K(e=M(e,d,b),d),c.resolve(),g.length?Promise.all(g).then(e=>{let r=f(),i=n.UPDATABLE,l=r[o].current;for(let t=0;t<g.length;t++){let{validatedValue:n,path:s,selfManaged:o}=g[t];n==a.getIn(l,s)&&(r=T(r=F(r,i,s,e[t]||"",2),i,J(s,["status","validation","pending"],0,!1,{macros:"setStatus"})))}let u=i.update;r=K(r,i),r=K(r=M(r,i,u),i),t({type:s.anSetState,state:r,api:n}),c.vAsync.resolve()}).catch(e=>{let r=f(),i=n.UPDATABLE,l=r[o].current;for(let e=0;e<g.length;e++){let{validatedValue:t,path:n,selfManaged:s}=g[e];t==a.getIn(l,n)&&(r=T(r,i,J(n,["status","validation","pending"],0,!1,{macros:"setStatus"})))}let u=i.update;r=K(r,i),r=K(r=M(r,i,u),i),t({type:s.anSetState,state:r,api:n}),c.vAsync.reject(e)}):c.vAsync.resolve(),e}(r,e,{force:m,api:n,opts:c,promises:u})),e({type:s.anSetState,state:r,api:n}),u};const R=a.memoize((function(e){return w(e,b({},[]))}));function N(e,t,r,n,s=[],l){if((r===u||i.isUndefined(r))&&(r=a.getIn(e,o,"inital",s)),(r===p||i.isUndefined(r))&&(r=a.getIn(e,o,"default",s)),a.getIn(e,o,"current",s)===r&&!a.hasIn(t.update,o,"current",s))return e;const c=t.api.schema;let f=a.getIn(e,s);if(!f){if("length"==s[s.length-1]){const n=s.slice(0,-1);if("array"==a.getIn(e,n)[o].fData.type)return T(e,t,J(n,["length"],r))}return T(e,t,J([],["current"].concat(s),r,n))}if(f[o].fData.oneOfSelector){W(t.api,ie(s))}const h=f[o].fData.oneOfSelector,m=f[o].fData.type;if(!i.isUndefined(l)||h||!d[m||"any"](r)){const u=_(c,s,y(e),!0);let p=f[o].oneOf;if(h){const e=u[p]._oneOfSelector;l=de.call({path:ie(s)},e,r),i.isArray(l)&&(l=l[0])}const{schemaPart:g,oneOf:m,type:b}=P(u,r,i.isUndefined(l)?p:l);if(p!==m){if(g){a.getIn(e,o,"current",s);return A(g,b)||f[o].fData.type!==b||(r=a.merge(a.getIn(e,o,"current",s),r,{replace:n})),T(e,t,J(s,["oneOf"],m,!1,{type:b,setValue:r}))}console.warn('Type "'+d.detect(r)+'" not found in path ['+s.join("/")+"]")}}if(I(f))e=T(e,t,J(s,["value"],r,n));else if(i.isMergeable(r)){"array"!=m||i.isUndefined(r.length)||(e=T(e,t,J(s,["length"],r.length)),f=a.getIn(e,s));const l="object"==m&&!1===f[o].fData.additionalProperties;if(l&&(r=U(_(c,s,y(e)),r)),!0===n){let e=i.isArray(r)?[]:{};g(f).forEach(t=>e[t]=void 0),r=Object.assign(e,r)}if(a.objKeys(r).forEach(i=>e=N(e,t,r[i],!0===n||a.getIn(n,i),s.concat(i))),!0===n||l){e=K(e,t),f=a.getIn(e,s);let i=a.getIn(e,o,"current",s);g(f).forEach(e=>r[e]=i[e]),e=T(e,t,J([],["current"].concat(s),r,n))}}return e}function U(e,t){if("object"!==e.type||!1!==e.additionalProperties)return t;let r={},n=e.properties||{},i=a.objKeys(e.patternProperties||{}).map(e=>new RegExp(e));return a.objKeys(t).forEach(e=>{(n[e]||i.some(t=>e.match(t)))&&(r[e]=t[e])}),r}function V(e,t,r,...n){return oe(r).forEach(r=>{let i=r.pop();a.setIn(e,a.getIn(t,r),"update",...n,r),i&&a.setIn(e,i,"replace",...n,r)}),e}function K(e,t){return e=a.merge(e,t.update,{replace:t.replace}),t.update={},t.replace={},e}function T(e,t,r){if(!r)return e;const{update:s,replace:p,api:d}=t,{schema:g}=d;if(m=r,i.isUndefined(a.getIn(m,o))||!i.isArray(m[o]))return function(e,t,r){return Q(r,e).forEach(r=>{if(0===r.path.length&&"current"==r[o][0]&&(r.macros="setCurrent",r.path=r[o].slice(1),r[o]=[]),"value"==r[o][0])r.macros="setCurrent",r.path=r.path.concat(r[o].slice(1)),r[o]=[];else{if("status"==r[o][0])return void console.warn("Status should not be changed through StateApi. Update ignored.");"oneOf"==r[o][0]&&(r.macros="setOneOf")}e=T(e,t,r)}),e}(e,t,r);var m;if(r.macros){let n=h[r.macros];if(!n)throw new Error('"'+n+'" not found in macros');return n(e,g,t,r)}let{value:v,path:O,replace:j}=r;const $=r[o];if(i.isFunction(v)&&(v=v(z(e,t)(O,o,$))),0!=O.length||"inital"!=$[0]&&"default"!=$[0]){if(i.isObject(v)&&(0==$.length&&(a.hasIn(v,"value")||a.hasIn(v,"status")||a.hasIn(v,"length")||a.hasIn(v,"oneOf"))||1==$.length&&"status"==$[0]))return function(e,t,r){const{value:i,path:s,replace:l}=r,c=r[o]||[];if(0==c.length){const{value:r,status:o,length:u,oneOf:p}=i,f=n(i,["value","status","length","oneOf"]);["value","status","length","oneOf"].forEach(r=>{a.hasIn(i,r)&&(e=T(e,t,J(s,[r],i[r],a.getIn(l,r))))}),a.objKeys(f).length&&(e=T(e,t,J(s,c,f,l)))}else a.objKeys(i).forEach(r=>{e=T(e,t,J(s,c.concat(r),i[r],a.getIn(l,r)))});return e}(e,t,r);let c=a.getIn(e,O);if(!i.isObject(c))return e;if("value"==$[0]&&!a.hasIn(c,o,"value"))return h.setCurrent(e,g,t,{value:v,replace:j,path:O.concat($.slice(1))});if(v===G([t.update,e],O,o,$))return e;if(V(t,v,j,O,o,$),"value"==$[0])e=T(e,t,J([],a.push2array(["current"],O,$.slice(1)),v,j));else if("messages"==$[0]){let r=k(z(e,t)(O,o,"messages"));e=D(e,t,O,r)}else if("length"==$[0]){e=T(e,t,J([],a.push2array(["current"],O,$),v,j));let n=c[o].length;n=Math.max(n,0);let u=Math.max(v||0);const p=b(e,O),d=[],m=[];for(let s=n;s<u;s++){let n=O.concat(s);i.isUndefined(r.setOneOf)||p(n,{oneOf:r.setOneOf});let{state:l,dataMap:c=[],defaultValues:u}=w(g,p,n);const f=G([e,t.update],O,o,"status","untouched"),m={[o]:{params:{uniqKey:S()}}};f||a.setIn(m[o],{untouched:0,touched:!0},"status"),l=a.merge(l,m),e=T(e=a.merge(e,a.setIn({},l,n),{replace:a.setIn({},!0,n)}),t,J([],a.push2array(["current"],n),u,!0)),a.push2array(d,c),f&&(e=h.setStatus(e,g,t,J(O,["status","untouched"],1)))}for(let r=u;r<n;r++){let n=O.concat(r);a.push2array(m,a.getIn(e,n,l,o)||[]),["invalid","dirty","untouched","pending"].forEach(r=>{G([s,e],n,o,"status",r)&&(e=h.setStatus(e,g,t,J(O,["status",r],-1)))}),V(t,f,!0,n)}let I=_(g,O,y(e));a.setIn(s,E(I,u),O,o,"fData","canAdd");for(let e=Math.max(Math.min(n,u)-1,0);e<u;e++)V(t,x(I,e,u),!0,O,e,o,"arrayItem");e=B(e=K(e,t),t,m,!0),e=B(e,t,d)}else if("status"==$[0]){let r,n,a=$[1];"invalid"==a||"pending"==a?(n=G([s,e],O,o,"status","pending")?null:!G([s,e],O,o,"status","invalid"),r="valid"):"untouched"!=a&&"dirty"!=a||(n=!G([s,e],O,o,"status",a),r="untouched"==a?"touched":"pristine"),i.isUndefined(r)||(e=T(e,t,J(O,["status",r],n)))}else if("oneOf"==$[0]){const s=a.getIn(e,O);if((a.getIn(s,o,"oneOf")||0)!=a.getIn(t.update,O,o,"oneOf")||r.type&&r.type!=a.getIn(s,o,"fData","type")){te(t,u,"forceCheck",r.path),e=B(e=K(e,t),t,a.getIn(e,O,l,o)||[],!0);let{state:c,dataMap:p=[],defaultValues:f}=w(g,b(e,O),O,r.setValue);const d=s[o],{value:m,length:y,oneOf:v,fData:_}=d,j=n(d,["value","length","oneOf","fData"]);if(I(s)&&I(c)||delete j.status,c=a.merge(c,{[o]:j},{arrays:"replace"}),O.length){const r=O.slice(),n=r.pop();["invalid","dirty","pending"].forEach(n=>{let i=a.getIn(s,o,"status",n),l=a.getIn(c,o,"status",n);!i!=!l&&(e=h.setStatus(e,g,t,J(r,["status",n],l?1:-1)))});let l=a.getIn(e,r,o,"fData","required");(l=i.isArray(l)&&l.length&&l)&&~l.indexOf(n)&&(c=a.merge(c,{[o]:{fData:{required:!0}}}))}0==a.getIn(s,o,"status","untouched")&&(c=a.merge(c,{[o]:{status:{untouched:0}}})),e=B(e=T(e=a.merge(e,a.setIn({},c,O),{replace:a.setIn({},!0,O)}),t,J([],a.push2array(["current"],O),f,!0)),t,p),0==a.getIn(c,o,"status","untouched")&&(e=h.switch(e,g,t,J(O,["status","untouched"],0)))}}}else e=a.merge(e,a.makeSlice(o,$,v),{replace:a.makeSlice(o,$,j)});let A=a.getIn(e,O,l);for(let r=0;r<$.length&&A;r++)e=L(e,t,A[c],J(O,$.slice(0,r),a.setIn({},v,$.slice(r)),a.setIn({},j,$.slice(r)))),A=A[$[r]];return A&&(e=function r(n,s,o,l=[]){e=L(e,t,n[c],J(O,l,s,o));i.isMergeable(s)&&a.objKeys(n).forEach(t=>s.hasOwnProperty(t)&&(e=r(n[t],s[t],a.getIn(o,t),l.concat(t))));return e}(A,v,j,$)),e}function B(e,t,r,n=!1){const i=[];return r.forEach(r=>{const s=r.emitter;let u=!1;if(Q({path:("/"==r.from[0]?"":s.join("/"))+"/"+r.from,value:null},e).forEach(p=>{let f=p[o][0];("current"==f||"inital"==f||"default"==f&&p.path.length)&&(p=Object.assign(Object.assign({},p),{path:[],[o]:[f,...p.path,...p[o].slice(1)]})),Q({path:s.join("/")+"/"+r.to,value:null},e).forEach(f=>{let d=ie(ee(p.path,f.path.concat(o,...f[o])));a.getIn(e,p.path)&&a.setIn(t.update,n?void 0:r.action,p.path,l,p[o],c,d),n||(i.push({map:a.makeSlice(d,r.action),fromPath:p.path,keyPath:p[o]}),u||"."==ee(s,p.path)[0]||(u=!0))})}),u){const n=a.getIn(e,s);if(n){let e,i=a.getIn(n,l,o)||[];for(e=0;e<i.length&&(r.from!==i[e].from||r.to!==i[e].to);e++);(i=i.slice())[e]=r,V(t,i,!0,s,l,o)}}e=K(e,t)}),null!==n&&i.forEach(r=>{e=K(e=L(e,t,r.map,J(r.fromPath,r.keyPath,a.getIn(e,r.fromPath,o,r.keyPath))),t)}),e}function L(e,t,r,n){const{value:s,path:l,replace:c}=n,u=function(e){let t=ie(e.path);return t+(e[o]&&!~t.indexOf("@")?"/@/"+ie(e[o]):"")}(n);return a.objKeys(r||{}).forEach(n=>{if(!r[n])return;const a=r[n],o=ie(ae(n,l));let p=s;const f=[];if(i.isObject(a)){const r=W(t.api,o,u);r.get=z(e,t),r.updates=f,p=de.call(r,a,s),r.updates=null,r.get=null}f.length||i.isUndefined(p)&&i.isObject(a)||f.push({path:o,value:p,replace:i.isUndefined(a.replace)?c:a.replace}),f.forEach(r=>e=T(e,t,r))}),e}t.initState=function(e){let{state:t,dataMap:r=[],defaultValues:n}=R(e.api.schema);t=B(t=a.merge(t,a.setIn({},n,[o,"current"])),e,r);const i=a.getIn(t,o,"current");return t=T(t,e,J([],["inital"],i)),t=K(t=T(t,e,J([],["default"],i)),e)},t.setUPDATABLE=V,t.mergeUPD_PROC=K,t.updatePROC=T;const q=e=>t=>a.getIn(t,"length")===e;const W=a.memoize((function(e,t,r){const n=t.split("@")[0],s=r?r.split("@")[0]:n,l={from:r,to:t,path:n,stateApi:e,updates:[]};return l.api=e.wrapper(l),l.wrapOpts=e=>(l.updates&&i.isUndefined(e.setExecution)&&(e.setExecution=e=>e&&a.push2array(l.updates,e)),e),l.getData=()=>l.api.get(s,o),l}));function z(e,t){return(...r)=>a.hasIn(t.update,...r.map(e=>ae(e)))?a.merge(H(e,...r),H(t.update,...r),{replace:H(t.replace,...r)}):H(e,...r)}function G(e,...t){for(let r=0;r<e.length;r++)if(a.hasIn(e[r],...t))return a.getIn(e[r],...t)}function H(e,...t){return a.getIn(e,...t.map(e=>ae(e)))}t.getFromState=H;const J=(e,t,r,n,a={})=>Object.assign({path:e,[o]:t,value:r,replace:n},a);function Q(e,t){const{path:r,value:i,replace:s,base:l}=e,c=n(e,["path","value","replace","base"]),u=[];return ie(r).split(";").forEach(e=>{let r=ae(e,l),n=[],p=r.indexOf(o);~p&&(n=r.slice(p+1),r=r.slice(0,p)),r=Y(r,{"*":e=>g(a.getIn(t,e)).join(",")}),n=Y(n),a.objKeys(r).forEach(e=>a.objKeys(n).forEach(t=>u.push(J(r[e],n[t],i,s,c))))}),u}t.makeNUpdate=J,t.string2NUpdate=function(e,t=[],r={}){let a=[],i=(e=ae(e,t)).indexOf(o);~i&&(a=e.slice(i+1),e=e.slice(0,i));const{value:s,replace:l}=r,c=n(r,["value","replace"]);return J(e,a,s,l,c)},t.normalizeUpdate=Q;const X=function(e,t){if(i.isUndefined(t))return X._data[e];X._data[e]=t,X._data[t]=e};function Y(e,t={}){let r={"":[]};return e.forEach(e=>{let n={};"string"==typeof(e=t[e]||e)&&~e.indexOf(",")?a.objKeys(r).forEach(t=>e.split(",").forEach(e=>n[t&&t+","+e||e]=r[t].concat(e.trim()))):"function"==typeof e?a.objKeys(r).forEach(i=>{let s=e(r[i]);"string"==typeof s&&(s=se(s)),s=Y(s,t),a.objKeys(s).forEach(e=>n[i&&i+(e?","+e:"")||e]=r[i].concat(s[e]))}):a.objKeys(r).forEach(t=>a.push2array(r[t],e)),a.objKeys(n).length&&(r=n)}),r}X._data={"#":""},X.sym2str=e=>"symbol"!=typeof e||i.isUndefined(X(e))?e:X(e),X.str2sym=e=>"string"!=typeof e||i.isUndefined(X(e))?e:X(e),X("@",o),t.multiplePath=Y;const Z=e=>"number"==typeof e?e.toString():e;function ee(e,t){"#"===e[0]&&(e=e.slice(1)),"#"===t[0]&&(t=t.slice(1));const r=[];let n;for(n=0;n<e.length&&Z(e[n])===Z(t[n]);n++);for(let t=n;t<e.length;t++)r.push("..");return r.length||r.push("."),a.push2array(r,t.slice(n))}function te(e,t,...r){if(e===t)return e;const n=re(r);let a=e;for(let r=0;r<n.length-1;r++){if(a[n[r]]===t)return e;i.isObject(a[n[r]])||(a[n[r]]={}),a=a[n[r]]}return n.length?(a[n[n.length-1]]=t,e):t}function re(e){if(i.isArray(e)){const t=[];return a.push2array(t,...e.map(re)),t}return"string"==typeof e?se(e):[e]}function ne(e){return i.isMergeable(e)&&"nPath"===a.getIn(e,o)}function ae(e,t=[]){let r=function(e,t){const r=!t||"."!==e[0]&&".."!=e[0]?[]:t.slice();for(let t=0;t<e.length;t++){let n=e[t];".."===n?r.pop():""!==n&&"."!==n&&r.push(n)}return r}(re(e),t.length?re(t):[]);return r[o]="nPath",r}function ie(e){return i.isArray(e)?e.map(ie).join("/"):X.sym2str(e)}function se(e){e=(e=e.replace(X(o),"/"+X(o)+"/")).replace(/\/+/g,"/");const t=[];return e.split("/").forEach(e=>e&&(e=X.str2sym(e.trim()))&&t.push(e)),t}t.relativePath=ee,t.setIfNotDeeper=te,t.isNPath=ne,t.normalizePath=ae,t.path2string=ie,t.string2path=se;function oe(e,t={},r=[]){const n=t.symbol?a.objKeysNSymb:a.objKeys,s=t.arrayAsValue?i.isObject:i.isMergeable;if(!s(e))return[[e]];let o=[];return n(e).forEach(n=>{let a=r.concat(n);s(e[n])?oe(e[n],t,a).forEach(e=>o.push(e)):(a.push(e[n]),o.push(a))}),o.length?o:[a.push2array(r.slice(),{})]}t.isElemRef=e=>i.isString(e)&&"^/"==e.trim().substr(0,2),t.object2PathValues=oe;t.objMap=(e,t,r=[])=>a.objKeys(e).reduce((n,a)=>(n[a]=t(e[a],r.concat(a)),n),i.isArray(e)?[]:{});const le=e=>i.isObject(e)&&e.$||i.isFunction(e)&&e._map;function ce(e,t){let r=!1;return e=a.toArray(i.isUndefined(e)?[]:e).map(e=>{if(i.isString(e)){let t=0;if("@"==e[0]&&(t=1),"!@"==e.substr(0,2)&&(t=2),"!!@"==e.substr(0,3)&&(t=3),t){r=!0;let n=ae(e.substr(t));return 2==t&&(n[c]="not"),3==t&&(n[c]="doubleNot"),n}}if(le(e)){let n=ce(e.args,t);return n.dataRequest&&(r=!0),n=Object.assign(Object.assign({},e),n),t?t(n):n}return t&&i.isMergeable(e)?t(e):e}),{dataRequest:r,args:e,norm:!0}}function ue(e,t={}){const{wrapFn:r}=t,a=n(t,["wrapFn"]);let s=i.isObject(e)?Object.assign(Object.assign({},e),a):Object.assign({$:e},a);return s.args?Object.assign(s,ce(s.args,t.wrapFn)):s.args=["${...}"],s}function pe(e){if(i.isUndefined(e))return[];if(!i.isArray(e))throw new Error("array expected");return e}function fe(e,t){let r=a.getIn(e,t);switch(t[c]){case"not":return!r;case"doubleNot":return!!r;default:return r}}function de(e,...t){const r=e.dataRequest?this.getData():null,n=(e=>{const n=[];for(let a=0;a<e.length;a++){const s=e[a];ne(s)?n.push(fe(r,s)):le(s)?n.push(s._map?s(...t):de.call(this,s,...t)):"${...}"==s?n.push(...t):i.isString(s)&&~s.search(/^\${\d+}$/)?n.push(t[s.substring(2,s.length-1)]):n.push(s)}return n})(e.args),s=a.toArray(e.$).reduce((t,r)=>i.isFunction(r)?(e.noStrictArrayResult?a.toArray:pe)(r.apply(this,t)):t,n);return e.noStrictArrayResult?a.deArray(s):pe(s)[0]}t.isMapFn=le,t.normalizeArgs=ce,t.normalizeFn=ue,t.processProp=fe,t.processFn=de},function(t,r){t.exports=e},function(e,t,r){var n=r(21);e.exports=function(e,t){if(null==e)return{};var r,a,i=n(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)r=s[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}},function(e,t,r){"use strict";var n=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r};Object.defineProperty(t,"__esModule",{value:!0});const a=r(0),i=r(3);class s{constructor(){this.done=!1,this.vals=[{},{}];let e=this,t=new Promise((t,r)=>{e.setFunction(0,t),e.setFunction(1,r)});return t.resolve=e.execFunction.bind(e,0),t.reject=e.execFunction.bind(e,1),t.isPending=()=>!e.done,t.isResolved=()=>e.vals[0].done,t.isRejected=()=>e.vals[1].done,t.result=()=>e.done&&e.vals[e.vals[0].done?0:1].rest,t}setFunction(e,t){let r=this.vals[e];r.func=t,r.done&&t(...r.rest)}execFunction(e,...t){if(!this.done){this.done=!0;let r=this.vals[e];r.rest=t,r.done=!0,this.vals[1-e].done=!1,r.func&&r.func(...t)}}}const o=new WeakMap;t.fformCores=function(e){return o[e]};class l{constructor(e){if(this._listeners=[],(e.getState?1:0)+(e.setState?1:0)==1&&new Error('Expected both "getState" and "setState" or none but not only one of them.'),e.store&&!e.name)throw new Error('Expected "name" to be passed together with "store".');this.props=e,this.schema=h(e.schema,e.elements),this.name=e.name||"",this.dispatch=e.store?e.store.dispatch:this._dispatch.bind(this),this._reducer=d(),e.JSONValidator&&(this.JSONValidator=e.JSONValidator(this.schema)),this._getState=this._getState.bind(this),this._setState=this._setState.bind(this),e.setState&&e.store&&(this._unsubscribe=this.props.store.subscribe(this._handleChange.bind(this))),e.name&&(o[e.name]=this),this.UPDATABLE={update:{},replace:{},api:this}}_dispatch(e){return"function"==typeof e?e(this._dispatch.bind(this)):(this._setState(this._reducer(this._getState()||{},e)),e)}_setState(e){e!==this._getState()&&(this.props.setState?this.props.setState(e):this._currentState=e,this.props.store&&this._setStoreState(e),this._listeners.forEach(t=>t(e)))}_getState(){return this.props.store?this._getStoreState():this.props.getState?this.props.getState():this._currentState}_setStoreState(e){return this.props.store.dispatch({type:c,state:e,api:this})}_getStoreState(){return this.props.name&&this.props.store.getState()[f()][this.props.name]}_handleChange(){let e=this._getStoreState();e!==(this.props.getState?this.props.getState():this._currentState)&&this._setState(e)}addListener(e){return this._listeners.push(e),this.props.store&&!this._unsubscribe&&(this._unsubscribe=this.props.store.subscribe(this._handleChange.bind(this))),this.delListener.bind(this,e)}delListener(e){const t=this;if(a.isUndefined(e))t._listeners=[];else{let r=t._listeners.indexOf(e);~r&&t._listeners.splice(r,1)}t._listeners.length||!t._unsubscribe||t.props.setState||(t._unsubscribe(),delete t._unsubscribe)}}t.FFormStateAPI=class extends l{constructor(e){super(e),this._noExec=0,this._updates=[],this._validation=null,this.getState=this._getState,this.noExec=()=>{this._noExec++},this.execute=(e={})=>this._setExecution(null,a.merge(e,{execute:!0})),this.setState=(e,t={})=>{return this._updates=[],this._newState=e,this._setExecution(null,t)},this.getActive=()=>this.get(i.SymData,"active"),this.validate=(e=!0,t={})=>{const r=this;return"boolean"==typeof e?r._validation=e:i.normalizeUpdate({path:e,value:!0},r.getState()).forEach(e=>r._validation=i.setIfNotDeeper(r._validation||{},!0,e.path)),r._setExecution(null,t)},this.get=(...e)=>i.getFromState(this.getState(),...e),this.set=(e,t,r={})=>{if(null===e)return this._setExecution([null],r);let a=n(r,[]);return a.path=e,a.value=t,this._setExecution(a,r)},this.getValue=(e={})=>this.get(i.SymData,e.inital?"inital":"current",e.path||[]),this.setValue=(e,t={})=>{let{path:r,inital:s,replace:o}=t,l=n(t,["path","inital","replace"]);if(null===r)return this._setExecution([null],t);if(~(r=i.normalizePath(r||[]).slice()).indexOf(i.SymData))l.path=r;else{let t=this.getState();for(;!a.getIn(t,r)&&r.length;){let t=r.pop();e={[t]:e},o={[t]:o}}l.path=[s?"@inital":"@current"].concat(r)}return l.value=e,l.replace=o,this._setExecution(l,t)},this.getDefaultValue=()=>this.get(i.SymData,"default"),this.switch=(e,t,r={})=>this.set(e,t,Object.assign(Object.assign({},r),{macros:"switch"})),this.setMessages=(e,t)=>{let r=t||{},{priority:s=0,group:o=3,path:l=[],props:c}=r,u=n(r,["priority","group","path","props"]);const p="@/messages/"+s+"/texts/"+o;if(null===e)this.switch([l,p],[],u),a.isObject(c)&&this.switch([l,"@/messages/"+s],c,u);else{i.object2PathValues(e,{arrayAsValue:!0}).forEach(e=>{this.set([l,e,p],e.pop(),Object.assign({replace:!0},u)),a.isObject(c)&&this.set([l,e,"@/messages/"+s],c,u)})}},this.reset=(e={})=>e.status?this.set(i.normalizePath(e.path||"/"),a.isUndefined(e.value)?i.SymReset:e.value,{[i.SymData]:["status",e.status],macros:"switch"}):this.setValue(i.SymReset,e),this.clear=(e={})=>this.setValue(i.SymClear,e),this.arrayAdd=(e,t=1,r={})=>this._setExecution(Object.assign({path:e,value:t,macros:"array"},r),r),this.arrayItemOps=(e,t,r={})=>this._setExecution(Object.assign({path:e,op:t,macros:"arrayItem"},r),r),this.setHidden=(e,t=!0,r={})=>this._setExecution([Object.assign({path:[e,"@","/params/hidden"],value:t},r)],r),this.showOnly=(e,t={})=>(e=i.normalizePath(e),this._setExecution([Object.assign({path:[e.slice(0,-1),"/*/@/params/hidden"],value:!0},t),Object.assign({path:[e,"@","/params/hidden"],value:!1},t)],t)),this.getSchemaPart=(e=[])=>(e=i.normalizePath(e),i.getSchemaPart(this.schema,e,i.oneOfFromState(this.getState())));e.state?this._setState(e.state):this._getState()||this._setState(i.initState(this.UPDATABLE));const t=this._getState();t[i.SymDataMap]||this._setState(i.rehydrateState(t,this.UPDATABLE))}wrapper(e={}){const t=this,r=r=>e[r]||t[r],s=(t="./")=>t&&i.normalizePath(t,e.path),o=(t={},r)=>{const{path:i}=t,o=n(t,["path"]);return null===i?o.path=null:a.isUndefined(i)&&!r||(o.path=s(i||"./")),e.wrapOpts?e.wrapOpts(o):o},l={validate:(e="./",...t)=>r("validate")("boolean"==typeof e?e:s(e),...t),get:(...e)=>r("get")(s(e)),bind:t=>(e=t,l),getValue:(e={})=>l.get(i.SymData,e.inital?"inital":"current",s(e.path)),getApi:()=>t};return["setValue","setMessages"].forEach(e=>l[e]=(t,n={},...a)=>r(e)(t,o(n),...a)),["noExec","setState","getActive","getDefaultValue"].forEach(e=>l[e]=(...t)=>r(e)(...t)),["reset","clear","execute"].forEach(e=>l[e]=(t,...n)=>r(e)(o(t,!0),...n)),["showOnly","getSchemaPart"].forEach(e=>l[e]=(t=[],n={},...a)=>r(e)(s(t),o(n),...a)),["set","switch","arrayAdd","arrayItemOps","setHidden"].forEach(e=>l[e]=(t=[],n,a={},...i)=>r(e)(s(t),n,o(a),...i)),l}_clearActions(){this._newState=void 0,this._defferedTimerId=null,this._validation=null,this._updates=[],this._promise(!0)}_execBatch(e,t,r,n){let a={type:u,state:this._newState,updates:e,api:this,forceValidation:n,opts:t,promises:r};return this._clearActions(),this.dispatch(i.updateState.bind(a)),r}_setExecution(e,t={}){if(t.setExecution)return t.setExecution(e,t);e&&a.push2array(this._updates,e),!0===t.force&&this._noExec>0&&this._noExec--;let r=this._promise();return!1===t.execute||this._noExec?r:(this._defferedTimerId&&clearTimeout(this._defferedTimerId),!0===t.execute?this._execBatch(this._updates,t,r,this._validation):this._defferedTimerId=setTimeout(this._execBatch.bind(this,this._updates,t,r,this._validation),t.execute||0),r)}_promise(e){const t=this;return e&&(t._resultPromises=null),t._resultPromises||(t._resultPromises=new s,t._resultPromises.vAsync=new s),t._resultPromises}};const c="FFROM_SET_STATE";t.anSetState=c;const u="FFROM_UPDATE_STATE";let p="fforms";function f(){return p}function d(e){e&&(p=e);const t={};return t[c]=(e,t)=>t.api.props.store?function(e,t,r){if(e[t]!==r){let n=Object.assign({},e);return n[t]=r,n}return e}(e,t.api.name,t.state):t.state,(e={},r)=>{let n=t[r.type];return n?n(e,r):e}}t.getFRVal=f,t.formReducer=d;const h=(e,t)=>y(e)?e:g(t,e);t.compileSchema=h;const g=a.memoize((e,t)=>(function e(t={},r,s=[]){if(y(r))return r;const o=a.isArray(r)?[]:{_compiled:!0};let l=r,{_validators:c,_data$:u,_stateMaps:p,_oneOfSelector:f}=l,d=n(l,["_validators","_data$","_stateMaps","_oneOfSelector"]);const h={noStrictArrayResult:!0};c&&(o._validators=i.objMap(m($(t,c,s)),e=>i.normalizeFn(e,h)));u&&(o._data$=i.objMap(m($(t,u,s)),e=>i.normalizeFn(e)));p&&(o._stateMaps=$(t,p,s));f&&(o._oneOfSelector=$(t,i.normalizeFn(f,h),s));a.objKeys(d).forEach(r=>{if("_"==r.substr(0,1))return o[r]="_presets"!==r&&i.isElemRef(d[r])?j(t,d[r],s):d[r];switch(r){case"default":case"enum":o[r]=d[r];break;case"definitions":case"properties":case"patternProperties":case"dependencies":let n={},i=d[r]||{};a.isArray(i)?n=i:a.objKeys(i).forEach(a=>n[a]=e(t,i[a],s.concat(r,a))),o[r]=n;break;default:a.isMergeable(d[r])?o[r]=e(t,d[r],s.concat(r)):o[r]=d[r]}});return o})(e,t)),m=e=>a.isObject(e)?e:a.toArray(e);function y(e){return a.getIn(e,"_compiled")}function b(e,t,r){if(a.isUndefined(e))throw new Error('Reference "'+t+"\" leads to undefined object's property in path: "+i.path2string(r));return!0}function v(e,t){let r=e["^"],n=!1;for(;!n;){n=!0;for(let s=0;s<t.length;s++){if(e=a.getIn(e,t[s]),i.isElemRef(e)){t=i.string2path(e).concat(t.slice(s+1)),e={"^":r},n=!1;break}if(a.isFunction(e)&&s+1!==t.length){e=e(r,t.slice(s+1));break}if(a.isUndefined(e))break}}return e}function _(e,t,r=[]){if(!a.isMergeable(t))return t;let{$_ref:s=""}=t,o=n(t,["$_ref"]);s=s.split(":");const l=[];for(let t=0;t<s.length;t++){if(!s[t])continue;let n=i.string2path(s[t]);if("^"!==n[0])throw new Error("Can reffer only to ^");let o=v({"^":e},n);b(o,s[t],r.concat("@"+t)),a.isMergeable(o)&&(o=_(e,o,r.concat("@"+t))),l.push(o)}let c=a.isArray(t)?[]:{};for(let e=0;e<l.length;e++)c=a.merge(c,l[e]);return a.merge(c,i.objMap(o,_.bind(null,e),r))}function O(e,t){return"_$"==e.substr(0,2)||t._$skipKeys&&~t._$skipKeys.indexOf(e)}t.objectDerefer=_,t.skipKey=O;const j=(e,t,r=[],n="")=>{const s={"^":e};return a.deArray(t.split("|").map((e,t)=>{let o;e=e.trim(),i.isElemRef(e)?n=e.substr(0,e.lastIndexOf("/")+1):e=n+e,e=e.split(":");for(let t=0;t<e.length;t++){let l=e[t];if(!l)continue;i.isElemRef(l)||(l=n+l);let c=v(s,i.string2path(l));b(c,l,r.concat("@"+t)),o=o?a.merge(o,c):c}return o}))};function $(e,t,r=[]){if(i.isElemRef(t))return j(e,t,r);if(!a.isMergeable(t))return t;const n=_(e,t),s=a.isArray(n)?[]:{};return a.objKeys(n).forEach(t=>{let o=n[t];i.isElemRef(o)&&(o=j(e,o,r),"$"!==t&&!O(t,n)&&(a.isFunction(o)||a.isArray(o)&&o.every(a.isFunction))&&(o={$:o})),O(t,n)?s[t]=o:s[t]=$(e,o,r.concat(t))}),s}t.objectResolver=$},function(e,t){function r(t){return e.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(t)}e.exports=r},function(e,t){function r(){return e.exports=r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},r.apply(this,arguments)}e.exports=r},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}},function(e,t,r){var n=r(13),a=r(2);e.exports=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?a(e):t}},function(e,t,r){var n=r(22);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}},function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(t){return"function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?e.exports=n=function(e){return r(e)}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)},n(t)}e.exports=n},function(e,t,r){var n=r(17),a=r(18),i=r(19);e.exports=function(e){return n(e)||a(e)||i()}},function(e,t,r){var n=r(20);function a(t,r,i){return"undefined"!=typeof Reflect&&Reflect.get?e.exports=a=Reflect.get:e.exports=a=function(e,t,r){var a=n(e,t);if(a){var i=Object.getOwnPropertyDescriptor(a,t);return i.get?i.get.call(r):i.value}},a(t,r,i||t)}e.exports=a},function(e,t,r){"use strict";r.r(t),r.d(t,"elements",(function(){return re})),r.d(t,"FForm",(function(){return C})),r.d(t,"FField",(function(){return N})),r.d(t,"extractMaps",(function(){return Q})),r.d(t,"normalizeMaps",(function(){return X})),r.d(t,"updateProps",(function(){return Y})),r.d(t,"classNames",(function(){return te})),r.d(t,"comparePropsFn",(function(){return ee})),r.d(t,"getExten",(function(){return Z}));var n=r(13),a=r.n(n),i=r(14),s=r.n(i),o=r(15),l=r.n(o),c=r(8),u=r.n(c),p=r(5),f=r.n(p),d=r(9),h=r.n(d),g=r(10),m=r.n(g),y=r(11),b=r.n(y),v=r(7),_=r.n(v),O=r(2),j=r.n(O),$=r(12),S=r.n($),w=r(1),E=r.n(w),x=r(4),I=r(0),A=r(3),P=r(6);r.d(t,"formReducer",(function(){return P.formReducer})),r.d(t,"FFormStateAPI",(function(){return P.FFormStateAPI})),r.d(t,"fformCores",(function(){return P.fformCores}));var F;function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t,r=1;r<arguments.length;r++)t=null==arguments[r]?{}:arguments[r],r%2?k(t,!0).forEach((function(r){E()(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):k(t).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}));return e}var M=Symbol("_$cx"),C=function(e){function t(e){var r,n;h()(this,t);for(var a=arguments.length,i=Array(1<a?a-1:0),s=1;s<a;s++)i[s-1]=arguments[s];n=b()(this,(r=_()(t)).call.apply(r,[this,e].concat(i))),E()(j()(n),"_unsubscribe",void 0),E()(j()(n),"_savedState",void 0),E()(j()(n),"_savedValue",void 0),E()(j()(n),"_root",void 0),E()(j()(n),"_form",void 0),E()(j()(n),"_methods",{onSubmit:null,onChange:null,onStateChange:null}),E()(j()(n),"api",void 0),E()(j()(n),"elements",void 0),E()(j()(n),"parent",void 0),E()(j()(n),"wrapFns",G);var o=j()(n);return o.api=o._coreFromParams(e.core),Object.defineProperty(o,"elements",{get:function(){return o.api.props.elements}}),Object.defineProperty(o,"valid",{get:function(){return o.api.get("/@/status/valid")}}),o.parent=e.parent,o._updateMethods(e),o._initState(e),o._unsubscribe=o.api.addListener(o._handleStateUpdate.bind(o)),o._setRootRef=o._setRootRef.bind(o),o._setFormRef=o._setFormRef.bind(o),o._submit=o._submit.bind(o),o.reset=o.reset.bind(o),n}return S()(t,e),m()(t,[{key:"_coreFromParams",value:function(e){return e instanceof P.FFormStateAPI?e:Object(P.fformCores)(e.name)||new P.FFormStateAPI(e)}},{key:"_initState",value:function(e){var r=D({},e);null!==e.touched&&(r.touched=!!r.touched),t.params.forEach((function(t){Object(I.isUndefined)(r[t])||(r[t]=function(r){return Object(I.isUndefined)(r)?e[t]:r})})),Object(I.isUndefined)(r.value)&&(r.value=r.inital),this._updateValues(r),e.noValidation||this.api.validate(!0)}},{key:"_updateMethods",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=this,n={};Object(I.objKeys)(r._methods).forEach((function(r){t[r]!==e[r]&&(n[r]=e[r])})),Object.assign(r._methods,r.wrapFns(Object(P.objectResolver)(r.elements,n),{noStrictArrayResult:!0}))}},{key:"_setRootRef",value:function(e){this._root=e}},{key:"_setFormRef",value:function(e){this._form=e}},{key:"_updateValues",value:function(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=e.state,a=e.value,i=e.inital,s=e.extData,o=e.noValidation,l=e.touched,c=this;n&&n!==r.state&&c.api.setState(n),i&&i!==r.inital&&c.api.setValue(i,{replace:!0,inital:!0,noValidation:o}),a&&a!==r.value&&c.api.setValue(a,{replace:!0,noValidation:o}),s&&s!==r.extData&&Object(I.objKeys)(s).forEach((function(e){return c.api.set(e,s[e],{replace:!0})})),Object(I.isUndefined)(l)||null===l||l===r.touched||c.api.reset({status:"untouched",value:l?0:void 0}),t.params.forEach((function(t){return!Object(I.isUndefined)(e[t])&&e[t]!==r[t]&&c.api.switch("/@/params/"+t,e[t])}))}},{key:"_handleStateUpdate",value:function(e){var t=this;t._savedState==e||(t._savedState=e,t._methods.onStateChange&&t._methods.onStateChange(t._extendEvent(new Event("stateChanged"))),e[A.SymData].current!==t._savedValue&&(t._savedValue=e[A.SymData].current,t._methods.onChange&&t._methods.onChange(t._extendEvent(new Event("valueChanged")))),t._root&&t._root.setState({branch:e}))}},{key:"_extendEvent",value:function(e){var t=this;return e.value=t.api.getValue(),e.state=t.api.getState(),e.fform=t,e}},{key:"_submit",value:function(e){var t,r=this,n=function(e){return r.api.set([],e,E()({},A.SymData,["status","pending"]))},a=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];Object(I.isUndefined)(e)||Object(I.toArray)(e).forEach((function(e){if(e){var t=e[A.SymData];r.api.setMessages(Object(I.objKeys)(e).length?e:null,t)}}))};if(r.api.set([],0,(t={},E()(t,A.SymData,["status","untouched"]),E()(t,"execute",!0),E()(t,"macros","switch"),t)),r._methods.onSubmit){r.api.setMessages(null,{execute:!0});var i=r._methods.onSubmit(r._extendEvent(e));i&&i.then&&"function"==typeof i.then?(n(1),i.then((function(e){n(0),a(e)}),(function(e){n(0),a(e)}))):a(i)}}},{key:"shouldComponentUpdate",value:function(e){var t=this;t.parent=e.parent;var r=!1,n=t._coreFromParams(e.core);return t.api===n?t._updateValues(e,t.props):(t._unsubscribe(),t.api=n,t._unsubscribe=t.api.addListener(t._handleStateUpdate.bind(t)),r=!0,t._initState(e)),t._updateMethods(e,t.props),r||!Object(I.isEqual)(t.props,e,{skipKeys:["core","state","value","inital","extData","fieldCache","flatten","noValidate","parent","onSubmit","onChange","onStateChange"]})}},{key:"componentWillUnmount",value:function(){this._unsubscribe&&this._unsubscribe()}},{key:"getRef",value:function(e){return this._root&&this._root.getRef(e)}},{key:"getDataObject",value:function(e){return Object(I.getIn)(e,A.SymData)}},{key:"getValue",value:function(e,t){return Object(A.isSelfManaged)(e)?Object(I.getIn)(e,A.SymData,"value"):this.api.getValue({path:t.path})}},{key:"getBranch",value:function(e){return this.api.get(e)}},{key:"reset",value:function(e){e&&e.preventDefault(),this.api.reset()}},{key:"submit",value:function(){this._form.dispatchEvent(new Event("submit"))}},{key:"render",value:function(){var e=this,r=e.props,n=(r.core,r.state,r.value,r.inital,r.extData,r.fieldCache,r.touched,r.parent,r.onSubmit,r.onChange,r.onStateChange,r._$useTag),a=void 0===n?e.elements.widgets.Form||"form":n,i=f()(r,["core","state","value","inital","extData","fieldCache","touched","parent","onSubmit","onChange","onStateChange","_$useTag"]);return t.params.forEach((function(e){return delete i[e]})),Object(I.objKeys)(i).forEach((function(e){return("_"===e[0]||"$"===e[0])&&delete i[e]})),Object(x.createElement)(a,u()({ref:e._setFormRef},i,{onSubmit:e._submit,onReset:e.reset}),Object(x.createElement)(N,{ref:e._setRootRef,id:(i.id||e.api.name)+"/#",name:e.api.name,pFForm:e,getPath:t._getPath,FFormApi:e.api}))}}],[{key:"_getPath",value:function(){return"#"}}]),t}(x.Component);E()(C,"params",["readonly","disabled","viewer","liveValidate","liveUpdate"]);var R=function(e){function t(e,r){var n;h()(this,t),n=b()(this,_()(t).call(this,e,r)),E()(j()(n),"$refs",{});var a=j()(n);return a._setRef=a._setRef.bind(a),n}return S()(t,e),m()(t,[{key:"getRef",value:function(e){var t=this;return e.length?1!=e.length||t.$refs[e[0]].getRef?t.$refs[e[0]]&&t.$refs[e[0]].getRef&&t.$refs[e[0]].getRef(e.slice(1)):t.$refs[e[0]]:t}},{key:"_setRef",value:function(e){var t=this;return function(r){return t.$refs[e]=r}}},{key:"_refProcess",value:function(e,t){var r=this;return!0===t?r._setRef(e):Object(I.isString)(t)?r._setRef(t):Object(I.isMergeable)(t)?Object(A.objMap)(t,r._refProcess.bind(r,e)):t}}]),t}(x.Component),N=function(e){function t(e,r){var n;h()(this,t),n=b()(this,_()(t).call(this,e,r)),E()(j()(n),"_mappedData",{}),E()(j()(n),"_builderData",{}),E()(j()(n),"_rebuild",!0),E()(j()(n),"_cached",void 0),E()(j()(n),"_cachedTimeout",void 0),E()(j()(n),"_blocks",[]),E()(j()(n),"_widgets",void 0),E()(j()(n),"_components",void 0),E()(j()(n),"_maps",{}),E()(j()(n),"_$_parse",void 0),E()(j()(n),"_forceUpd",!1),E()(j()(n),"get",null),E()(j()(n),"_layout",void 0),E()(j()(n),"$branch",void 0),E()(j()(n),"schemaPart",void 0),E()(j()(n),"liveValidate",void 0),E()(j()(n),"liveUpdate",void 0),E()(j()(n),"path",void 0),E()(j()(n),"api",void 0),E()(j()(n),"pFForm",void 0),E()(j()(n),"stateApi",void 0),E()(j()(n),"wrapFns",G);var a=j()(n);return Object.defineProperty(a,"path",{get:function(){return a.props.getPath()}}),Object.defineProperty(a,"pFForm",{get:function(){return a.props.pFForm}}),Object.defineProperty(a,"liveValidate",{get:function(){return Object(I.getIn)(a.getData(),"params","liveValidate")}}),Object.defineProperty(a,"liveUpdate",{get:function(){return Object(I.getIn)(a.getData(),"params","liveUpdate")}}),Object.defineProperty(a,"value",{get:function(){return a.props.pFForm.getValue(a.state.branch,a)}}),Object.defineProperty(a,"stateApi",{get:function(){return a.props.pFForm.api}}),a.state={branch:a.pFForm.getBranch(a.path)},a.$branch=a.state.branch,a._updateStateApi(e.pFForm.api),n}return S()(t,e),m()(t,[{key:"getRef",value:function(e){var t=this;return(e=Object(A.normalizePath)(e)).length?1==e.length&&e[0]==A.SymData?t:"@"==e[0][0]?1==e.length?t.$refs[e[0]]:t.$refs[e[0]].getRef(e.slice(1)):t.$refs["@Main"]&&t.$refs["@Main"].getRef&&t.$refs["@Main"].getRef(e):t.$refs["@Main"]}},{key:"_resolver",value:function(e){try{return Object(P.objectResolver)(this.pFForm.elements,e)}catch(e){throw this._addErrPath(e)}}},{key:"_addErrPath",value:function(e){return e.message=e.message+", in form '"+(this.pFForm.props.name||"")+"', path: '"+this.path+"'",e}},{key:"_updateStateApi",value:function(e){var t=this;if(e){if(!e.wrapper)return void(t.api=e);var r=e.wrapper({get path(){return t.path}});r._set=r.set,r._setValue=r.setValue,r.set=function(){return t._cacheValue(0>=arguments.length?void 0:arguments[0],1>=arguments.length?void 0:arguments[1],"set",2>=arguments.length?void 0:arguments[2])||r._set.apply(r,arguments)},r.setValue=function(){return t._cacheValue(((1>=arguments.length?void 0:arguments[1])||{}).path,0>=arguments.length?void 0:arguments[0],"setValue",1>=arguments.length?void 0:arguments[1])||r._setValue.apply(r,arguments)},t.api=r}}},{key:"_updateCachedValue",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.liveUpdate||this._forceUpd,t=this;t._cachedTimeout=void 0,e&&t._cached&&(t.stateApi.setValue(t._cached.value,D({noValidation:!t.liveValidate&&!t._forceUpd,path:t.path},t._cached.opts)),t._forceUpd=!1,t._cached=void 0)}},{key:"_cacheValue",value:function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"set",n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},a=this,i=a.pFForm.props.fieldCache;(Object(I.isUndefined)(i)||!0===i)&&(i=40);var s="setValue"===r&&(!e||"./"==e||"."==e);if(!s){var o=a.path;s=(e="#/"+Object(A.path2string)(Object(A.normalizePath)(e,a.path))+("setValue"===r?"/@/value":""))==o+"/@/value"||e=="#/@/current/"+o.slice(2)}if(s){var l=a.getData();if(a._cached={value:t,opts:n},i){a._cachedTimeout&&clearTimeout(a._cachedTimeout),a._cachedTimeout=setTimeout(a._updateCachedValue.bind(a),i);var c=a.getData(),u=a._mappedData;a.get=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=Object(A.normalizePath)(t,a.path);return Object(I.isEqual)(n,Object(A.normalizePath)("./@value",a.path))?c.value:a.stateApi.get(n)},a._setMappedData(l,c,!0),a.get=null,u!=a._mappedData&&a.forceUpdate()}else a._updateCachedValue();return!0}}},{key:"_build",value:function(){var e=this;e.state={branch:e.pFForm.getBranch(e.path)},e.$branch=e.state.branch;var t=e.api.getSchemaPart(e.path);if(e.schemaPart=t,(Object(I.isArray)(t.type)||Object(I.isUndefined)(t.type))&&!t._presets)throw new Error("schema._presets should be defined explicitly for multi type");e._layout=e.wrapFns(J(e.pFForm.elements,t._layout));var r=J(e.pFForm.elements,t._custom,t._presets||t.type),n=Q(r=e.wrapFns(r)),a=n.$_maps,i=n.rest;e._maps=X(a),e._widgets={},e._components=i,e._blocks=Object(I.objKeys)(i).filter((function(e){return i[e]})),e._blocks.forEach((function(t){var r=i[t],n=r._$widget,a=r.$_reactRef,s=(r._$skipKeys,f()(r,["_$widget","$_reactRef","_$skipKeys"]));if(!n)throw new Error('_$widget for "'+t+'" is empty');if(e._widgets[t]=n,a){var o=e._refProcess("@"+t,a);s[Object(I.isFunction)(o)?"ref":"$_reactRef"]=o}e._mappedData[t]=s})),e._setMappedData(void 0,e.getData(),"build"),e._rebuild=!1}},{key:"_setMappedData",value:function(e,t,r){var n=this,a=n.getData;n.getData=function(){return t};var i=Y(n._mappedData,e,t,"build"==r&&n._maps.build,r&&n._maps.data,n._maps.every);return n.getData=a,n._mappedData!=i&&(n._mappedData=i,!0)}},{key:"getData",value:function(e){var t=this,r=t.pFForm.getDataObject(e||Object(I.getIn)(t,"state","branch"),t);return t._cached?Object(I.merge)(r,{value:t._cached.value},{replace:{value:t._cached.opts.replace}}):r}},{key:"shouldComponentUpdate",value:function(e,t){var r=this;if(e.FFormApi!==r.props.FFormApi)return r._updateStateApi(e.FFormApi),r._rebuild=!0;if(!Object(I.isEqual)(e,r.props))return r._rebuild=!0;if(Object(I.isUndefined)(t.branch))return!0;r.$branch=t.branch;var n=!1,a=r.getData(),i=r.getData(Object(I.getIn)(t,"branch"));if(Object(I.getIn)(i,"oneOf")!==Object(I.getIn)(a,"oneOf"))return r._rebuild=!0;try{n=(n=r._setMappedData(a,i,i!==a)||n)||Object(I.getIn)(i,"params","norender")!==Object(I.getIn)(a,"params","norender")}catch(e){throw r._addErrPath(e)}return n}},{key:"render",value:function(){var e=this;return Object(I.isUndefined)(e.state.branch)?null:!Object(I.getIn)(e.getData(),"params","norender")&&(e._rebuild&&this._build(),e._widgets.Builder?Object(x.createElement)(e._widgets.Builder,e._mappedData.Builder,e._mappedData):null)}}]),t}(R),U=function(e){function t(){var e,r;h()(this,t);for(var n=arguments.length,a=Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=b()(this,(e=_()(t)).call.apply(e,[this].concat(a))),E()(j()(r),"refs",void 0),r}return S()(t,e),m()(t,[{key:"_cn",value:function(e){return e&&this.props._$cx&&e.className&&!Object(I.isString)(e.className)?H(this.props._$widget)?D({_$cx:this.props._$cx},e):D({},e,{className:this.props._$cx(e.className)}):e}},{key:"render",value:function(){var e=this._cn(this.props.getMappedData());return Object(x.createElement)(this.props._$widget,e,this.props.children||e.children)}}]),t}(x.Component),V=function(e){function t(e,r){var n;h()(this,t),n=b()(this,_()(t).call(this,e,r)),E()(j()(n),"_arrayStart",0),E()(j()(n),"_rebuild",!0),E()(j()(n),"_focusField",""),E()(j()(n),"_arrayKey2field",{}),E()(j()(n),"_widgets",{}),E()(j()(n),"_objectLayouts",[]),E()(j()(n),"_arrayLayouts",[]),E()(j()(n),"_setWidRef",void 0),E()(j()(n),"_maps",{}),E()(j()(n),"_mappedData",{}),E()(j()(n),"_$widget",void 0),E()(j()(n),"_isArray",!1);var a=j()(n);return a._setWidRef=function(e){return function(t){return a._widgets[e]=t}},n}return S()(t,e),m()(t,[{key:"_getMappedData",value:function(e){var t=this;return function(){return t._mappedData[e]}}},{key:"_build",value:function(e){function t(e,t){var n=Q(t,["$_fields"]),a=n.$_maps,i=n.rest,o=i.$_fields,l=i.$_reactRef,c=(i._$skipKeys,i._$widget),p=void 0===c?u:c,h=i.className,m=f()(i,["$_fields","$_reactRef","_$skipKeys","_$widget","className"]);(o||!e)&&(h=Object(I.merge)(d,h)),m.className=h;var y=r._refProcess("@widget_"+e,l)||{};Object(I.isFunction)(y)&&(y={ref:y}),Object.assign(m,y);var b=X(a,e.toString());return g.forEach((function(e){var t;return(t=r._maps[e]).push.apply(t,s()(b[e]))})),r._mappedData[e]=m,{_$widget:p,$_fields:o}}var r=this,n=e.$branch,a=e.$layout,i=e._$cx,o=e.arrayStart,l=e.strictLayout,c=e.LayoutDefaultWidget,u=void 0===c?"div":c,p=e.LayoutDefaultClass,d=void 0===p?{}:p,h=(e.uniqKey,e.focusField),g=["build","data","every"];g.forEach((function(e){return r._maps[e]=[]})),r.$refs={},r._widgets={},r._mappedData={},r._objectLayouts=[];var m={keys:r._getObjectKeys(n),counter:1};r._focusField=h||m.keys[0]||"";var y=t(0,Object(I.isArray)(a)?{$_fields:a}:a),b=y._$widget,v=y.$_fields;if(r._$widget=b,v&&(r._objectLayouts=function e(n,a){var s=[];return Object(I.objKeys)(a).forEach((function(o){var l=a[o];n.keys,n.counter;if(Object(I.isString)(l)){var c=n.keys.indexOf(l);~c&&(s.push(r._makeFField(l)),n.keys.splice(c,1))}else if(Object(I.isObject)(l)){var u=n.counter++,p=t(u,l),f=p._$widget,d=p.$_fields;s.push(Object(x.createElement)(U,{_$widget:f,_$cx:i,key:"widget_"+u,ref:r._setWidRef(u),getMappedData:r._getMappedData(u)},d&&e(n,d)))}})),s}(m,v)),!0!==l&&m.keys.forEach((function(e){return r._objectLayouts.push(r._makeFField(e))})),r._arrayLayouts=[],r._arrayKey2field={},r.props.isArray)for(var _,O=o;O<r.props.length;O++)_=r._arrayIndex2key(n[O]),r._arrayLayouts.push(r._makeFField(O.toString(),_)),_&&(r._arrayKey2field[_]=O);r._mappedData=r._updateMappedData(void 0,r._getData(n),"build"),r._rebuild=!1}},{key:"_makeFField",value:function(e,t){var r=this;return Object(x.createElement)(N,{ref:r._setRef(t||e),key:t||e,pFForm:r.props.$FField.pFForm,FFormApi:r.props.FFormApi,id:r.props.id?r.props.id+"/"+(t||e):void 0,name:r.props.name?r.props.name+"["+(r.props.isArray?"${idx}_"+(t||e):e)+"]":void 0,getPath:t?r._getArrayPath.bind(r,t):r._getObjectPath.bind(r,e)})}},{key:"_arrayIndex2key",value:function(e){return this.props.uniqKey?Object(I.getIn)(this._getData(e),Object(A.string2path)(this.props.uniqKey)):void 0}},{key:"_getObjectKeys",value:function(e){var t=[];if(this.props.isArray)for(var r=0;r<this.props.arrayStart;r++)t.push(r.toString());else t=Object(A.branchKeys)(e);return t}},{key:"_getObjectPath",value:function(e){return this.props.$FField.path+"/"+e}},{key:"_getArrayPath",value:function(e){return this.props.$FField.path+"/"+this._arrayKey2field[e]}},{key:"_getArrayField",value:function(e){return this._arrayLayouts[e-this.props.arrayStart]}},{key:"_reorderArrayLayout",value:function(e,t,r){for(var n,a=this,i=[],s=!1,o=r.arrayStart;o<r.length;o++){if(n=a._arrayIndex2key(t[o]),Object(I.isUndefined)(n))throw new Error("no unique key provided for array item");a.$refs[n]&&a.$refs[n].setState({branch:t[o]});var l=a._arrayKey2field[n];a._arrayKey2field[n]!==o&&(a._arrayKey2field[n]=o,s=!0),i.push(Object(I.isUndefined)(l)?a._makeFField(o.toString(),n):a._getArrayField(l))}return a._arrayLayouts.length!==i.length&&(s=!0),s&&(a._arrayLayouts=i),s}},{key:"_updateMappedData",value:function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:e!==t,n=this;return Y(n._mappedData,e,t,"build"==r&&n._maps.build,r&&n._maps.data,n._maps.every)}},{key:"_getData",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.props.$branch;return this.props.$FField.getData(e)}},{key:"shouldComponentUpdate",value:function(e){var t=this;if(["FFormApi","oneOf","branchKeys"].some(ee(t.props,e)))return t._rebuild=!0;var r=!Object(I.isEqual)(e,t.props,{skipKeys:["$branch"]}),n=t.props.$branch,a=e.$branch;if(n!=a){var i;try{i=t._updateMappedData(t._getData(n),t._getData(a))}catch(e){throw t.props.$FField._addErrPath(e)}if(i!=t._mappedData){var s=t._mappedData;t._mappedData=i,Object(I.objKeys)(i).forEach((function(e){return t._widgets[e]&&i[e]!=s[e]&&t._widgets[e].forceUpdate()}))}t._getObjectKeys(a).forEach((function(e){return a[e]!==n[e]&&t.$refs[e]&&t.$refs[e].setState({branch:a[e]})})),t.props.isArray&&(r=t._reorderArrayLayout(n,a,e)||r)}return r}},{key:"getRef",value:function(e){var r=this;if(!r.props.isArray||isNaN(parseInt(e[0]))||e[0]<r.props.arrayStart)return l()(_()(t.prototype),"getRef",this).call(this,e);var n=r._getArrayField(e[0]);return n&&r.$refs[n.key].getRef(e.slice(1))}},{key:"render",value:function(){var e=this,t=e.props;if(t.viewer){var r=t.$_viewerProps||{},n=r._$widget,a=void 0===n?B:n,i=f()(r,["_$widget"]);return i.inputProps=t,i.value=t.$FField.value,Object(x.createElement)(a,i)}return Object(A.isSelfManaged)(t.$branch)?null:(e._rebuild&&e._build(t),Object(x.createElement)(U,{_$widget:e._$widget,_$cx:t._$cx,key:"widget_0",ref:e._setWidRef(0),getMappedData:e._getMappedData(0)},e._objectLayouts,e._arrayLayouts))}}]),t}(R),K=function(e){function t(e,r){var n;return h()(this,t),n=b()(this,_()(t).call(this,e,r)),E()(j()(n),"_children",void 0),E()(j()(n),"_reactRef",void 0),E()(j()(n),"_mapped",void 0),n}return S()(t,e),m()(t,[{key:"_newWidget",value:function(e,r){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},a=r._$widget,i=void 0===a?t:a,s=r.className,o=r.$_reactRef,l=f()(r,["_$widget","className","$_reactRef"]),c=this,p=c._refProcess(e,o)||{};return Object(I.isFunction)(p)&&(p={ref:p}),Object(I.isFunction)(n)?p.ref=n:Object.assign(p,n),Object(x.createElement)(i,u()({key:e,className:!H(i)&&this.props._$cx?this.props._$cx(s):s,_$cx:H(i)?this.props._$cx:void 0},l,p))}},{key:"_mapChildren",value:function(e,t){var r=this;if(e!==r._children||r._reactRef!==t){var n=r._children&&Object(I.toArray)(r._children),a=e&&Object(I.toArray)(e);r._mapped=a&&a.map((function(e,i){return!Object(I.isObject)(e)||e.$$typeof?e:r._mapped&&Object(I.getIn)(r._mapped,i)&&n[i]===a[i]&&Object(I.getIn)(r._reactRef,i)===Object(I.getIn)(t,i)?r._mapped[i]:r._newWidget(i,e,Object(I.getIn)(t,i))})),r._children=e,r._reactRef=t}}},{key:"setRef2rest",value:function(e,t){return t?(Object(I.objKeys)(t).filter((function(e){return isNaN(+e)})).forEach((function(r){return e[r]=t[r]})),e):e}},{key:"setElements2rest",value:function(e,t){if(!t)return e;var r={"^":t};return Object(I.objKeys)(e).forEach((function(t){return Object(A.isElemRef)(e[t])&&(e[t]=Object(I.getIn)(r,Object(A.string2path)(e[t])))})),e}},{key:"render",value:function(){var e=this;if(e.props.norender)return null;var t=e.props,r=t._$useTag,n=void 0===r?"div":r,a=t._$cx,i=t._$elements,s=t.className,o=t.$_reactRef,l=t.children,c=f()(t,["_$useTag","_$cx","_$elements","className","$_reactRef","children"]);return e._mapChildren(l,o),e.setRef2rest(c,o),e.setElements2rest(c,i),!a&&i&&(a=i._$cx),Object(x.createElement)(n,u()({children:e._mapped,className:a?a(s):s},c))}}]),t}(R);function T(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length?arguments[2]:void 0;return function(e){return Object(I.isMergeable)(e)?0===Object(I.objKeys)(e).length:null==e||""===e}(r)?e:Object(I.isArray)(r)?r.map(T.bind(null,e,t)).join(", "):(r=Z(t,r).label||r,Object(I.isString)(r)?r:JSON.stringify(r))}function B(e){var t=e._$useTag,r=void 0===t?"div":t,n=e.value,a=(e.inputProps,e._$cx),i=e.enumExten,s=void 0===i?{}:i,o=e.emptyMock,l=void 0===o?"(none)":o,c=f()(e,["_$useTag","value","inputProps","_$cx","enumExten","emptyMock"]);return c.className&&a&&(c.className=a(c.className)),Object(x.createElement)(r,c,T(l,s,n))}var L=function(e){function t(){return h()(this,t),b()(this,_()(t).apply(this,arguments))}return S()(t,e),m()(t,[{key:"render",value:function(){var e=this,t=e.props;if(t.viewer){var r=t.$_viewerProps||{},n=r._$widget,a=void 0===n?B:n,i=f()(r,["_$widget"]);return i.inputProps=t,i.value=t.value,Object(x.createElement)(a,i)}var s=t.value,o=t._$useTag,l=t.type,c=t.$_reactRef,u=t._$cx,p=t._$elements,d=(t.viewer,t.$_viewerProps,t.children),h=f()(t,["value","_$useTag","type","$_reactRef","_$cx","_$elements","viewer","$_viewerProps","children"]);return e._mapChildren(d,c),e.setRef2rest(h,c),e.setElements2rest(h,p),!u&&p&&(u=p._$cx),"textarea"==l||"select"==l?o=o||l:(o=o||"input","notInput"!==l&&(h.type=l)),"notInput"!==l&&(h["checkbox"===l?"checked":"value"]=s),h.className&&u&&(h.className=u(h.className)),Object(x.createElement)(o,h,e._mapped)}}]),t}(K),q=function(e){function t(){var e,r;h()(this,t);for(var n=arguments.length,a=Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=b()(this,(e=_()(t)).call.apply(e,[this].concat(a))),E()(j()(r),"_elem",void 0),r}return S()(t,e),m()(t,[{key:"componentDidMount",value:function(){var e,t=this;try{e=window&&window.getComputedStyle(this.props.$FField.$refs["@Main"])}catch(e){}e&&this._elem&&["fontSize","fontFamily","fontWeight","fontStyle","letterSpacing"].forEach((function(r){return t._elem.style[r]=e[r]}))}},{key:"render",value:function(){var e=this,r=e.props,n=(Object(I.isUndefined)(r.value)||null===r.value?"":r.value.toString())||r.placeholder||"";return Object(x.createElement)("div",{style:t.sizerStyle,ref:function(t){var n=Math.max;(e._elem=t)&&r.$FField.$refs["@Main"]&&r.$FField.$refs["@Main"].style&&(r.$FField.$refs["@Main"].style.width=n(t.scrollWidth+(r.addWidth||45),r.minWidth||0)+"px")}},n)}}]),t}(x.Component);E()(q,"sizerStyle",{position:"absolute",top:0,left:0,visibility:"hidden",height:0,overflow:"scroll",whiteSpace:"pre"});var W=Object(x.forwardRef)((function(e,t){var r=e.$tags,n=void 0===r?{}:r,a=e.$props,i=void 0===a?{}:a,s=(e.children,e.placeholder),o=e.role,l=void 0===o?"checkbox":o,c=e.type,u=void 0===c?"checkbox":c,p=e.className,d=void 0===p?"":p,h=f()(e,["$tags","$props","children","placeholder","role","type","className"]);return h.ref=t,h.type=u,h.key="input",h.role="input",i.input&&Object.assign(h,i.input),Object(x.createElement)(n.parent||"label",Object.assign({className:d,role:l},i.parent||{}),[Object(x.createElement)(n.input||"input",h),Object(x.createElement)(n.label||"span",D({key:"label",role:"label"},i.label||{}),s)])})),z=Object(x.forwardRef)((function(e,t){var r=e.checked,n=e.onChange,a=e.nullValue,i=void 0===a?"":a,s=(e.type,f()(e,["checked","onChange","nullValue","type"]));return Object(x.createElement)("input",u()({type:"checkbox",checked:!0===r},s,{onChange:function(e){n(!(r!==i)||!0!==r&&i,e)},ref:function(e){t&&t(e),e&&(e.indeterminate=r===i)}}))}));function G(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=G.bind(this);if(Object(I.isFunction)(e)&&(e={$:e}),Object(A.isMapFn)(e)){var n=e.norm?e:Object(A.normalizeFn)(e,D({},t,{wrapFn:r})),a=A.processFn.bind(this,n);return a._map=n,a}if(Object(I.isMergeable)(e)){var i=Object(I.isArray)(e)?[]:{};//!~ignore.indexOf(key) &&
return Object(I.objKeys)(e).forEach((function(n){return i[n]=Object(P.skipKey)(n,e)?e[n]:r(e[n],t)})),i}return e}function H(e){return e instanceof K}var J=Object(I.memoize)((function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length?arguments[2]:void 0;if(r){var n=r.split(":").map((function(e){return(e=e.trim())&&("^"==e[0]?e:"^/sets/"+e)})).join(":")+":"+(t.$_ref||"");t=Object(I.merge)(t,{$_ref:n})}return Object(P.objectResolver)(e,t)}));function Q(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],r=e.$_maps,n=f()(e,["$_maps"]);r=D({},r);var a=Object(I.isArray)(e)?[]:{};return Object(I.objKeys)(n).forEach((function(e){if(Object(I.isMergeable)(n[e])&&!~t.indexOf(e)){var i=Q(n[e],t);a[e]=i.rest,Object(I.objKeys)(i.$_maps).forEach((function(t){return r[e+"/"+t]=i.$_maps[t]}))}else a[e]=n[e]})),{$_maps:r,rest:a}}function X(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",r={data:[],every:[],build:[]};return Object(I.objKeys)(e).forEach((function(n){var a=e[n];if(a){var i=Object(A.multiplePath)(Object(A.normalizePath)((t?t+"/":"")+n));if(Object(I.isFunction)(a)||Object(I.isArray)(a))Object(I.toArray)(a).forEach((function(e){var t=e._map,n=t.update,a=void 0===n?"data":n,s=t.replace,o=f()(t,["update","replace"]);r[a].push(D({update:a,replace:void 0===s||s},o,{to:i,$:e}))}));else{Object(I.isString)(a)&&(a={args:a});var s=a=D({},a,{},Object(A.normalizeArgs)(a.args)),o=s.args,l=s.update,c=void 0===l?"data":l,u=s.replace,p=f()(s,["args","update","replace"]);r.data.push(D({args:o[0],update:c,replace:void 0===u||u,to:i,dataRequest:!0},p))}}})),r}//!map.$ && map.args[0] == 'selectorValue' && args[0]
function Y(e,t,r){for(var n=function(e){return Object(I.isUndefined)(t)||!e.$||e.dataRequest&&e.args.some((function(e){return Object(A.isNPath)(e)?Object(I.getIn)(t,e)!==Object(I.getIn)(r,e):!!Object(A.isMapFn)(e)&&n(e._map||e)}))},a={update:{},replace:{},api:{}},i=arguments.length,s=Array(3<i?i-3:0),o=3;o<i;o++)s[o-3]=arguments[o];return s.forEach((function(t){return t&&t.forEach((function(t){if("data"!=t.update||n(t)){var i=t.$?t.$():Object(A.processProp)(r,t.args);Object(I.objKeys)(t.to).forEach((function(e){return Object(A.setUPDATABLE)(a,i,t.replace,t.to[e])})),t.replace||(e=Object(A.mergeUPD_PROC)(e,a))}}))})),Object(A.mergeUPD_PROC)(e,a)}var Z=function(e,t){var r=Object(I.isFunction)(e)?e(t):Object(I.getIn)(e,t);return r&&Object(I.isString)(r)&&(r={label:r}),Object(I.isObject)(r)?r:{}};function ee(e,t){return(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).equal?function(r){return e[r]===t[r]}:function(r){return e[r]!==t[r]}}function te(){for(var e=this,t=arguments,r=[],n=function(n){var i=0>n||t.length<=n?void 0:t[n];if(!i)return"continue";var s=a()(i);"string"===s||"number"===s?r.push(e&&e[i]||i):Object(I.isArray)(i)?r.push(te.apply(e,i)):"object"===s&&Object(I.objKeys)(i).forEach((function(t){i[t]&&("number"==typeof i[t]||!0===i[t]?r.push(e&&e[t]||t):r.push(te.call(e,i[t])))}))},i=0;i<arguments.length;i++)n(i);return r.join(" ")}var re=(F={extend:function(e,t){var r=I.merge.all(this,e,t);return this["_$cx.bind"]!==r["_$cx.bind"]&&(r=Object(I.merge)(r,{_$cx:r["_$cx.bind"]?this[M].bind(r["_$cx.bind"]):this[M]})),r},widgets:{Section:V,Generic:K,Input:L,Autowidth:q,Builder:function(e){var t=e.children,r=e.widgets,n=r.Title,a=r.Body,i=r.Main,s=r.Message,o=r.Wrapper,l=r.Autowidth;return t=Object(I.deArray)(t),o?Object(x.createElement)(o,t.Wrapper,n?Object(x.createElement)(n,t.Title):"",a?Object(x.createElement)(a,t.Body,i?Object(x.createElement)(i,t.Main):"",s?Object(x.createElement)(s,t.Message):"",l?Object(x.createElement)(l,t.Autowidth):""):""):""},Wrapper:function(e){var t=e._$useTag,r=void 0===t?"div":t,n=e._$cx,a=void 0===n?te:n,i=e.className,s=e.wrapperClassName,o=void 0===s?{}:s,l=e.ArrayItemMenu,c=e.ArrayItemBody,p=e.arrayItem,d=f()(e,["_$useTag","_$cx","className","wrapperClassName","ArrayItemMenu","ArrayItemBody","arrayItem"]),h=c||{},g=h._$widget,m=void 0===g?"div":g,y=h.className,b=void 0===y?{}:y,v=f()(h,["_$widget","className"]),_=l||{},O=_._$widget,j=void 0===O?"div":O,$=_.className,S=void 0===$?{}:$,w=f()(_,["_$widget","className"]);p?b=[b,i]:o=[o,i];var E=Object(x.createElement)(r,u()({className:a?a(o):o},d));return p?Object(x.createElement)(m,u()({className:a?a(b):b},v),E,Object(x.createElement)(j,u()({className:a&&a(S)},w))):E},ItemMenu:function(e){var t=e._$useTag,r=void 0===t?"div":t,n=e._$buttonDefaults,a=void 0===n?{}:n,i=e._$cx,s=e.disabled,o=e.className,l=e.buttonsProps,c=void 0===l?{}:l,p=e.arrayItem,d=e.buttons,h=void 0===d?[]:d,g=e.onClick,m=f()(e,["_$useTag","_$buttonDefaults","_$cx","disabled","className","buttonsProps","arrayItem","buttons","onClick"]);return p?(h.forEach((function(e){return delete m[e]})),Object(x.createElement)(r,u()({className:i(o)},m),h.map((function(e){var t=Object.assign({},a,c[e]||{}),r=t._$widget,n=void 0===r?"button":r,o=t.type,l=void 0===o?"button":o,d=t.disabledCheck,h=void 0===d?"":d,m=t.className,y=void 0===m?{}:m,b=t.onClick,v=void 0===b?g:b,_=t.title,O=void 0===_?e:_,j=t.children,$=void 0===j?e:j,S=f()(t,["_$widget","type","disabledCheck","className","onClick","title","children"]);return Object(x.createElement)(n,u()({key:e,type:l,title:O,className:i?i(y):y,children:$},S,{disabled:s||h&&!p[h],onClick:function(){return v(e)}}))})))):null},Checkbox:W,CheckboxNull:z},sets:{base:{Wrapper:{_$widget:"^/widgets/Wrapper",ArrayItemMenu:{$_ref:"^/parts/ArrayItemMenu"},_$cx:"^/_$cx",$_maps:{"className/fform-hidden":"@/params/hidden",arrayItem:"@/arrayItem"}},Builder:{_$widget:"^/widgets/Builder",_$cx:"^/_$cx",$_maps:{widgets:{$:"^/fn/getProp",args:["_widgets"],update:"build"}}},Body:{_$widget:"^/widgets/Generic",_$cx:"^/_$cx",className:"fform-body"},Message:{$_ref:"^/parts/Message"}},simple:{$_ref:"^/sets/base",Main:{_$widget:"^/widgets/Input",_$cx:"^/_$cx",$_reactRef:{ref:!0},$_viewerProps:{_$cx:"^/_$cx",emptyMock:"(no value)",className:{"fform-viewer":!0}},onChange:{$:"^/fn/eventValue|setValue"},onBlur:{$:"^/fn/blur"},onFocus:{$:"^/fn/focus"},$_maps:{value:{$:"^/fn/iif",args:[{$:"^/fn/equal",args:["@value",null]},"","@value"]},viewer:"@/params/viewer",autoFocus:"@/params/autofocus",readOnly:"@/params/readonly",disabled:"@/params/disabled",placeholder:"@/fData/placeholder",required:"@/fData/required",label:"@/fData/title","$_viewerProps/enumExten":"@/fData/enumExten",id:{$:"^/fn/getProp",args:"props/id",update:"build"},name:{$:"^/fn/getProp",args:"props/name",update:"build"},"className/fform-input-priority":{$:"^/fn/setInputPriority",args:"@/status/priority"}}},Title:{_$widget:"^/widgets/Generic",_$cx:"^/_$cx",_$useTag:"label",children:[],$_maps:{"className/fform-required":"@/fData/required","children/0":"@/fData/title","className/fform-hidden":{$:"^/fn/not",args:"@/fData/title"},htmlFor:{$:"^/fn/getProp",args:["id"],update:"build"},"className/fform-title-viewer":"@/params/viewer"}}},string:{$_ref:"^/sets/simple",Main:{type:"text"}},textarea:{$_ref:"^/sets/simple",Main:{type:"textarea",$_viewerProps:{className:{"fform-viewer":!1,"fform-viewer-inverted":!0}}},Title:{$_maps:{"className/fform-title-viewer-inverted":"@/params/viewer"}}},integer:{$_ref:"^/sets/simple",Main:{type:"number",onChange:{$:"^/fn/eventValue|parseNumber|setValue",args:["${0}",!0,0]}}},integerNull:{$_ref:"^/sets/integer",Main:{onChange:{args:{2:null}}}},number:{$_ref:"^/sets/integer",Main:{onChange:{args:{1:!1}},step:"any"}},numberNull:{$_ref:"^/sets/integerNull",Main:{onChange:{args:{1:!1,2:null}},step:"any"}},null:{$_ref:"^/sets/simple",Main:!1},boolean:{$_ref:"^/sets/simple",Main:{type:"checkbox",_$useTag:"^/widgets/Checkbox",onChange:{$:"^/fn/eventChecked|setValue|liveUpdate"}}},booleanNull:{$_ref:"^/sets/boolean",Main:{$tags:{input:"^/widgets/CheckboxNull",_$skipKeys:["input"]},onChange:{$:"^/fn/parseTristate|setValue|liveUpdate",args:["${0}"]}}},booleanLeft:{$_ref:"^/sets/boolean"},booleanNullLeft:{$_ref:"^/sets/booleanNull"},object:{$_ref:"^/sets/base",Main:{_$widget:"^/widgets/Section",_$cx:"^/_$cx",$_reactRef:!0,uniqKey:"params/uniqKey",LayoutDefaultClass:"layout",LayoutDefaultWidget:"div",$_viewerProps:{$_ref:"^/sets/simple/Main/$_viewerProps"},$_maps:{length:"@/length",oneOf:"@/oneOf",branchKeys:"@/branchKeys",strictLayout:"@/fData/strictLayout",isArray:{$:"^/fn/equal",args:["@/fData/type","array"]},$branch:{$:"^/fn/getProp",args:"$branch",update:"every"},arrayStart:{$:"^/fn/getArrayStart",args:[],update:"build"},$FField:{$:"^/fn/getProp",args:[],update:"build"},FFormApi:{$:"^/fn/getProp",args:"props/pFForm/api",update:"build"},id:{$:"^/fn/getProp",args:"props/id",update:"build"},name:{$:"^/fn/getProp",args:"props/name",update:"build"},$layout:{$:"^/fn/getProp",args:"_layout",update:"build"}}},Title:{_$widget:"^/widgets/Generic",_$cx:"^/_$cx",_$useTag:"legend",children:[{$_ref:"^/sets/simple/Title",_$useTag:"span"},{$_ref:"^/parts/ArrayAddButton"},{$_ref:"^/parts/ArrayDelButton"},{$_ref:"^/parts/ArrayEmpty"}]},Wrapper:{_$useTag:"fieldset"}},array:{$_ref:"^/sets/object"},select:{$_ref:"^/sets/simple",Main:{type:"select",children:[],onChange:{$:"^/fn/eventValue|liveUpdate|setValue"},$_maps:{children:{$:"^/fn/arrayOfEnum",args:["@/fData/enum","@/fData/enumExten",{_$widget:"option"}],replace:!1},label:!1}}},multiselect:{$_ref:"^/sets/select",Main:{multiple:!0,onChange:{$:"^/fn/eventMultiple|setValue|liveUpdate"}}},radio:{$_ref:"^/sets/base",Title:{$_ref:"^/sets/simple/Title"},Main:{$_ref:"^/parts/RadioSelector",$_reactRef:!0,$_viewerProps:{$_ref:"^/sets/simple/Main/$_viewerProps"},$_maps:{value:"@/value",viewer:"@/params/viewer",children:[{args:["@/fData/enum","@/fData/enumExten",{onChange:{args:["${0}"]}},!0]},{args:["@/fData/enum","@/value"]},{args:{0:"@/fData/enum"}}]}}},checkboxes:{$_ref:"^/sets/radio",Main:{$_maps:{children:{0:{args:{2:{type:"checkbox",onChange:{$:"^/fn/eventCheckboxes|setValue|liveUpdate"}},5:"[]"}}}}}},$radioNull:{Main:{$_maps:{children:{0:{args:{3:{onClick:"^/fn/eventValue|radioClear|liveUpdate"}}}}}}},$radioEmpty:{Main:{$_maps:{children:{0:{args:{3:{onClick:{$:"^/fn/eventValue|radioClear|liveUpdate",args:["${0}",""]}}}}}}}},$autowidth:{Autowidth:{$_ref:"^/parts/Autowidth"},Wrapper:{className:{"fform-shrink":!0}}},$noArrayControls:{Wrapper:{$_maps:{arrayItem:!1}}},$noArrayButtons:{Title:{$_ref:"^/sets/simple/Title"}},$inlineItems:{Main:{className:{"fform-inline":!0}}},$inlineTitle:{Wrapper:{wrapperClassName:{"fform-inline":!0}}},$inlineLayout:{Main:{LayoutDefaultClass:{"fform-inline":!0}}},$inlineArrayControls:{Wrapper:{ArrayItemBody:{className:{"fform-inline":!0}}}},$arrayControls3but:{Wrapper:{ArrayItemMenu:{buttons:["up","down","del"]}}},$arrayControlsDelOnly:{Wrapper:{ArrayItemMenu:{buttons:["del"]}}},$noTitle:{Title:!1},$noMessage:{Message:!1},$shrink:{Wrapper:{className:{"fform-shrink":!0}}},$expand:{Wrapper:{className:{"fform-expand":!0}}},$password:{Main:{type:"password"}},$:"^/$",$C:"^/$C",$S:"^/$S"},fn:{api:function(e){for(var t,r=arguments.length,n=Array(1<r?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];(t=this.api)[e].apply(t,n)},format:function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return[r.reduce((function(e,t,r){return e.replace("{"+r+"}",t)}),e)]},iif:function(e,t,r){for(var n=arguments.length,a=Array(3<n?n-3:0),i=3;i<n;i++)a[i-3]=arguments[i];return[e?t:r].concat(a)},not:function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return[!e].concat(r)},equal:function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return[r.some((function(t){return e===t}))]},equalAll:function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return[r.every((function(t){return e===t}))]},or:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return[t.some(Boolean)]},and:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return[t.every(Boolean)]},getArrayStart:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return[Object(A.arrayStart)(this.schemaPart)].concat(t)},getProp:function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return[Object(I.getIn)(this,Object(A.normalizePath)(e))].concat(r)},eventValue:function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return[e.target.value].concat(r)},eventChecked:function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return[e.target.checked].concat(r)},parseTristate:function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return[""===e?null:e].concat(r)},eventMultiple:function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return[Array.from(e.target.options).filter((function(e){return e.selected})).map((function(e){return e.value}))].concat(r)},parseNumber:function(e){for(var t=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length,a=Array(3<n?n-3:0),i=3;i<n;i++)a[i-3]=arguments[i];return[""===e?r:(t?parseInt:parseFloat)(e)].concat(a)},setValue:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.api.setValue(e,t);for(var r=arguments.length,n=Array(2<r?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];return n},focus:function(){this.api.set("/@/active",this.path,{noValidation:!0});for(var e=arguments.length,t=Array(1<e?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return t},blur:function(){var e;this.api.set("./",-1,(e={},E()(e,A.SymData,["status","untouched"]),E()(e,"noValidation",!0),E()(e,"macros","setStatus"),e)),this.api.set("/@/active",void 0,{noValidation:!0}),this._updateCachedValue(!0),this.liveValidate||this.api.validate("./");for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return r},liveUpdate:function(){this._forceUpd=!0;for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t},eventCheckboxes:function(e){var t=(this.getData().value||[]).slice(),r=e.target.value,n=t.indexOf(r),a=t.slice();-1==n?a.push(r):a.splice(n,1);var i=this.getData().fData.enum;a.sort((function(e,t){return i.indexOf(e)>i.indexOf(t)}));for(var s=arguments.length,o=Array(1<s?s-1:0),l=1;l<s;l++)o[l-1]=arguments[l];return[a].concat(o)},radioClear:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;this.api.getValue()===e&&this.api.setValue(t);for(var r=arguments.length,n=Array(2<r?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];return n},messages:function(e){var t=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=r.className,a=void 0===n?{}:n,i=f()(r,["className"]);return[Object(I.objKeys)(e||[]).map((function(r){var n=e[r],s=n.norender,o=n.texts,l=n.className,c=void 0===l?{}:l,u=f()(n,["norender","texts","className"]),p=[];return Object(I.objKeys)(o).forEach((function(e){return Object(I.toArray)(o[e]).forEach((function(e){Object(A.isElemRef)(e)&&(e=t._resolver(e)),Object(I.isString)(e)&&Object(I.isString)(p[p.length-1])?p.push({_$widget:"br"},e):p.push(e)}))})),s||!p.length?null:D({children:p},i,{className:D(E()({},"fform-message-priority-"+r,!0),a,{},c)},u)}))]},arrayOfEnum:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},a=3<arguments.length?arguments[3]:void 0;return[t.map((function(t){var i=Z(r,t);return D({key:t,children:[i.label||t],name:a&&e.name+(!0===a?"":a)},i,{},n,{value:t})}))]},enumInputs:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};return[t.map((function(t){var i=Z(r,t),s=i.label,o=f()(i,["label"]);return D({key:t,name:name&&e.props.name+(!0===a.name?"":a.name)},Object(I.merge)(n,o),{placeholder:s||t,value:t})}))]},enumInputProps:function(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t={},r=arguments.length,n=Array(1<r?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];for(var i=0;i<n.length;i+=2)t[n[i]]=n[i+1];return[e.map((function(){return t}))]},enumInputValue:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length?arguments[1]:void 0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"checked";return t=Object(I.toArray)(t),[e.map((function(e){return E()({},r,!!~t.indexOf(e))}))]},setInputPriority:function(e){return"number"==typeof e?["fform-input-priority-"+e]:[!1]}},parts:{Message:{_$widget:"^/widgets/Generic",_$cx:"^/_$cx",children:[],$_maps:{children:{$:"^/fn/messages",args:["@/messages",{}]},"className/fform-hidden":{$:"^/fn/or",args:["@/params/viewer","!@/status/touched"]}}},RadioSelector:{_$widget:"^/widgets/Input",_$cx:"^/_$cx",_$useTag:"div",type:"notInput",children:[],$_maps:{value:"@/selector/value",children:[{$:"^/fn/enumInputs",args:["@/selector/enum","@/selector/enumExten",{_$widget:"^/widgets/Checkbox",type:"radio",onChange:{$:"^/fn/eventValue|setValue|liveUpdate",args:["${0}",{path:"./@/selector/value"}]},onBlur:"^/sets/simple/Main/onBlur",onFocus:"^/sets/simple/Main/onFocus"},{name:!0}],replace:!1},{$:"^/fn/enumInputValue",args:["@/selector/enum","@/selector/value"],replace:!1},{$:"^/fn/enumInputProps",args:["@/selector/enum","readOnly","@/params/readonly","disabled","@/params/disabled"],replace:!1}]}},Autowidth:{_$widget:"^/widgets/Autowidth",addWidth:35,minWidth:60,$_maps:{value:"value",placeholder:"@/params/placeholder","className/fform-hidden":"@/params/hidden",$FField:{$:"^/fn/getProp",args:[],update:"build"}}},Button:{_$widget:"button",type:"button",$_maps:{"className/fform-hidden":"@/params/viewer",disabled:"@/params/disabled"}},Submit:{$_ref:"^/parts/Button",type:"submit",children:["Submit"]},Reset:{$_ref:"^/parts/Button",type:"reset",children:["Reset"],$_maps:{disabled:"@/status/pristine"}},ArrayAddButton:{$_ref:"^/parts/Button",children:["+"],onClick:{$:"^/fn/api",args:["arrayAdd","./",1]},$_maps:{"className/fform-hidden":{$:"^/fn/or",args:["@/params/viewer",{$:"^/fn/equal | ^/fn/not",args:["@/fData/type","array"]}]},disabled:{$:"^/fn/or",args:["!@/fData/canAdd","@params/disabled"]}}},ArrayDelButton:{$_ref:"^/parts/ArrayAddButton",children:["-"],onClick:{args:{2:-1}},$_maps:{disabled:{$:"^/fn/or",args:["!@/length","@params/disabled"]}}},ArrayEmpty:{children:"(array is empty)",_$widget:"span",$_maps:{"className/fform-hidden":{$:"^/fn/equal | ^/fn/not",args:["@/length",0]}}},ArrayItemMenu:{_$widget:"^/widgets/ItemMenu",_$cx:"^/_$cx",_$buttonDefaults:"^/parts/Button",buttons:["first","last","up","down","del"],onClick:{$:"^/fn/api",args:["arrayItemOps","./","${0}"]},buttonsProps:{first:{disabledCheck:"canUp"},last:{disabledCheck:"canDown"},up:{disabledCheck:"canUp"},down:{disabledCheck:"canDown"},del:{disabledCheck:"canDel"}},$_maps:{arrayItem:"@/arrayItem","className/fform-button-viewer":"@/params/viewer",disabled:"@params/disabled"}},Expander:{_$widget:"div",className:{"fform-expand":!0}}},_$cx:te},E()(F,M,te),E()(F,"$",(function(e,t){var r=t.map((function(t){if(t=e._$shorts[t]||t,Object(I.isString)(t)&&2==t.length){var r=e._$shorts[t[0]],n=e._$shorts[t[1]];return r&&n&&(t=Object(I.isArray)(n)?n.map((function(e){return r+e})):r+n),Object(I.toArray)(t).join(",")}return t})),n=Object(A.multiplePath)(r),a={};return Object(I.objKeys)(n).forEach((function(e){return Object(I.setIn)(a,n[e].pop(),n[e])})),a})),E()(F,"$C",(function(e,t){var r=(t=t.slice()).pop(),n="!"!==r[0];return n||(r=r.substr(1)),Object(I.push2array)(t,"className",r,n),e.$(e,t)})),E()(F,"$S",(function(e,t){t=t.slice();var r=[];return r.unshift(t.pop()),r.unshift(t.pop()),Object(I.push2array)(t,"style",r),e.$(e,t)})),E()(F,"_$shorts",{W:"Wrapper",M:"Main",B:"Body",T:"Title",MSG:"Message",m:"margin",p:"padding",t:"Top",b:"Bottom",l:"Left",r:"Right",x:["Left","Right"],y:["Top","Bottom"],fg:"flexGrow",fs:"flexShirnk",fd:"flexDirection",fw:"flexWrap",fb:"flexBasis",minW:"minWidth",minH:"minHeight",maxW:"maxWidth",maxH:"maxHeight",as:"alignSelf",ai:"alignItems",jc:"justifyContent"}),F)},function(e,t){e.exports=function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}},function(e,t){e.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(e,t,r){var n=r(7);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=n(e)););return e}},function(e,t){e.exports=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}},function(e,t){function r(t,n){return e.exports=r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(t,n)}e.exports=r}])}));
//# sourceMappingURL=fform.min.js.map