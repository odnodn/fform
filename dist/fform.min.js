var e,t;e=window,t=function(e){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=3)}([function(e,t,r){"use strict";function n(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return void 0===e};t.isUndefined=i,t.isNumber=function(e){return"number"==typeof e},t.isInteger=function(e){return"number"==typeof e&&(Math.floor(e)===e||9007199254740992<e||e<-9007199254740992)},t.isString=function(e){return"string"==typeof e};var o=Array.isArray;t.isArray=o,t.isObject=function(e){return u(e)&&!o(e)};var s=function(e){return"function"==typeof e};function u(e){return e&&"object"===a(e)&&"[object RegExp]"!==Object.prototype.toString.call(e)&&"[object Date]"!==Object.prototype.toString.call(e)}t.isFunction=s,t.toArray=function(e){return o(e)?e:[e]},t.deArray=function(e,t){return!t&&o(e)&&1==e.length?e[0]:e},t.isMergeable=u;var l=Object.keys;t.objKeys=l;var c=function(e){return l(e).concat(Object.getOwnPropertySymbols(e))};t.objKeysNSymb=c;var f="function"==typeof Symbol&&"symbol"===a(Symbol.iterator)?function(e){return a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":a(e)};function p(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function d(e){for(var t=0;t<(arguments.length<=1?0:arguments.length-1);t++)o(t+1<1||arguments.length<=t+1?void 0:arguments[t+1])?e.push.apply(e,n(t+1<1||arguments.length<=t+1?void 0:arguments[t+1])):e.push(t+1<1||arguments.length<=t+1?void 0:arguments[t+1]);return e}function h(){for(var e,t=[],r=0;r<arguments.length-1;r++)d(t,r<0||arguments.length<=r?void 0:arguments[r]);var n=(e=arguments.length-1)<0||arguments.length<=e?void 0:arguments[e];return t.length?g({},n,t):n}function v(e){if(0<(arguments.length<=1?0:arguments.length-1))for(var t=0;t<(arguments.length<=1?0:arguments.length-1);t++)for(var r=o(t+1<1||arguments.length<=t+1?void 0:arguments[t+1])?t+1<1||arguments.length<=t+1?void 0:arguments[t+1]:[t+1<1||arguments.length<=t+1?void 0:arguments[t+1]],n=0;n<r.length;n++)if(!i(r[n])){try{if(!e.hasOwnProperty(r[n]))return!1}catch(e){return!1}e=e[r[n]]}return!0}function g(e,t){var r,n=e;if(0<(arguments.length<=2?0:arguments.length-2))for(var a=0;a<(arguments.length<=2?0:arguments.length-2);a++)for(var s=o(a+2<2||arguments.length<=a+2?void 0:arguments[a+2])?a+2<2||arguments.length<=a+2?void 0:arguments[a+2]:[a+2<2||arguments.length<=a+2?void 0:arguments[a+2]],l=0;l<s.length;l++)i(s[l])||(i(r)||(u(n[r])||(n[r]={}),n=n[r]),r=s[l]);return i(r)?t:(n[r]=t,e)}function m(e){for(var t=e,r=0;r<(arguments.length<=1?0:arguments.length-1);r++){var n=r+1<1||arguments.length<=r+1?void 0:arguments[r+1];"function"==typeof n&&(n=n(t)),o(n)||(n=[n]);for(var a=0;a<n.length;a++){if(!u(t))return;i(n[a])||(t=t[n[a]])}}return t}function y(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=r.noSymbol?l:c,a=r.SymbolDelete,i=r.del,f=r.diff,d=r.replace,h=r.arrays,v=d;return"function"!=typeof v&&(v=u(d)?function(e){return m(d,e)}:function(){return!1}),!0===d||!0===v([],e,t)?{state:t,changes:e!==t?t:void 0}:(s(h)||(h=void 0),function e(t,r){var s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],l={},c=o(r);u(t)||o(t=c?[]:{})&&(l.length=0);var d=o(t);if(!u(r))return{state:t};d&&c&&(h&&(r=h(t,r,s)),t.length!=r.length&&(l.length=r.length));var g=n(t);if(0==g.length&&!i){if(!d&&!c)return n(r).length?{state:r,changes:r}:{state:t};if(d&&c)return t.length==r.length&&0==r.length?{state:t}:n(r).length||r.length!==t.length?{state:r,changes:r}:{state:t}}var m=n(r),y={},_=d?[]:{};f&&g.forEach(function(e){~m.indexOf(e)||(l[e]=a)}),m.forEach(function(n){if(i&&r[n]===a)t.hasOwnProperty(n)&&(l[n]=a);else{var o=s.concat(n);if(u(r[n])&&u(t[n])&&!0!==v(o,t[n],r[n])){if(t[n]!==r[n]){var c=e(t[n],r[n],o);c.changes&&(y[n]=c)}}else t.hasOwnProperty(n)&&p(t[n],r[n])||(l[n]=r[n])}});var b=n(y),$=n(l);return 0==$.length&&0==b.length?{state:t}:(Object.assign(_,t),$.forEach(function(e){i&&l[e]===a||f&&!r.hasOwnProperty(e)?delete _[e]:_[e]=l[e]}),b.forEach(function(e){_[e]=y[e].state,l[e]=y[e].changes}),{state:_,changes:l})}(e,t))}t.isEqual=function e(t,r){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(p(t,r))return!0;if("object"!==(i(t)?"undefined":f(t))||null===t||"object"!==(i(r)?"undefined":f(r))||null===r)return!1;var a=n.symbol?c:l,o=a(t),s=a(r);if(o.length!==s.length)return!1;for(var u=n.skipKeys,d=void 0===u?[]:u,h=n.deepKeys,v=void 0===h?[]:h,g=0;g<o.length;g++)if(!~d.indexOf(o[g]))if(n.deep||~v.indexOf(o[g])){if(!e(t[o[g]],r[o[g]],n))return!1}else if(!r.hasOwnProperty(o[g])||!p(t[o[g]],r[o[g]]))return!1;return!0},t.asNumber=function(e){if(""===e)return null;if(/\.$/.test(e))return e;if(/\.0$/.test(e))return e;var t=Number(e),r="number"==typeof t&&!Number.isNaN(t);return/\.\d*0$/.test(e)?e:r?t:e},t.memoize=function(e){return e.cache=new Map,function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];for(var a=[r.length].concat(r),i=e.cache,o=a.pop(),s=0;s<a.length;s++)i.has(a[s])||i.set(a[s],new Map),i=i.get(a[s]);return i.has(o)||i.set(o,e.apply(this,r)),i.get(o)}},t.push2array=d,t.moveArrayElems=function(e,t,r){var n=e.length;n&&(t=(t%n+n)%n,r=(r%n+n)%n);for(var a=e[t],i=t;i<r;i++)e[i]=e[i+1];for(var o=t;r<o;o--)e[o]=e[o-1];return e[r]=a,e},t.makeSlice=h,t.hasIn=v,t.setIn=g,t.delIn=function e(t,r){if(!r.length)return t;var n="string"==typeof r[0]?r[0].split(","):[r[0]],a=r.slice(1);if(a.length)n.forEach(function(r){var n;u(t[r])&&(n=e(t[r],a)),n&&n!==t[r]&&(t=_(_(t,h(r,void 0)),h(r,n)))});else{for(var i=0;i<n.length;i++)if(t.hasOwnProperty(n[i])){t=Object.assign({},t);break}for(var o=0;o<n.length;o++)delete t[n[o]]}return t},t.getIn=m,t.getCreateIn=function(e,t){for(var r=arguments.length,n=new Array(2<r?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];return v.apply(void 0,[e].concat(n))||g.apply(void 0,[e,t].concat(n)),m.apply(void 0,[e].concat(n))},t.mergeState=y;var _=function(e,t){return y(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).state};(t.merge=_).all=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return 0==t.length?e:t.reduce(function(e,t){return _(e,t,r)},e)}},function(e,t,r){"use strict";function n(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var o=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r};Object.defineProperty(t,"__esModule",{value:!0});var s=r(0),u=r(0),l=r(2),c=Symbol.for("FFormData");t.SymData=c;var f=Symbol.for("FFormDataMapTree"),p=Symbol.for("FFormDataMap");t.SymDataMap=p;var d=Symbol.for("FFormReset");t.SymReset=d;var h=Symbol.for("FFormClear");t.SymClear=h;var v=void 0;t.SymDelete=v;var g=["null","boolean","integer","number","string","array","object"];(t.types=g).any=function(){return!0},g.null=function(e){return null===e},g.boolean=function(e){return"boolean"==typeof e},g.number=u.isNumber,g.integer=u.isInteger,g.string=u.isString,g.array=u.isArray,g.object=u.isObject,g.empty={any:null,null:null,boolean:!1,number:0,integer:0,string:"",array:Object.freeze([]),object:Object.freeze({})},g.detect=function(e){for(var t=0;t<g.length;t++)if(g[g[t]](e))return g[t]};var m={};function y(e){var t=[];if(F(e))return t;if("array"==e[c].fData.type)for(var r=0;r<s.getIn(e,c,"length");r++)t.push(r.toString());else t=s.objKeys(e).filter(Boolean);return t}m.array=function(e,t,r,n){var i=n,l=i.path,f=(i.macros,i.value,c),p=(i[f],o(i,["path","macros","value","symbol"===a(f)?f:f+""])),d=Q([r.update,e],l,c,"length");if(!u.isNumber(d))return e;if(u.isArray(n.value)){for(var h=[],v={},g=0;g<n.value.length;g++)h[d+g]=n.value[g],v[d+g]=s.getIn(n.replace,g);return h.length=d+n.value.length,K(e,r,h,v,l,n.setOneOf)}return(d+=n.value||1)<0&&(d=0),q(e,r,Y(l,["length"],d,!1,p))},m.arrayItem=function(e,t,r,n){var a=n.path,o=n.op,l=n.value||0,p=parseInt(a.pop()),d=p,v=O(S(t,a,b(e))),g=Q([r.update,e],a,c,"length")-1;"up"==o&&d--,"down"==o&&d++,"first"==o&&(d=v),"last"!=o&&"del"!=o||(d=g),"move"==o&&(d=l),"shift"==o&&(d+=l),d<v&&(d=v),g<d&&(d=g);var m={},y={},_={},$=[];$[0]=s.getIn(r.update,a),$[1]=s.getIn(r.update,c,"current",a),$[2]=s.getIn(r.replace,a),$[3]=s.getIn(r.replace,c,"current",a);for(var w=function(t){m[t]=s.getIn(e,a,t),y[t]=m[t][c].arrayItem,_[t]=s.getIn(e,c,"current",a,t),$.forEach(function(e){return u.isMergeable(e)&&!e.hasOwnProperty(t)&&(e[t]=h)})},j=Math.min(p,d);j<=Math.max(p,d);j++)w(j);m=s.moveArrayElems(m,p,d),_=s.moveArrayElems(_,p,d);var E=function e(t){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=s.getIn(t,f,c)||[],a=n.map(function(e){return s.merge(e,{emitter:r})}),o=n.length?i({},f,i({},c,[])):void 0;return s.objKeys(t).forEach(function(i){var u;t[i]&&(u=e(t[i],r.concat(i)),s.push2array(n,u.maps2disable),s.push2array(a,u.maps2enable),u.clearBinded&&(o||(o={}),o[i]=u.clearBinded))}),{maps2disable:n,maps2enable:a,clearBinded:o}}(m,a),A=E.maps2disable,I=E.maps2enable,x=E.clearBinded;return x&&(m=s.merge(m,x)),$.forEach(function(e){if(u.isMergeable(e)){s.moveArrayElems(e,p,d);for(var t=Math.min(p,d);t<=Math.max(p,d);t++)e[t]===h&&delete e[t]}}),s.objKeys(m).forEach(function(e){m[e]=s.merge(m[e],s.makeSlice(c,"arrayItem",y[e]),{replace:s.makeSlice(c,"arrayItem",!0)})}),e=s.merge(e,s.makeSlice(a,m),{replace:G(n.path.length+1)}),e=s.merge(e,s.makeSlice(c,"current",a,_),{replace:G(n.path.length+3)}),"del"==o&&(e=q(e,r,Y(a,["length"],g))),e=z(e=z(e=L(e,r),r,A,!0),r,I)},m.switch=function(e,t,r,n){var a=n[c]||[];return ce(s.makeSlice(a,n.value)).forEach(function(a){return e=function e(t,r,n,a){var i=s.getIn(t,a.path),o=y(i);if(a.value==d&&"status"==a[c][0]){var u=Object.assign({},a);u.value="untouched"==a[c][1]?F(i)?1:o.length:0,t=q(t,n,u)}else t=q(t,n,a);return o.forEach(function(i){return t=e(t,r,n,s.merge(a,{path:a.path.concat(i)}))}),t}(e,t,r,Y(n.path,a,a.pop()))}),e},m.setExtraStatus=function(e,t,r,n){var a=n[c]||[],i=Q([r.update,e],n.path,c,a),o=0<n.value;return!i==o&&(e=q(e,r,Y(n.path,a,o)),e=m.setStatus(e,t,r,Y(n.path,["status",a[a.length-1]],o?1:-1))),e},m.setStatus=function(e,t,r,n){var a=n[c]||[];if(2<a.length)return m.setExtraStatus(e,t,r,n);var i=a[1];if(!i)return e;if("valid"==i||"pristine"==i||"touched"==i)throw new Error('Setting "'+i+'" directly is not allowed');var o=Q([r.update,e],n.path,c,a),s=F(e,n.path);if("untouched"==i&&0==o&&!s)return e;var u,l=o+n.value;return s&&1<l&&(l=1),l<0&&(l=0),e=q(e,r,Y(n.path,["status",i],l)),0==(u=n.path).length||1==u.length&&"#"==u[0]||!o==!l||(e=m.setStatus(e,t,r,Y(n.path.slice(0,-1),a,0<l?1:-1))),e},m.setCurrent=function(e,t,r,n){return K(e,r,n.value,n.replace,n.path,n.setOneOf)},m.setOneOf=function(e,t,r,n){if(s.getIn(e,n.path,c,"oneOf")==n.value)return u.isUndefined(n.setValue)||(e=K(e,r,n.setValue,!1,n.path)),e;n.macros;var a=o(n,["macros"]);return a[c]=["oneOf"],u.isUndefined(a.setValue)&&(e=L(e,r),a.setValue=s.getIn(e,c,"current",n.path)),q(e,r,a)},t.branchKeys=y;var _=s.memoize(function(e){return{}});function b(e){return function(t){var r=s.getIn(u.isFunction(e)?e():e,t,c);return{oneOf:s.getIn(r,"oneOf"),type:s.getIn(r,"fData","type")}}}function $(e,t){"function"==typeof e&&(e=e());var r={},n=r;s.setIn(n,s.getIn(e,c,"oneOf"),c,"oneOf"),s.setIn(n,s.getIn(e,c,"fData","type"),c,"type");for(var a=0;a<t.length;a++)u.isUndefined(t[a])||""===t[a]||(n[t[a]]={},n=n[t[a]],e=s.getIn(e,t[a]),s.setIn(n,s.getIn(e,c,"oneOf"),c,"oneOf"),s.setIn(n,s.getIn(e,c,"fData","type"),c,"type"));var i=function(e,t){return u.isUndefined(t)?s.getIn(r,e,c):s.setIn(r,t,e,c)};return i._canSet=!0,i}t.oneOfFromState=b;var w=s.memoize(function(e){return{_compiled:!0,oneOf:e,_oneOfSelector:de(function(){return le(this.path).pop()%e.length},{noStrictArrayResult:!0})}});function S(e,t,r,n){function a(e,r){var n=[];if(r.items){if(!u.isArray(r.items))return r.items;n=r.items}if(e<n.length)return n[e];if(!1!==r.additionalItems)return r.additionalItems&&!0!==r.additionalItems?r.additionalItems:w(n);throw new Error(h+t.join("/"))}function i(e,t){var r=le(t);if("#"==t[0])return s.getIn(e,r);throw new Error("Can only ref to #")}function l(t){if(t.$ref||t.allOf||t.oneOf)if(m.get(t))t=m.get(t);else{var r=t;if((t=c(e,t)).oneOf){var n=t.oneOf,a=o(t,["oneOf"]);t=n.map(function(t,r){return s.merge.all(c(e,t),[a,{_oneOfIndex:r}],{array:"replace"})})}m.set(r,t)}return t}function c(e,t){if((t=function(e,t){for(;t.$ref;)t=i(e,t.$ref);return t}(e,t)).allOf){for(var r,n=t.allOf,a=o(t,["allOf"]),u=0;u<n.length;u++)r=s.merge(r,c(e,n[u]),{array:"replace"});t=s.merge(r,a)}return t}function f(e,t,r){var n=0,a=g.detect(t);if(a){e=s.toArray(e);for(var i=0;i<e.length;i++){var o=e[i].type;if(!o||s.toArray(o).some(function(e){return e===a})){n=i;break}}e[n]._oneOfSelector&&(n=ge.call({path:ue(r)},e[n]._oneOfSelector,t),u.isArray(n)&&(n=n[0]))}return{oneOf:n,type:a}}for(var p=u.isFunction(r)?r:void 0,d=u.isFunction(r)?void 0:r,h="Schema path not found: ",v=e,m=s.getCreateIn(_(e),new Map,"combinedSchemas"),y="#"==t[0]?1:0;y<t.length;y++){if(!v)throw new Error(h+t.join("/"));v=l(v);var b=t.slice(0,y),$=p?p(b):f(v,s.getIn(d,b),b),S=$.oneOf,O=$.type;if(u.isArray(v)&&(v=v[S||0]),u.isUndefined(O)&&(O=s.toArray(v.type||"null")[0]),"array"==O){if(isNaN(parseInt(t[y])))throw new Error(h+t.join("/"));v=a(t[y],v)}else{if(!v.properties||!v.properties[t[y]])throw new Error(h+t.join("/"));v=v.properties[t[y]]}}if(v=l(v),n)return v;if(u.isArray(v)){var j=p?p(t):f(v,s.getIn(d,t),t);S=j.oneOf,O=j.type,v=v[S||0]}return v}t.getSchemaPart=S;var O=s.memoize(function(e){return u.isArray(e.items)?!1===e.additionalItems?e.items.length:"object"===a(e.additionalItems)?e.items.length:0==e.items.length?0:e.items.length-1:0});t.arrayStart=O;var j={invalid:0,dirty:0,untouched:1,pending:0,valid:!0,touched:!1,pristine:!0},E=s.memoize(function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:e.default,a=e._params,i=void 0===a?{}:a,o=e._data,l=void 0===o?{}:o,c=Object.assign({params:i},l);u.isObject(c.messages)||(c.messages={}),u.isUndefined(n)&&(n=g.empty[r||"any"]),c.oneOf=t,c.status=j,u.isObject(c.fData)||(c.fData={});var f=c.fData;if(f.type=r,f.required=e.required,f.title=e.title,f.placeholder=e._placeholder,f.additionalProperties=e.additionalProperties,f.strictLayout=e._strictLayout,e.enum&&(f.enum=e.enum),e._enumExten&&(f.enumExten=e._enumExten),u.isArray(e._enumExten)&&u.isArray(e.enum)){var p={};f.enumExten=f.enumExten.map(function(e){return u.isString(e)?{label:e}:e}),f.enum.forEach(function(e,t){return p[e]=f.enumExten[t]}),f.enumExten=p}else if(e._enumExten&&!f.enum)if(u.isArray(f.enumExten)){var d={},h=[];f.enumExten.forEach(function(e){u.isString(e)?(d[e]={label:e},h.push(e)):u.isObject(e)&&(u.isUndefined(e.value)?u.isUndefined(e.label)||(d[e.label]=e,h.push(e.label)):(u.isUndefined(e.label)&&(e=Object.assign({},e,{label:e.value})),d[e.value]=e,h.push(e.value)))}),f.enumExten=d,f.enum=h}else f.enum=s.objKeys(f.enumExten).filter(function(e){return f.enumExten[e]});e._oneOfSelector&&(f.oneOfSelector=!0),k(e,r)?c.value=n:delete c.value;var v=1;return"array"==r?(c.length=s.getIn(n,"length")||0,!u.isUndefined(e.minItems)&&c.length<e.minItems&&(c.length=e.minItems),c.fData.canAdd=x(e,c.length),v=c.length):"object"==r&&(v=s.objKeys(e.properties||{}).length),1!=v&&(c.status=Object.assign({},c.status,{untouched:v})),c});function A(){return Date.now().toString(36)+Math.random().toString(36)}function I(e,t){var r,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],a=3<arguments.length?arguments[3]:void 0,l={},f=[],d=(t(n)||{}).oneOf,h=s.toArray(S(e,n,t,!0));if(u.isUndefined(d)){var v=h[d||0]._oneOfSelector;if(v){var g=ge.call({path:ue(n)},v,a);u.isArray(g)&&(g=g[0]),d=g}}var m,y,_=D(h,a,d),b=_.schemaPart,$=_.oneOf,w=_.type;if(u.isUndefined(b)||!u.isUndefined(d)&&d!=$){console.info('Passed value: "'+a+'" is not supported by schema.type in path "'+n.join("/")+'" and oneOfIndex "'+d+'". Reset value to default.\n');var O=D(h,a=h[d||0].default,d);b=O.schemaPart,$=O.oneOf,w=O.type}if(s.push2array(f,(m=b._stateMaps||[],y=n,s.toArray(m).map(function(e){var t=e.from,r=e.to,n=o(e,["from","to"]);return n=!n.$||de(n),t&&r||(n=!1),{emitter:y,from:t,to:r,action:n}}))),l[p]={},l[c]=E(b,$,w,a),t(n,{oneOf:$,type:w}),l[c].hasOwnProperty("value"))r=l[c].value;else{if("array"==w){(r=[]).length=l[c].length;for(var j=0;j<r.length;j++){var x=I(e,t,n.concat(j),s.getIn(u.isUndefined(a)?b.default:a,j)),F=x.state,k=x.dataMap,M=x.defaultValues;r[j]=M,s.push2array(f,k),F=s.merge(F,i({},c,{arrayItem:P(b,j,r.length)}),{replace:i({},c,{ArrayItem:!0})}),F=s.merge(F,i({},c,{params:{uniqKey:A()}})),l[j]=F}}else if("object"==w){r=u.isObject(b.default)?Object.assign({},b.default):{},a&&!1===b.additionalProperties&&(a=T(b,a),r=T(b,r)),u.isObject(a)&&Object.assign(r,a);var R=l[c].fData.required;R=u.isArray(R)&&R.length&&R,s.objKeys(b.properties||{}).forEach(function(o){var p=I(e,t,n.concat(o),s.getIn(u.isUndefined(a)?b.default:a,o)),d=p.state,h=p.dataMap,v=p.defaultValues;r[o]=v,s.push2array(f,h),R&&~R.indexOf(o)&&(d=s.merge(d,i({},c,{fData:{required:!0}}))),l[o]=d})}a&&(r=s.merge(a,r,{replace:G(1)}))}return{state:l,defaultValues:r,dataMap:f}}function x(e,t){var r=O(e);return e.minItems,(!1!==e.additionalItems||t<r)&&t<(e.maxItems||1/0)}function P(e,t,r){var n={},a=O(e);return e.minItems,n.canUp=a<t,n.canDown=a<=t&&t<r-1,n.canDel=t>=Math.min(a,r-1),n}function F(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return s.hasIn.apply(s,[e].concat(r,[c,"value"]))}function k(e,t){return"array"!==t&&"object"!==t||s.getIn(e,"_simple")}function D(e,t,r){u.isArray(e)||(e=[e]);var n=e.map(function(e,t){return t});r&&s.moveArrayElems(n,r,0);for(var a=0;a<n.length;a++){var i=n[a],o=e[i].type||g;u.isArray(o)||(o=[o]);for(var l=void 0,c=u.isUndefined(t)?(l=!0)&&e[i].default:t,f=0;f<o.length;f++)if(g[o[f]](c)||u.isUndefined(c))return{schemaPart:e[i],oneOf:i,type:o[f]};if(l&&!u.isUndefined(e[i].default))throw new Error("Type of schema.default is not supported by schema.type")}return{}}function M(e,t,r,n){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0;return s.toArray(n).map(function(e){return"object"===a(e)?e:{group:i,data:e}}).forEach(function(n){var a=n.path,l=o(n,["path"]);if(a)a=se(a,r),e=M(e,t,a,l,i);else{var f=l.group,p=void 0===f?i:f,d=l.data,h=l.priority,v=void 0===h?0:h,g=o(l,["group","data","priority"]),m=s.getCreateIn(t.update,{},r,c,"messages",v);Object.assign(m,g),u.isObject(m.texts)||(m.texts={}),u.isArray(m.texts[p])||(m.texts[p]=[]),d&&s.push2array(m.texts[p],d)}}),e}function R(e){for(var t,r=s.objKeys(e||{}),n=0;n<r.length;n++){for(var a=s.getIn(e,r[n],"texts")||{},i=s.objKeys(a),o=0;o<i.length;o++)if(a[i[o]]&&a[i[o]].length){t=parseInt(r[n]);break}if(!u.isUndefined(t))break}return t}function C(e,t,r,n){return q(e=q(e,t,Y(r,["status","validation","invalid"],0===n?1:0,!0,{macros:"setStatus"})),t,Y(r,["status","priority"],n))}function N(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[],a=R(s.getIn(e,n,c,"messages"));return F(e=C(e,t,n,a),n)||s.objKeys(r).forEach(function(a){return e=N(e,t,r[a],n.concat(a))}),e}function U(e,t,r,n){var a,i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:[],o=5<arguments.length&&void 0!==arguments[5]&&arguments[5],l=t.api.schema;try{a=S(l,i,b(e))}catch(a){}if(!a||F(e,i)){var f=s.getIn(e,c,"current",i);u.isUndefined(r)&&(r=s.getIn(e,c,"default",i));var p=o||f!==r?1:-1,d=i,h=["status","dirty"];a||(d=d.slice(),h.push(d.pop(),h.pop())),e=q(e,t,Y(d,h,p,!1,{macros:"setStatus"}))}else{var v=s.objKeys(n||{});if("array"==a.type){~v.indexOf("length")||v.push("length");var g=y(s.getIn(e,i));v=v.filter(function(e){return isNaN(parseInt(e))||~g.indexOf(e)})}o=o||!u.isMergeable(r),v.forEach(function(a){return e=U(e,t,s.getIn(r,a),s.getIn(n,a),i.concat(a),o)})}return e}t.isSelfManaged=F,t.isSchemaSelfManaged=k,t.rehydrateState=function(e,t){var r=I(t.api.schema,b(e)).dataMap;return z(e,t,void 0===r?[]:r,null)},t.updateState=function(e){var t=this.updates,r=this.state,n=this.api,a=this.forceValidation,i=this.opts,o=this.promises,f=n.getState,p=(n.schema,n.UPDATABLE);r||(r=f());var d=r;t.forEach(function(e){return r=q(r,p,e)}),r=L(r,p);var h=s.getIn(d,c,"current");if(p.forceCheck&&(h=s.merge(h,p.forceCheck),p.forceCheck=void 0),d[c].inital!==r[c].inital){var v=s.mergeState(d[c].inital,r[c].inital,{diff:!0}).changes;r=U(r,p,r[c].inital,v)}var g,m=s.mergeState(h,s.getIn(r,c,"current"),{diff:!0}).changes;return m&&(r=U(r,p,r[c].inital,m)),r=L(r=function e(t,r,n){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[];return s.getIn(r.update,a,c,"status","pristine")?u.isMergeable(n)&&s.getIn(t,c,"current",a)!==n&&(s.setIn(r.update,n,c,"current",a),s.setIn(r.replace,!0,c,"current",a)):s.objKeys(s.getIn(r.update,a)).forEach(function(i){return e(t,r,s.getIn(n,i),a.concat(i))}),t}(r,p,r[c].inital),p),(g=i.noValidation?a:a?(ce(m).forEach(function(e){e.pop(),ae(a,!0,e)}),a):u.isMergeable(m)?m:!u.isUndefined(m))&&(r=function(e,t,r){var n=r.api,a=r.force,i=r.promises,o=n.JSONValidator,u=n.schema,f=n.getState,p=n.UPDATABLE,d=e[c].current,h=[],v=!0===a?d:a;if(!v||0==s.objKeys(v).length)return i.resolve(),i.vAsync.resolve(),e;o&&(e=function e(t,r){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],a=s.getIn(t,n,c,"fData","type");return a&&("object"!=a&&"array"!=a||r&&s.objKeys(r).forEach(function(a){return e(t,r[a],n.concat(a))}),B(p,{},!0,n,c,"messages","0","texts")),t}(e,v),o(d).forEach(function(t){return M(e,p,t[0],t[1])})),e=function e(t,r,n){var a,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[];try{a=S(u,i,b(t))}catch(a){return t}var o=F(t,i);o||n&&s.objKeys(n).forEach(function(a){return t=e(t,r[a],n[a],i.concat(a))});var l=a._validators;if(l){var c=J(p.api,ue(i));l.forEach(function(e){var n=[];c.updates=n;var a=ge.call(c,e,r);t=a&&a.then&&"function"==typeof a.then?(a.validatedValue=r,a.path=i,a.selfManaged=o,h.push(a),q(t,p,Y(i,["status","validation","pending"],1,!0,{macros:"setStatus"}))):M(t,p,i,a,1),n.length&&n.forEach(function(e){return t=q(t,p,e)}),c.updates=null})}return t}(e,d,v);var g=p.update;return e=L(e=N(e=L(e,p),p,g),p),i.resolve(),h.length?Promise.all(h).then(function(e){for(var r=f(),a=n.UPDATABLE,o=r[c].current,u=0;u<h.length;u++){var p=h[u],d=p.validatedValue,v=p.path;p.selfManaged,d==s.getIn(o,v)&&(r=q(r=M(r,a,v,e[u]||"",2),a,Y(v,["status","validation","pending"],0,!1,{macros:"setStatus"})))}var g=a.update;r=L(r=N(r=L(r,a),a,g),a),t({type:l.anSetState,state:r,api:n}),i.vAsync.resolve()}).catch(function(e){for(var r=f(),a=n.UPDATABLE,o=r[c].current,u=0;u<h.length;u++){var p=h[u],d=p.validatedValue,v=p.path;p.selfManaged,d==s.getIn(o,v)&&(r=q(r,a,Y(v,["status","validation","pending"],0,!1,{macros:"setStatus"})))}var g=a.update;r=L(r=N(r=L(r,a),a,g),a),t({type:l.anSetState,state:r,api:n}),i.vAsync.reject(e)}):i.vAsync.resolve(),e}(r,e,{force:g,api:n,opts:i,promises:o})),e({type:l.anSetState,state:r,api:n}),o};var V=s.memoize(function(e){return I(e,$({},[]))});function K(e,t,r,n){var a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:[],i=5<arguments.length?arguments[5]:void 0;if((r===d||u.isUndefined(r))&&(r=s.getIn(e,c,"inital",a)),(r===h||u.isUndefined(r))&&(r=s.getIn(e,c,"default",a)),s.getIn(e,c,"current",a)===r&&!s.hasIn(t.update,c,"current",a))return e;var o=t.api.schema,l=s.getIn(e,a);if(!l){if("length"==a[a.length-1]){var f=a.slice(0,-1);if("array"==s.getIn(e,f)[c].fData.type)return q(e,t,Y(f,["length"],r))}return q(e,t,Y([],["current"].concat(a),r,n))}l[c].fData.oneOfSelector&&J(t.api,ue(a));var p=l[c].fData.oneOfSelector,v=l[c].fData.type;if(!u.isUndefined(i)||p||!g[v||"any"](r)){var m=S(o,a,b(e),!0),_=l[c].oneOf;if(p){var $=m[_]._oneOfSelector;i=ge.call({path:ue(a)},$,r),u.isArray(i)&&(i=i[0])}var w=D(m,r,u.isUndefined(i)?_:i),O=w.schemaPart,j=w.oneOf,E=w.type;if(_!==j){if(O)return s.getIn(e,c,"current",a),k(O,E)||l[c].fData.type!==E||(r=s.merge(s.getIn(e,c,"current",a),r,{replace:n})),q(e,t,Y(a,["oneOf"],j,!1,{type:E,setValue:r}));console.warn('Type "'+g.detect(r)+'" not found in path ['+a.join("/")+"]")}}if(F(l))e=q(e,t,Y(a,["value"],r,n));else if(u.isMergeable(r)){"array"!=v||u.isUndefined(r.length)||(e=q(e,t,Y(a,["length"],r.length)),l=s.getIn(e,a));var A="object"==v&&!1===l[c].fData.additionalProperties;if(A&&(r=T(S(o,a,b(e)),r)),!0===n){var I=u.isArray(r)?[]:{};y(l).forEach(function(e){return I[e]=void 0}),r=Object.assign(I,r)}if(s.objKeys(r).forEach(function(i){return e=K(e,t,r[i],!0===n||s.getIn(n,i),a.concat(i))}),!0===n||A){e=L(e,t),l=s.getIn(e,a);var x=s.getIn(e,c,"current",a);y(l).forEach(function(e){return r[e]=x[e]}),e=q(e,t,Y([],["current"].concat(a),r,n))}}return e}function T(e,t){if("object"!==e.type||!1!==e.additionalProperties)return t;var r={},n=e.properties||{},a=s.objKeys(e.patternProperties||{}).map(function(e){return new RegExp(e)});return s.objKeys(t).forEach(function(e){(n[e]||a.some(function(t){return e.match(t)}))&&(r[e]=t[e])}),r}function B(e,t,r){for(var n=arguments.length,a=new Array(3<n?n-3:0),i=3;i<n;i++)a[i-3]=arguments[i];return ce(r).forEach(function(r){var n=r.pop();s.setIn.apply(s,[e,s.getIn(t,r),"update"].concat(a,[r])),n&&s.setIn.apply(s,[e,n,"replace"].concat(a,[r]))}),e}function L(e,t){return e=s.merge(e,t.update,{replace:t.replace}),t.update={},t.replace={},e}function q(e,t,r){if(!r)return e;var n,a,l,h=t.update,g=(t.replace,t.api.schema);if(l=r,u.isUndefined(s.getIn(l,c))||!u.isArray(l[c]))return a=t,Z(r,n=e).forEach(function(e){if(0===e.path.length&&"current"==e[c][0]&&(e.macros="setCurrent",e.path=e[c].slice(1),e[c]=[]),"value"==e[c][0])e.macros="setCurrent",e.path=e.path.concat(e[c].slice(1)),e[c]=[];else{if("status"==e[c][0])return void console.warn("Status should not be changed through StateApi. Update ignored.");"oneOf"==e[c][0]&&(e.macros="setOneOf")}n=q(n,a,e)}),n;if(r.macros){var y=m[r.macros];if(!y)throw new Error('"'+y+'" not found in macros');return y(e,g,t,r)}var _=r.value,w=r.path,O=r.replace,j=r[c];if(u.isFunction(_)&&(_=_(H(e,t)(w,c,j))),0!=w.length||"inital"!=j[0]&&"default"!=j[0]){if(u.isObject(_)&&(0==j.length&&(s.hasIn(_,"value")||s.hasIn(_,"status")||s.hasIn(_,"length")||s.hasIn(_,"oneOf"))||1==j.length&&"status"==j[0]))return function(e,t,r){var n=r.value,a=r.path,i=r.replace,u=r[c]||[];if(0==u.length){n.value,n.status,n.length,n.oneOf;var l=o(n,["value","status","length","oneOf"]);["value","status","length","oneOf"].forEach(function(r){s.hasIn(n,r)&&(e=q(e,t,Y(a,[r],n[r],s.getIn(i,r))))}),s.objKeys(l).length&&(e=q(e,t,Y(a,u,l,i)))}else s.objKeys(n).forEach(function(r){e=q(e,t,Y(a,u.concat(r),n[r],s.getIn(i,r)))});return e}(e,t,r);var E=s.getIn(e,w);if(!u.isObject(E))return e;if("value"==j[0]&&!s.hasIn(E,c,"value"))return m.setCurrent(e,g,t,{value:_,replace:O,path:w.concat(j.slice(1))});if(_===Q([t.update,e],w,c,j))return e;if(B(t,_,O,w,c,j),"value"==j[0])e=q(e,t,Y([],s.push2array(["current"],w,j.slice(1)),_,O));else if("messages"==j[0]){var k=R(H(e,t)(w,c,"messages"));e=C(e,t,w,k)}else if("length"==j[0]){e=q(e,t,Y([],s.push2array(["current"],w,j),_,O));var D=E[c].length;D=Math.max(D,0);for(var M=Math.max(_||0),N=$(e,w),U=[],V=[],K=D;K<M;K++){var T=w.concat(K);u.isUndefined(r.setOneOf)||N(T,{oneOf:r.setOneOf});var G=I(g,N,T),J=G.state,X=G.dataMap,ee=void 0===X?[]:X,te=G.defaultValues,re=Q([e,t.update],w,c,"status","untouched"),ne=i({},c,{params:{uniqKey:A()}});re||s.setIn(ne[c],{untouched:0,touched:!0},"status"),J=s.merge(J,ne),e=q(e=s.merge(e,s.setIn({},J,T),{replace:s.setIn({},!0,T)}),t,Y([],s.push2array(["current"],T),te,!0)),s.push2array(U,ee),re&&(e=m.setStatus(e,g,t,Y(w,["status","untouched"],1)))}for(var ie=function(r){var n=w.concat(r);s.push2array(V,s.getIn(e,n,f,c)||[]),["invalid","dirty","untouched","pending"].forEach(function(r){Q([h,e],n,c,"status",r)&&(e=m.setStatus(e,g,t,Y(w,["status",r],-1)))}),B(t,v,!0,n)},oe=M;oe<D;oe++)ie(oe);var se=S(g,w,b(e));s.setIn(h,x(se,M),w,c,"fData","canAdd");for(var ue=Math.max(Math.min(D,M)-1,0);ue<M;ue++)B(t,P(se,ue,M),!0,w,ue,c,"arrayItem");e=z(e=z(e=L(e,t),t,V,!0),t,U)}else if("status"==j[0]){var le,ce,fe=j[1];"invalid"==fe||"pending"==fe?(ce=Q([h,e],w,c,"status","pending")?null:!Q([h,e],w,c,"status","invalid"),le="valid"):"untouched"!=fe&&"dirty"!=fe||(ce=!Q([h,e],w,c,"status",fe),le="untouched"==fe?"touched":"pristine"),u.isUndefined(le)||(e=q(e,t,Y(w,["status",le],ce)))}else if("oneOf"==j[0]){var pe=s.getIn(e,w);if((s.getIn(pe,c,"oneOf")||0)!=s.getIn(t.update,w,c,"oneOf")||r.type&&r.type!=s.getIn(pe,c,"fData","type")){ae(t,d,"forceCheck",r.path),e=z(e=L(e,t),t,s.getIn(e,w,f,c)||[],!0);var de=I(g,$(e,w),w,r.setValue),he=de.state,ve=de.dataMap,ge=void 0===ve?[]:ve,me=(te=de.defaultValues,pe[c]),ye=(me.value,me.length,me.oneOf,me.fData,o(me,["value","length","oneOf","fData"]));if(F(pe)&&F(he)||delete ye.status,he=s.merge(he,i({},c,ye),{arrays:"replace"}),w.length){var _e=w.slice(),be=_e.pop();["invalid","dirty","pending"].forEach(function(r){var n=s.getIn(pe,c,"status",r),a=s.getIn(he,c,"status",r);!n!=!a&&(e=m.setStatus(e,g,t,Y(_e,["status",r],a?1:-1)))});var $e=s.getIn(e,_e,c,"fData","required");($e=u.isArray($e)&&$e.length&&$e)&&~$e.indexOf(be)&&(he=s.merge(he,i({},c,{fData:{required:!0}})))}0==s.getIn(pe,c,"status","untouched")&&(he=s.merge(he,i({},c,{status:{untouched:0}}))),e=z(e=q(e=s.merge(e,s.setIn({},he,w),{replace:s.setIn({},!0,w)}),t,Y([],s.push2array(["current"],w),te,!0)),t,ge),0==s.getIn(he,c,"status","untouched")&&(e=m.switch(e,g,t,Y(w,["status","untouched"],0)))}}}else e=s.merge(e,s.makeSlice(c,j,_),{replace:s.makeSlice(c,j,O)});for(var we=s.getIn(e,w,f),Se=0;Se<j.length&&we;Se++)e=W(e,t,we[p],Y(w,j.slice(0,Se),s.setIn({},_,j.slice(Se)),s.setIn({},O,j.slice(Se)))),we=we[j[Se]];return we&&(e=function r(n,a,i){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[];return e=W(e,t,n[p],Y(w,o,a,i)),u.isMergeable(a)&&s.objKeys(n).forEach(function(t){return a.hasOwnProperty(t)&&(e=r(n[t],a[t],s.getIn(i,t),o.concat(t)))}),e}(we,_,O,j)),e}function z(e,t,r){var a=3<arguments.length&&void 0!==arguments[3]&&arguments[3],o=[];return r.forEach(function(r){var u=r.emitter,l=!1;if(Z({path:u.join("/")+"/"+r.from,value:null},e).forEach(function(d){var h=d[c][0];("current"==h||"inital"==h||"default"==h&&d.path.length)&&(d=Object.assign({},d,i({path:[]},c,[h].concat(n(d.path),n(d[c].slice(1)))))),Z({path:u.join("/")+"/"+r.to,value:null},e).forEach(function(i){var h,v=ue(ne(d.path,(h=i.path).concat.apply(h,[c].concat(n(i[c])))));s.getIn(e,d.path)&&s.setIn(t.update,a?void 0:r.action,d.path,f,d[c],p,v),a||(o.push({map:s.makeSlice(v,r.action),fromPath:d.path,keyPath:d[c]}),l||"."==ne(u,d.path)[0]||(l=!0))})}),l){var d=s.getIn(e,u);if(d){var h,v=s.getIn(d,f,c)||[];for(h=0;h<v.length&&(r.from!==v[h].from||r.to!==v[h].to);h++);(v=v.slice())[h]=r,B(t,v,!0,u,f,c)}}e=L(e,t)}),null!==a&&o.forEach(function(r){e=L(e=W(e,t,r.map,Y(r.fromPath,r.keyPath,s.getIn(e,r.fromPath,c,r.keyPath))),t)}),e}function W(e,t,r,n){var a,i,o=n.value,l=n.path,f=n.replace,p=(n[c],(i=ue((a=n).path))+(a[c]&&!~i.indexOf("@")?"/@/"+ue(a[c]):""));return s.objKeys(r||{}).forEach(function(n){if(r[n]){var a=r[n],i=ue(se(n,l)),s=o,c=[];if(u.isObject(a)){var d=J(t.api,i,p);d.get=H(e,t),d.updates=c,s=ge.call(d,a,o),d.updates=null,d.get=null}c.length||c.push({path:i,value:s,replace:u.isUndefined(a.replace)?f:a.replace}),c.forEach(function(r){return e=q(e,t,r)})}}),e}t.initState=function(e){var t=V(e.api.schema),r=t.state,n=t.dataMap,a=void 0===n?[]:n,i=t.defaultValues;r=z(r=s.merge(r,s.setIn({},i,[c,"current"])),e,a);var o=s.getIn(r,c,"current");return L(r=q(r=q(r,e,Y([],["inital"],o)),e,Y([],["default"],o)),e)},t.setUPDATABLE=B,t.mergeUPD_PROC=L,t.updatePROC=q;var G=function(e){return function(t){return s.getIn(t,"length")===e}},J=s.memoize(function(e,t,r){var n=t.split("@")[0],a=r?r.split("@")[0]:n,i={from:r,to:t,path:n,stateApi:e,updates:[]};return i.api=e.wrapper(i),i.wrapOpts=function(e){return i.updates&&u.isUndefined(e.setExecution)&&(e.setExecution=function(e){return e&&s.push2array(i.updates,e)}),e},i.getData=function(){return i.api.get(a,c)},i});function H(e,t){return function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return s.hasIn.apply(s,[t.update].concat(n(a.map(function(e){return se(e)}))))?s.merge(X.apply(void 0,[e].concat(a)),X.apply(void 0,[t.update].concat(a)),{replace:X.apply(void 0,[t.replace].concat(a))}):X.apply(void 0,[e].concat(a))}}function Q(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];for(var a=0;a<e.length;a++)if(s.hasIn.apply(s,[e[a]].concat(r)))return s.getIn.apply(s,[e[a]].concat(r))}function X(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return s.getIn.apply(s,[e].concat(n(r.map(function(e){return se(e)}))))}t.getFromState=X;var Y=function(e,t,r,n){var a,o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{};return Object.assign((i(a={path:e},c,t),i(a,"value",r),i(a,"replace",n),a),o)};function Z(e,t){var r=e.path,n=e.value,a=e.replace,i=e.base,u=o(e,["path","value","replace","base"]),l=[];return ue(r).split(";").forEach(function(e){var r=se(e,i),o=[],f=r.indexOf(c);~f&&(o=r.slice(f+1),r=r.slice(0,f)),r=te(r,{"*":function(e){return y(s.getIn(t,e)).join(",")}}),o=te(o),s.objKeys(r).forEach(function(e){return s.objKeys(o).forEach(function(t){return l.push(Y(r[e],o[t],n,a,u))})})}),l}t.makeNUpdate=Y,t.string2NUpdate=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=[],a=(e=se(e,t)).indexOf(c);~a&&(n=e.slice(a+1),e=e.slice(0,a));var i=r.value,s=r.replace,u=o(r,["value","replace"]);return Y(e,n,i,s,u)},t.normalizeUpdate=Z;var ee=function e(t,r){if(u.isUndefined(r))return e._data[t];e._data[t]=r,e._data[r]=t};function te(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r={"":[]};return e.forEach(function(e){var n={};"string"==typeof(e=t[e]||e)&&~e.indexOf(",")?s.objKeys(r).forEach(function(t){return e.split(",").forEach(function(e){return n[t&&t+","+e||e]=r[t].concat(e.trim())})}):"function"==typeof e?s.objKeys(r).forEach(function(a){var i=e(r[a]);"string"==typeof i&&(i=le(i)),i=te(i,t),s.objKeys(i).forEach(function(e){return n[a&&a+(e?","+e:"")||e]=r[a].concat(i[e])})}):s.objKeys(r).forEach(function(t){return s.push2array(r[t],e)}),s.objKeys(n).length&&(r=n)}),r}ee._data={"#":""},ee.sym2str=function(e){return"symbol"!=a(e)||u.isUndefined(ee(e))?e:ee(e)},ee.str2sym=function(e){return"string"!=typeof e||u.isUndefined(ee(e))?e:ee(e)},ee("@",c),t.multiplePath=te;var re=function(e){return"number"==typeof e?e.toString():e};function ne(e,t){"#"===e[0]&&(e=e.slice(1)),"#"===t[0]&&(t=t.slice(1));var r,n=[];for(r=0;r<e.length&&re(e[r])===re(t[r]);r++);for(var a=r;a<e.length;a++)n.push("..");return n.length||n.push("."),s.push2array(n,t.slice(r))}function ae(e,t){if(e===t)return e;for(var r=arguments.length,n=new Array(2<r?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];for(var i=ie(n),o=e,s=0;s<i.length-1;s++){if(o[i[s]]===t)return e;u.isObject(o[i[s]])||(o[i[s]]={}),o=o[i[s]]}return i.length?(o[i[i.length-1]]=t,e):t}function ie(e){if(u.isArray(e)){var t=[];return s.push2array.apply(s,[t].concat(n(e.map(ie)))),t}return"string"==typeof e?le(e):[e]}function oe(e){return u.isMergeable(e)&&"nPath"===s.getIn(e,c)}function se(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],r=function(e,t){for(var r=!t||"."!==e[0]&&".."!=e[0]?[]:t.slice(),n=0;n<e.length;n++){var a=e[n];".."===a?r.pop():""!==a&&"."!==a&&r.push(a)}return r}(ie(e),t.length?ie(t):[]);return r[c]="nPath",r}function ue(e){return u.isArray(e)?e.map(ue).join("/"):ee.sym2str(e)}function le(e){e=(e=e.replace(ee(c),"/"+ee(c)+"/")).replace(/\/+/g,"/");var t=[];return e.split("/").forEach(function(e){return e&&(e=ee.str2sym(e.trim()))&&t.push(e)}),t}function ce(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],n=t.symbol?s.objKeysNSymb:s.objKeys,a=t.arrayAsValue?u.isObject:u.isMergeable;if(!a(e))return[[e]];var i=[];return n(e).forEach(function(n){var o=r.concat(n);a(e[n])?ce(e[n],t,o).forEach(function(e){return i.push(e)}):(o.push(e[n]),i.push(o))}),i.length?i:[s.push2array(r.slice(),{})]}t.relativePath=ne,t.setIfNotDeeper=ae,t.isNPath=oe,t.normalizePath=se,t.path2string=ue,t.string2path=le,t.isElemRef=function(e){return u.isString(e)&&"^/"==e.trim().substr(0,2)},t.object2PathValues=ce,t.objMap=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];return s.objKeys(e).reduce(function(n,a){return n[a]=t(e[a],r.concat(a)),n},u.isArray(e)?[]:{})};var fe=function(e){return u.isObject(e)&&e.$||u.isFunction(e)&&e._map};function pe(e,t){var r=!1;return e=s.toArray(u.isUndefined(e)?[]:e).map(function(e){if(u.isString(e)){var n=0;if("@"==e[0]&&(n=1),"!@"==e.substr(0,2)&&(n=2),"!!@"==e.substr(0,3)&&(n=3),n){r=!0;var a=se(e.substr(n));return 2==n&&(a[p]="not"),3==n&&(a[p]="doubleNot"),a}}if(fe(e)){var i=pe(e.args,t);return i.dataRequest&&(r=!0),i=Object.assign({},e,i),t?t(i):i}return t&&u.isMergeable(e)?t(e):e}),{dataRequest:r,args:e,norm:!0}}function de(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=(t.wrapFn,o(t,["wrapFn"])),n=u.isObject(e)?Object.assign({},e,r):Object.assign({$:e},r);return n.args?Object.assign(n,pe(n.args,t.wrapFn)):n.args=["${...}"],n}function he(e){if(u.isUndefined(e))return[];if(!u.isArray(e))throw new Error("array expected");return e}function ve(e,t){var r=s.getIn(e,t);switch(t[p]){case"not":return!r;case"doubleNot":return!!r;default:return r}}function ge(e){for(var t=this,r=arguments.length,n=new Array(1<r?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];var i=e.dataRequest?this.getData():null,o=function(e){for(var r=[],a=0;a<e.length;a++){var o=e[a];oe(o)?r.push(ve(i,o)):fe(o)?r.push(o._map?o.apply(void 0,n):ge.call.apply(ge,[t,o].concat(n))):"${...}"==o?r.push.apply(r,n):"${0}"==o?r.push(n[0]):r.push(o)}return r}(e.args),l=s.toArray(e.$).reduce(function(r,n){return u.isFunction(n)?(e.noStrictArrayResult?s.toArray:he)(n.apply(t,r)):r},o);return e.noStrictArrayResult?s.deArray(l):he(l)[0]}t.isMapFn=fe,t.normalizeArgs=pe,t.normalizeFn=de,t.processProp=ve,t.processFn=ge},function(e,t,r){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),e}var f=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r};Object.defineProperty(t,"__esModule",{value:!0});var p=r(0),d=r(1),h=function(){function e(){u(this,e),this.done=!1,this.vals=[{},{}];var t=this,r=new Promise(function(e,r){t.setFunction(0,e),t.setFunction(1,r)});return r.resolve=t.execFunction.bind(t,0),r.reject=t.execFunction.bind(t,1),r.isPending=function(){return!t.done},r.isResolved=function(){return t.vals[0].done},r.isRejected=function(){return t.vals[1].done},r.result=function(){return t.done&&t.vals[t.vals[0].done?0:1].rest},r}return c(e,[{key:"setFunction",value:function(e,t){var r=this.vals[e];r.func=t,r.done&&t.apply(void 0,function(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(r.rest))}},{key:"execFunction",value:function(e){if(!this.done){this.done=!0;for(var t=this.vals[e],r=arguments.length,n=new Array(1<r?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];t.rest=n,t.done=!0,this.vals[1-e].done=!1,t.func&&t.func.apply(t,n)}}}]),e}(),v=new WeakMap;t.fformCores=function(e){return v[e]};var g=function(){function e(t){if(u(this,e),this._listeners=[],(t.getState?1:0)+(t.setState?1:0)==1&&new Error('Expected both "getState" and "setState" or none but not only one of them.'),t.store&&!t.name)throw new Error('Expected "name" to be passed together with "store".');var r=this;r.props=t,r.schema=S(t.schema,t.elements),r.name=t.name||"",r.dispatch=t.store?t.store.dispatch:r._dispatch.bind(r),r._reducer=w(),t.JSONValidator&&(r.JSONValidator=t.JSONValidator(r.schema)),r._getState=r._getState.bind(r),r._setState=r._setState.bind(r),t.setState&&t.store&&(r._unsubscribe=r.props.store.subscribe(r._handleChange.bind(r))),t.name&&(v[t.name]=r),r.UPDATABLE={update:{},replace:{},api:r}}return c(e,[{key:"_dispatch",value:function(e){var t=this;return"function"==typeof e?e(t._dispatch.bind(t)):(t._setState(t._reducer(t._getState()||{},e)),e)}},{key:"_setState",value:function(e){var t=this;e!==t._getState()&&(t.props.setState?t.props.setState(e):t._currentState=e,t.props.store&&t._setStoreState(e),t._listeners.forEach(function(t){return t(e)}))}},{key:"_getState",value:function(){var e=this;return e.props.store?e._getStoreState():e.props.getState?e.props.getState():e._currentState}},{key:"_setStoreState",value:function(e){return this.props.store.dispatch({type:y,state:e,api:this})}},{key:"_getStoreState",value:function(){return this.props.name&&this.props.store.getState()[$()][this.props.name]}},{key:"_handleChange",value:function(){var e=this,t=e._getStoreState();t!==(e.props.getState?e.props.getState():e._currentState)&&e._setState(t)}},{key:"addListener",value:function(e){var t=this;return t._listeners.push(e),t.props.store&&!t._unsubscribe&&(t._unsubscribe=t.props.store.subscribe(t._handleChange.bind(t))),t.delListener.bind(t,e)}},{key:"delListener",value:function(e){var t=this;if(p.isUndefined(e))t._listeners=[];else{var r=t._listeners.indexOf(e);~r&&t._listeners.splice(r,1)}t._listeners.length||!t._unsubscribe||t.props.setState||(t._unsubscribe(),delete t._unsubscribe)}}]),e}(),m=function(e){function t(e){var r,s;u(this,t),s=i(t).call(this,e),(r=!s||"object"!==n(s)&&"function"!=typeof s?o(this):s)._noExec=0,r._updates=[],r._validation=null,r.getState=r._getState,r.noExec=function(){r._noExec++},r.execute=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return r._setExecution(null,p.merge(e,{execute:!0}))},r.setState=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=o(r);return n._updates=[],n._newState=e,n._setExecution(null,t)},r.getActive=function(){return r.get(d.SymData,"active")},r.validate=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=o(r);return"boolean"==typeof e?n._validation=e:d.normalizeUpdate({path:e,value:!0},n.getState()).forEach(function(e){return n._validation=d.setIfNotDeeper(n._validation||{},!0,e.path)}),n._setExecution(null,t)},r.get=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return d.getFromState.apply(d,[r.getState()].concat(t))},r.set=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(null===e)return r._setExecution([null],n);var a=f(n,[]);return a.path=e,a.value=t,r._setExecution(a,n)},r.getValue=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return r.get(d.SymData,e.inital?"inital":"current",e.path||[])},r.setValue=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=t.path,i=t.inital,o=t.replace,s=f(t,["path","inital","replace"]);if(null===n)return r._setExecution([null],t);if(~(n=d.normalizePath(n||[]).slice()).indexOf(d.SymData))s.path=n;else{for(var u=r.getState();!p.getIn(u,n)&&n.length;){var l=n.pop();e=a({},l,e),o=a({},l,o)}s.path=[i?"@inital":"@current"].concat(n)}return s.value=e,s.replace=o,r._setExecution(s,t)},r.getDefaultValue=function(){return r.get(d.SymData,"default")},r.switch=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return r.set(e,t,Object.assign({},n,{macros:"switch"}))},r.setMessages=function(e,t){var n=t||{},a=n.priority,i=void 0===a?0:a,o=n.group,s=void 0===o?3:o,u=n.path,l=void 0===u?[]:u,c=n.props,h=void 0===c?void 0:c,v=f(n,["priority","group","path","props"]),g="@/messages/"+i+"/texts/"+s;null===e?(r.switch([l,g],[],v),p.isObject(h)&&r.switch([l,"@/messages/"+i],h,v)):d.object2PathValues(e,{arrayAsValue:!0}).forEach(function(e){r.set([l,e,g],e.pop(),Object.assign({replace:!0},v)),p.isObject(h)&&r.set([l,e,"@/messages/"+i],h,v)})},r.reset=function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return t.status?r.set(d.normalizePath(t.path||"/"),p.isUndefined(t.value)?d.SymReset:t.value,(a(e={},d.SymData,["status",t.status]),a(e,"macros","switch"),e)):r.setValue(d.SymReset,t)},r.clear=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return r.setValue(d.SymClear,e)},r.arrayAdd=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return r._setExecution(Object.assign({path:e,value:t,macros:"array"},n),n)},r.arrayItemOps=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return r._setExecution(Object.assign({path:e,op:t,macros:"arrayItem"},n),n)},r.setHidden=function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return r._setExecution([Object.assign({path:[e,"@","/params/hidden"],value:t},n)],n)},r.showOnly=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return e=d.normalizePath(e),r._setExecution([Object.assign({path:[e.slice(0,-1),"/*/@/params/hidden"],value:!0},t),Object.assign({path:[e,"@","/params/hidden"],value:!1},t)],t)},r.getSchemaPart=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return e=d.normalizePath(e),d.getSchemaPart(r.schema,e,d.oneOfFromState(r.getState()))};var l=o(r);e.state?l._setState(e.state):l._getState()||l._setState(d.initState(l.UPDATABLE));var c=l._getState();return c[d.SymDataMap]||l._setState(d.rehydrateState(c,l.UPDATABLE)),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,g),c(t,[{key:"wrapper",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=this,r=function(r){return e[r]||t[r]},n=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"./";return t&&d.normalizePath(t,e.path)},a=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=1<arguments.length?arguments[1]:void 0,a=t.path,i=f(t,["path"]);return null===a?i.path=null:p.isUndefined(a)&&!r||(i.path=n(a||"./")),e.wrapOpts?e.wrapOpts(i):i},i={validate:function(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"./",t=arguments.length,a=new Array(1<t?t-1:0),i=1;i<t;i++)a[i-1]=arguments[i];return r("validate").apply(void 0,["boolean"==typeof e?e:n(e)].concat(a))},get:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return r("get")(n(t))},setValue:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return r("setValue")(e,a(t))},bind:function(t){return e=t,i},getValue:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return i.get(d.SymData,e.inital?"inital":"current",n(e.path))},getApi:function(){return t}};return["noExec","setState","getActive","getDefaultValue"].forEach(function(e){return i[e]=function(){return r(e).apply(void 0,arguments)}}),["reset","clear","execute"].forEach(function(e){return i[e]=function(t){for(var n=arguments.length,i=new Array(1<n?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return r(e).apply(void 0,[a(t,!0)].concat(i))}}),["showOnly","getSchemaPart"].forEach(function(e){return i[e]=function(){for(var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length,s=new Array(2<o?o-2:0),u=2;u<o;u++)s[u-2]=arguments[u];return r(e).apply(void 0,[n(t),a(i)].concat(s))}}),["set","switch","arrayAdd","arrayItemOps","setHidden","showOnly"].forEach(function(e){return i[e]=function(){for(var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],i=1<arguments.length?arguments[1]:void 0,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length,u=new Array(3<s?s-3:0),l=3;l<s;l++)u[l-3]=arguments[l];return r(e).apply(void 0,[n(t),i,a(o)].concat(u))}}),i}},{key:"_clearActions",value:function(){var e=this;e._newState=void 0,e._defferedTimerId=null,e._validation=null,e._updates=[],e._promise(!0)}},{key:"_execBatch",value:function(e,t,r,n){var a={type:_,state:this._newState,updates:e,api:this,forceValidation:n,opts:t,promises:r};return this._clearActions(),this.dispatch(d.updateState.bind(a)),r}},{key:"_setExecution",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(t.setExecution)return t.setExecution(e,t);var r=this;e&&p.push2array(r._updates,e),!0===t.force&&0<r._noExec&&r._noExec--;var n=r._promise();return!1===t.execute||r._noExec||(r._defferedTimerId&&clearTimeout(r._defferedTimerId),!0===t.execute?r._execBatch(r._updates,t,n,r._validation):r._defferedTimerId=setTimeout(r._execBatch.bind(r,r._updates,t,n,r._validation),t.execute||0)),n}},{key:"_promise",value:function(e){var t=this;return e&&(t._resultPromises=null),t._resultPromises||(t._resultPromises=new h,t._resultPromises.vAsync=new h),t._resultPromises}}]),t}();t.FFormStateAPI=m;var y="FFROM_SET_STATE";t.anSetState=y;var _="FFROM_UPDATE_STATE",b="fforms";function $(){return b}function w(e){e&&(b=e);var t={};return t[y]=function(e,t){return t.api.props.store?function(e,t,r){if(e[t]===r)return e;var n=Object.assign({},e);return n[t]=r,n}(e,t.api.name,t.state):t.state},function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=1<arguments.length?arguments[1]:void 0,n=t[r.type];return n?n(e,r):e}}t.getFRVal=$,t.formReducer=w;var S=function(e,t){return j(e)?e:O(t,e)};t.compileSchema=S;var O=p.memoize(function(e,t){return function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=1<arguments.length?arguments[1]:void 0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];if(j(r))return r;var a=p.isArray(r)?[]:{_compiled:!0},i=r,o=i._validators,s=i._stateMaps,u=i._oneOfSelector,l=f(i,["_validators","_stateMaps","_oneOfSelector"]),c={noStrictArrayResult:!0};return o&&(a._validators=p.toArray(P(t,o,n)).map(function(e){return d.normalizeFn(e,c)})),s&&(a._stateMaps=P(t,s,n)),u&&(a._oneOfSelector=P(t,d.normalizeFn(u,c),n)),p.objKeys(l).forEach(function(r){if("_"==r.substr(0,1))return a[r]="_presets"!==r&&d.isElemRef(l[r])?x(t,l[r],n):l[r];switch(r){case"default":case"enum":a[r]=l[r];break;case"definitions":case"properties":case"patternProperties":case"dependencies":var i={},o=l[r]||{};p.isArray(o)?i=o:p.objKeys(o).forEach(function(a){return i[a]=e(t,o[a],n.concat(r,a))}),a[r]=i;break;default:p.isMergeable(l[r])?a[r]=e(t,l[r],n.concat(r)):a[r]=l[r]}}),a}(e,t)});function j(e){return p.getIn(e,"_compiled")}function E(e,t,r){if(p.isUndefined(e))throw new Error('Reference "'+t+"\" leads to undefined object's property in path: "+d.path2string(r));return!0}function A(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];if(!p.isMergeable(t))return t;var n=t.$_ref,a=void 0===n?"":n,i=f(t,["$_ref"]);a=a.split(":");for(var o=[],s=0;s<a.length;s++)if(a[s]){var u=d.string2path(a[s]);if("^"!==u[0])throw new Error("Can reffer only to ^");var l=p.getIn({"^":e},u);E(l,a[s],r.concat("@"+s)),p.isMergeable(l)&&(l=A(e,l,r.concat("@"+s))),o.push(l)}for(var c=p.isArray(t)?[]:{},h=0;h<o.length;h++)c=p.merge(c,o[h]);return p.merge(c,d.objMap(i,A.bind(null,e),r))}function I(e,t){return"_$"==e.substr(0,2)||t._$skipKeys&&~t._$skipKeys.indexOf(e)}t.objectDerefer=A,t.skipKey=I;var x=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"",a={"^":e};return p.deArray(t.split("|").map(function(e,t){var i;e=e.trim(),d.isElemRef(e)?n=e.substr(0,e.lastIndexOf("/")+1):e=n+e,e=e.split(":");for(var o=0;o<e.length;o++){var s=e[o];if(s){d.isElemRef(s)||(s=n+s);var u=p.getIn(a,d.string2path(s));E(u,s,r.concat("@"+o)),i=i?p.merge(i,u):u}}return i}))};function P(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];if(d.isElemRef(t))return x(e,t,r);if(!p.isMergeable(t))return t;var n=A(e,t),a=p.isArray(n)?[]:{};return p.objKeys(n).forEach(function(t){var i=n[t];d.isElemRef(i)&&(i=x(e,i,r),"$"!==t&&!I(t,n)&&(p.isFunction(i)||p.isArray(i)&&i.every(p.isFunction))&&(i={$:i})),I(t,n)?a[t]=i:a[t]=P(e,i,r.concat(t))}),a}t.objectResolver=P},function(e,t,r){"use strict";function n(e,t,r){return(n="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(r):a.value}})(e,t,r||e)}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),e}function l(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?f(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&function(e,t){(Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}var d=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r};Object.defineProperty(t,"__esModule",{value:!0});var h=r(4),v=r(0),g=r(1),m=r(2);t.FFormStateAPI=m.FFormStateAPI,t.fformCores=m.fformCores,t.formReducer=m.formReducer;var y=Symbol("_$cx"),_=function(e){function t(e){var r,n;o(this,t);for(var a=arguments.length,i=new Array(1<a?a-1:0),s=1;s<a;s++)i[s-1]=arguments[s];(n=l(this,(r=c(t)).call.apply(r,[this,e].concat(i))))._methods={onSubmit:null,onChange:null,onStateChange:null},n.wrapFns=I;var u=f(n);return u.api=u._coreFromParams(e.core),Object.defineProperty(u,"elements",{get:function(){return u.api.props.elements}}),Object.defineProperty(u,"valid",{get:function(){return u.api.get("/@/status/valid")}}),u.parent=e.parent,u._updateMethods(e),u._initState(e),u._unsubscribe=u.api.addListener(u._handleStateUpdate.bind(u)),u._setRootRef=u._setRootRef.bind(u),u._setFormRef=u._setFormRef.bind(u),u._submit=u._submit.bind(u),u.reset=u.reset.bind(u),n}return p(t,h.Component),u(t,[{key:"_coreFromParams",value:function(e){return e instanceof m.FFormStateAPI?e:m.fformCores(e.name)||new m.FFormStateAPI(e)}},{key:"_initState",value:function(e){var r=Object.assign({},e);null!==e.touched&&(r.touched=!!r.touched),t.params.forEach(function(t){v.isUndefined(r[t])||(r[t]=function(r){return v.isUndefined(r)?e[t]:r})}),v.isUndefined(r.value)&&(r.value=r.inital),this._updateValues(r),e.noValidation||this.api.validate(!0)}},{key:"_updateMethods",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r={};v.objKeys(this._methods).forEach(function(n){t[n]!==e[n]&&(r[n]=e[n])}),Object.assign(this._methods,this.wrapFns(m.objectResolver(this.elements,r),{noStrictArrayResult:!0}))}},{key:"_setRootRef",value:function(e){this._root=e}},{key:"_setFormRef",value:function(e){this._form=e}},{key:"_updateValues",value:function(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=e.state,a=e.value,i=e.inital,o=e.extData,s=e.noValidation,u=e.touched,l=this;n&&n!==r.state&&l.api.setState(n),i&&i!==r.inital&&l.api.setValue(i,{replace:!0,inital:!0,noValidation:s}),a&&a!==r.value&&l.api.setValue(a,{replace:!0,noValidation:s}),o&&o!==r.extData&&v.objKeys(o).forEach(function(e){return l.api.set(e,o[e],{replace:!0})}),v.isUndefined(u)||null===u||u===r.touched||l.api.reset({status:"untouched",value:u?0:void 0}),t.params.forEach(function(t){return!v.isUndefined(e[t])&&e[t]!==r[t]&&l.api.switch("/@/params/"+t,e[t])})}},{key:"_handleStateUpdate",value:function(e){var t=this;t._savedState!=e&&(t._savedState=e,t._methods.onStateChange&&t._methods.onStateChange(t._extendEvent(new Event("stateChanged"))),e[g.SymData].current!==t._savedValue&&(t._savedValue=e[g.SymData].current,t._methods.onChange&&t._methods.onChange(t._extendEvent(new Event("valueChanged")))),t._root&&t._root.setState({branch:e}))}},{key:"_extendEvent",value:function(e){return e.value=this._savedValue,e.state=this._savedState,e.fform=this,e}},{key:"_submit",value:function(e){var t,r=this,n=function(e){return r.api.set([],e,i({},g.SymData,["status","pending"]))},a=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];v.toArray(e).forEach(function(e){if(e){var t=e[g.SymData];r.api.setMessages(v.objKeys(e).length?e:null,t)}})};if(r.api.set([],0,(i(t={},g.SymData,["status","untouched"]),i(t,"execute",!0),i(t,"macros","switch"),t)),r._methods.onSubmit){r.api.setMessages(null,{execute:!0});var o=r._methods.onSubmit(r._extendEvent(e));o&&o.then&&"function"==typeof o.then?(n(1),o.then(function(e){n(0),a(e)},function(e){n(0),a(e)})):a(o)}}},{key:"shouldComponentUpdate",value:function(e){var t=this;t.parent=e.parent;var r=!1,n=t._coreFromParams(e.core);return t.api!==n?(t._unsubscribe(),t.api=n,t._unsubscribe=t.api.addListener(t._handleStateUpdate.bind(t)),r=!0,t._initState(e)):t._updateValues(e,t.props),t._updateMethods(e,t.props),r||!v.isEqual(t.props,e,{skipKeys:["core","state","value","inital","extData","fieldCache","flatten","noValidate","parent","onSubmit","onChange","onStateChange"]})}},{key:"componentWillUnmount",value:function(){this._unsubscribe&&this._unsubscribe()}},{key:"getRef",value:function(e){return this._root&&this._root.getRef(e)}},{key:"getDataObject",value:function(e,t){return v.getIn(e,g.SymData)}},{key:"getValue",value:function(e,t){return g.isSelfManaged(e)?v.getIn(e,g.SymData,"value"):this.api.getValue({path:t.path})}},{key:"getBranch",value:function(e){return this.api.get(e)}},{key:"reset",value:function(e){e&&e.preventDefault(),this.api.reset()}},{key:"submit",value:function(){this._form.dispatchEvent(new Event("submit"))}},{key:"render",value:function(){var e=this,r=e.props,n=(r.core,r.state,r.value,r.inital,r.extData,r.fieldCache,r.touched,r.parent,r.onSubmit,r.onChange,r.onStateChange,r._$useTag),a=void 0===n?e.elements.widgets.Form||"form":n,i=d(r,["core","state","value","inital","extData","fieldCache","touched","parent","onSubmit","onChange","onStateChange","_$useTag"]);return t.params.forEach(function(e){return delete i[e]}),v.objKeys(i).forEach(function(e){return("_"===e[0]||"$"===e[0])&&delete i[e]}),h.createElement(a,Object.assign({ref:e._setFormRef},i,{onSubmit:e._submit,onReset:e.reset}),h.createElement($,{ref:e._setRootRef,id:(i.id||e.api.name)+"/#",name:e.api.name,pFForm:e,getPath:t._getPath,FFormApi:e.api}))}}],[{key:"_getPath",value:function(){return"#"}}]),t}();_.params=["readonly","disabled","viewer","liveValidate","liveUpdate"],t.FForm=_;var b=function(e){function t(e,r){var n;o(this,t),(n=l(this,c(t).call(this,e,r))).$refs={};var a=f(n);return a._setRef=a._setRef.bind(a),n}return p(t,h.Component),u(t,[{key:"getRef",value:function(e){var t=this;return e.length?1!=e.length||t.$refs[e[0]].getRef?t.$refs[e[0]]&&t.$refs[e[0]].getRef&&t.$refs[e[0]].getRef(e.slice(1)):t.$refs[e[0]]:t}},{key:"_setRef",value:function(e){var t=this;return function(r){return t.$refs[e]=r}}},{key:"_refProcess",value:function(e,t){return!0===t?this._setRef(e):v.isString(t)?this._setRef(t):v.isMergeable(t)?g.objMap(t,this._refProcess.bind(this,e)):t}}]),t}(),$=function(e){function t(e,r){var n;o(this,t),(n=l(this,c(t).call(this,e,r)))._mappedData={},n._builderData={},n._rebuild=!0,n._blocks=[],n._maps={},n._forceUpd=!1,n.get=null,n.wrapFns=I;var a=f(n);return Object.defineProperty(a,"path",{get:function(){return a.props.getPath()}}),Object.defineProperty(a,"pFForm",{get:function(){return a.props.pFForm}}),Object.defineProperty(a,"liveValidate",{get:function(){return v.getIn(a.getData(),"params","liveValidate")}}),Object.defineProperty(a,"liveUpdate",{get:function(){return v.getIn(a.getData(),"params","liveUpdate")}}),Object.defineProperty(a,"value",{get:function(){return a.props.pFForm.getValue(a.state.branch,a)}}),Object.defineProperty(a,"stateApi",{get:function(){return a.props.pFForm.api}}),a.state={branch:a.pFForm.getBranch(a.path)},a.$branch=a.state.branch,a._updateStateApi(e.pFForm.api),n}return p(t,b),u(t,[{key:"getRef",value:function(e){var t=this;return(e=g.normalizePath(e)).length?1==e.length&&e[0]==g.SymData?t:"@"==e[0][0]?1==e.length?t.$refs[e[0]]:t.$refs[e[0]].getRef(e.slice(1)):t.$refs["@Main"]&&t.$refs["@Main"].getRef&&t.$refs["@Main"].getRef(e):t.$refs["@Main"]}},{key:"_resolver",value:function(e){try{return m.objectResolver(this.pFForm.elements,e)}catch(e){throw this._addErrPath(e)}}},{key:"_addErrPath",value:function(e){return e.message=e.message+", in form '"+(this.pFForm.props.name||"")+"', path: '"+this.path+"'",e}},{key:"_updateStateApi",value:function(e){var t=this;if(e){if(!e.wrapper)return void(t.api=e);var r=e.wrapper({get path(){return t.path}});r._set=r.set,r._setValue=r.setValue,r.set=function(){return t._cacheValue(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1],"set",arguments.length<=2?void 0:arguments[2])||r._set.apply(r,arguments)},r.setValue=function(){return t._cacheValue(((arguments.length<=1?void 0:arguments[1])||{}).path,arguments.length<=0?void 0:arguments[0],"setValue",arguments.length<=1?void 0:arguments[1])||r._setValue.apply(r,arguments)},t.api=r}}},{key:"_updateCachedValue",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.liveUpdate||this._forceUpd,t=this;t._cachedTimeout=void 0,e&&t._cached&&(t.stateApi.setValue(t._cached.value,Object.assign({noValidation:!t.liveValidate&&!t._forceUpd,path:t.path},t._cached.opts)),t._forceUpd=!1,t._cached=void 0)}},{key:"_cacheValue",value:function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"set",n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},a=this,i=a.pFForm.props.fieldCache;(v.isUndefined(i)||!0===i)&&(i=40);var o="setValue"===r&&(!e||"./"==e||"."==e);if(!o){var s=a.path;o=(e="#/"+g.path2string(g.normalizePath(e,a.path))+("setValue"===r?"/@/value":""))==s+"/@/value"||e=="#/@/current/"+s.slice(2)}if(o){var u=a.getData();if(a._cached={value:t,opts:n},i){a._cachedTimeout&&clearTimeout(a._cachedTimeout),a._cachedTimeout=setTimeout(a._updateCachedValue.bind(a),i);var l=a.getData(),c=a._mappedData;a.get=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=g.normalizePath(t,a.path);return v.isEqual(n,g.normalizePath("./@value",a.path))?l.value:a.stateApi.get(n)},a._setMappedData(u,l,!0),a.get=null,c!=a._mappedData&&a.forceUpdate()}else a._updateCachedValue();return!0}}},{key:"_build",value:function(){var e=this;e.state={branch:e.pFForm.getBranch(e.path)},e.$branch=e.state.branch;var t=e.api.getSchemaPart(e.path);if(e.schemaPart=t,e._isNotSelfManaged=!g.isSelfManaged(e.state.branch)||void 0,(v.isArray(t.type)||v.isUndefined(t.type))&&!t._presets)throw new Error("schema._presets should be defined explicitly for multi type");e._layout=e.wrapFns(P(e.pFForm.elements,t._layout));var r=P(e.pFForm.elements,t._custom,t._presets||t.type),n=F(r=e.wrapFns(r)),a=n.$_maps,i=n.rest;e._maps=k(a),e._widgets={},e._components=i,e._blocks=v.objKeys(i).filter(function(e){return i[e]}),e._blocks.forEach(function(t){var r=i[t],n=r._$widget,a=r.$_reactRef,o=(r._$skipKeys,d(r,["_$widget","$_reactRef","_$skipKeys"]));if(!n)throw new Error('_$widget for "'+t+'" is empty');if(e._widgets[t]=n,a){var s=e._refProcess("@"+t,a);o[v.isFunction(s)?"ref":"$_reactRef"]=s}e._mappedData[t]=o}),e._setMappedData(void 0,e.getData(),"build"),e._rebuild=!1}},{key:"_setMappedData",value:function(e,t,r){var n=this,a=n.getData;n.getData=function(){return t};var i=D(n._mappedData,e,t,"build"==r&&n._maps.build,r&&n._maps.data,n._maps.every);return n.getData=a,n._mappedData!=i&&(n._mappedData=i,!0)}},{key:"getData",value:function(e){var t=this,r=t.pFForm.getDataObject(e||v.getIn(t,"state","branch"),t);return t._cached?v.merge(r,{value:t._cached.value},{replace:{value:t._cached.opts.replace}}):r}},{key:"shouldComponentUpdate",value:function(e,t){var r=this;if(e.FFormApi!==r.props.FFormApi)return r._updateStateApi(e.FFormApi),r._rebuild=!0;if(!v.isEqual(e,r.props))return r._rebuild=!0;if(v.isUndefined(t.branch))return!0;r.$branch=t.branch;var n=!1,a=r.getData(),i=r.getData(v.getIn(t,"branch"));if(v.getIn(i,"oneOf")!==v.getIn(a,"oneOf"))return r._rebuild=!0;try{n=(n=r._setMappedData(a,i,i!==a)||n)||v.getIn(i,"params","norender")!==v.getIn(a,"params","norender")}catch(e){throw r._addErrPath(e)}return n}},{key:"render",value:function(){var e=this;return v.isUndefined(e.state.branch)?null:!v.getIn(e.getData(),"params","norender")&&(e._rebuild&&this._build(),e._widgets.Builder?h.createElement(e._widgets.Builder,e._mappedData.Builder,e._mappedData):null)}}]),t}();t.FField=$;var w=function(e){function t(){return o(this,t),l(this,c(t).apply(this,arguments))}return p(t,h.Component),u(t,[{key:"_cn",value:function(e){return e&&this.props._$cx&&e.className&&!v.isString(e.className)?x(this.props._$widget)?Object.assign({_$cx:this.props._$cx},e):Object.assign({},e,{className:this.props._$cx(e.className)}):e}},{key:"render",value:function(){var e=this._cn(this.props.getMappedData());return h.createElement(this.props._$widget,e,this.props.children||e.children)}}]),t}(),S=function(e){function t(e,r){var n;o(this,t),(n=l(this,c(t).call(this,e,r)))._arrayStart=0,n._rebuild=!0,n._focusField="",n._arrayKey2field={},n._widgets={},n._objectLayouts=[],n._arrayLayouts=[],n._maps={},n._mappedData={},n._isArray=!1;var a=f(n);return a._setWidRef=function(e){return function(t){return a._widgets[e]=t}},n}return p(t,b),u(t,[{key:"_getMappedData",value:function(e){var t=this;return function(){return t._mappedData[e]}}},{key:"_build",value:function(e){function t(e,t){var n=F(t,["$_fields"]),a=n.$_maps,i=n.rest,o=i.$_fields,s=i.$_reactRef,u=(i._$skipKeys,i._$widget),c=void 0===u?l:u,p=i.className,h=d(i,["$_fields","$_reactRef","_$skipKeys","_$widget","className"]);!o&&e||(p=v.merge(f,p)),h.className=p;var m=r._refProcess("@widget_"+e,s)||{};v.isFunction(m)&&(m={ref:m}),Object.assign(h,m);var y=k(a,e.toString());return g.forEach(function(e){var t;return(t=r._maps[e]).push.apply(t,function(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(y[e]))}),r._mappedData[e]=h,{_$widget:c,$_fields:o}}var r=this,n=e.$branch,a=e.$layout,i=e._$cx,o=e.arrayStart,s=e.strictLayout,u=e.LayoutDefaultWidget,l=void 0===u?"div":u,c=e.LayoutDefaultClass,f=void 0===c?{}:c,p=(e.uniqKey,e.focusField),g=["build","data","every"];g.forEach(function(e){return r._maps[e]=[]}),r.$refs={},r._widgets={},r._mappedData={},r._objectLayouts=[];var m={keys:r._getObjectKeys(n),counter:1};r._focusField=p||m.keys[0]||"";var y=t(0,v.isArray(a)?{$_fields:a}:a),_=y._$widget,b=y.$_fields;if(r._$widget=_,b&&(r._objectLayouts=function e(n,a){var o=[];return a.forEach(function(a){if(n.keys,n.counter,v.isString(a)){var s=n.keys.indexOf(a);~s&&(o.push(r._makeFField(a)),n.keys.splice(s,1))}else if(v.isObject(a)){var u=n.counter++,l=t(u,a),c=l._$widget,f=l.$_fields;o.push(h.createElement(w,{_$widget:c,_$cx:i,key:"widget_"+u,ref:r._setWidRef(u),getMappedData:r._getMappedData(u)},f&&e(n,f)))}}),o}(m,b)),!0!==s&&m.keys.forEach(function(e){return r._objectLayouts.push(r._makeFField(e))}),r._arrayLayouts=[],r._arrayKey2field={},r.props.isArray)for(var $=o;$<r.props.length;$++){var S=r._arrayIndex2key(n[$]);r._arrayLayouts.push(r._makeFField($.toString(),S)),S&&(r._arrayKey2field[S]=$)}r._mappedData=r._updateMappedData(void 0,r._getData(n),"build"),r._rebuild=!1}},{key:"_makeFField",value:function(e,t){var r=this;return h.createElement($,{ref:r._setRef(t||e),key:t||e,pFForm:r.props.$FField.pFForm,FFormApi:r.props.FFormApi,id:r.props.id?r.props.id+"/"+(t||e):void 0,name:r.props.name?r.props.name+"["+(r.props.isArray?"${idx}_"+(t||e):e)+"]":void 0,getPath:t?r._getArrayPath.bind(r,t):r._getObjectPath.bind(r,e)})}},{key:"_arrayIndex2key",value:function(e){return this.props.uniqKey?v.getIn(this._getData(e),g.string2path(this.props.uniqKey)):void 0}},{key:"_getObjectKeys",value:function(e){var t=[];if(this.props.isArray)for(var r=0;r<this.props.arrayStart;r++)t.push(r.toString());else t=g.branchKeys(e);return t}},{key:"_getObjectPath",value:function(e){return this.props.$FField.path+"/"+e}},{key:"_getArrayPath",value:function(e){return this.props.$FField.path+"/"+this._arrayKey2field[e]}},{key:"_getArrayField",value:function(e){return this._arrayLayouts[e-this.props.arrayStart]}},{key:"_reorderArrayLayout",value:function(e,t,r){for(var n=this,a=[],i=!1,o=r.arrayStart;o<r.length;o++){var s=n._arrayIndex2key(t[o]);if(v.isUndefined(s))throw new Error("no unique key provided for array item");n.$refs[s]&&n.$refs[s].setState({branch:t[o]});var u=n._arrayKey2field[s];n._arrayKey2field[s]!==o&&(n._arrayKey2field[s]=o,i=!0),a.push(v.isUndefined(u)?n._makeFField(o.toString(),s):n._getArrayField(u))}return n._arrayLayouts.length!==a.length&&(i=!0),i&&(n._arrayLayouts=a),i}},{key:"_updateMappedData",value:function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:e!==t;return D(this._mappedData,e,t,"build"==r&&this._maps.build,r&&this._maps.data,this._maps.every)}},{key:"_getData",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.props.$branch;return this.props.$FField.getData(e)}},{key:"shouldComponentUpdate",value:function(e){var t=this;if(["FFormApi","oneOf","branchKeys"].some(R(t.props,e)))return t._rebuild=!0;var r=!v.isEqual(e,t.props,{skipKeys:["$branch"]}),n=t.props.$branch,a=e.$branch;if(n!=a){var i;try{i=t._updateMappedData(t._getData(n),t._getData(a))}catch(e){throw t.props.$FField._addErrPath(e)}if(i!=t._mappedData){var o=t._mappedData;t._mappedData=i,v.objKeys(i).forEach(function(e){return t._widgets[e]&&i[e]!=o[e]&&t._widgets[e].forceUpdate()})}t._getObjectKeys(a).forEach(function(e){return a[e]!==n[e]&&t.$refs[e]&&t.$refs[e].setState({branch:a[e]})}),t.props.isArray&&(r=t._reorderArrayLayout(n,a,e)||r)}return r}},{key:"getRef",value:function(e){if(!this.props.isArray||isNaN(parseInt(e[0]))||e[0]<this.props.arrayStart)return n(c(t.prototype),"getRef",this).call(this,e);var r=this._getArrayField(e[0]);return r&&this.$refs[r.key].getRef(e.slice(1))}},{key:"render",value:function(){var e=this,t=e.props;if(t.viewer){var r=t.viewerProps||{},n=r._$widget,a=void 0===n?j:n,i=d(r,["_$widget"]);return i.inputProps=t,i.value=t.$FField.value,h.createElement(a,i)}return g.isSelfManaged(t.$branch)?null:(e._rebuild&&e._build(t),h.createElement(w,{_$widget:e._$widget,_$cx:t._$cx,key:"widget_0",ref:e._setWidRef(0),getMappedData:e._getMappedData(0)},e._objectLayouts,e._arrayLayouts))}}]),t}(),O=function(e){function t(e,r){return o(this,t),l(this,c(t).call(this,e,r))}return p(t,b),u(t,[{key:"_newWidget",value:function(e,r){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},a=r._$widget,i=void 0===a?t:a,o=r.className,s=r.$_reactRef,u=d(r,["_$widget","className","$_reactRef"]),l=this._refProcess(e,s)||{};return v.isFunction(l)&&(l={ref:l}),v.isFunction(n)?l.ref=n:Object.assign(l,n),h.createElement(i,Object.assign({key:e,className:!x(i)&&this.props._$cx?this.props._$cx(o):o,_$cx:x(i)?this.props._$cx:void 0},u,l))}},{key:"_mapChildren",value:function(e,t){var r=this;if(e!==r._children||r._reactRef!==t){var n=r._children&&v.toArray(r._children),a=e&&v.toArray(e);r._mapped=a&&a.map(function(e,i){return!v.isObject(e)||e.$$typeof?e:r._mapped&&v.getIn(r._mapped,i)&&n[i]===a[i]&&v.getIn(r._reactRef,i)===v.getIn(t,i)?r._mapped[i]:r._newWidget(i,e,v.getIn(t,i))}),r._children=e,r._reactRef=t}}},{key:"setRef2rest",value:function(e,t){return t&&v.objKeys(t).filter(function(e){return isNaN(+e)}).forEach(function(r){return e[r]=t[r]}),e}},{key:"render",value:function(){var e=this;if(e.props.norender)return null;var t=e.props,r=t._$useTag,n=void 0===r?"div":r,a=t._$cx,i=t.className,o=t.$_reactRef,s=t.children,u=d(t,["_$useTag","_$cx","className","$_reactRef","children"]);return e._mapChildren(s,o),e.setRef2rest(u,o),h.createElement(n,Object.assign({children:e._mapped,className:a?a(i):i},u))}}]),t}();function j(e){var t=e._$useTag,r=void 0===t?"div":t,n=e.value,a=(e.inputProps,e._$cx),i=e.enumExten,o=void 0===i?{}:i,s=e.emptyMock,u=void 0===s?"(none)":s,l=d(e,["_$useTag","value","inputProps","_$cx","enumExten","emptyMock"]);return l.className&&a&&(l.className=a(l.className)),h.createElement(r,l,function e(t){var r,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},a=2<arguments.length?arguments[2]:void 0;return r=a,(v.isMergeable(r)?0===v.objKeys(r).length:null==r||""===r)?t:v.isArray(a)?a.map(e.bind(null,t,n)).join(", "):(a=M(n,a).label||a,v.isString(a)?a:JSON.stringify(a))}(u,o,n))}var E=function(e){function t(){return o(this,t),l(this,c(t).apply(this,arguments))}return p(t,O),u(t,[{key:"render",value:function(){var e=this.props;if(e.viewer){var t=e.viewerProps||{},r=t._$widget,n=void 0===r?j:r,a=d(t,["_$widget"]);return a.inputProps=e,a.value=e.value,h.createElement(n,a)}var i=e.value,o=e._$useTag,s=e.type,u=e.$_reactRef,l=e._$cx,c=(e.viewer,e.viewerProps,e.children),f=d(e,["value","_$useTag","type","$_reactRef","_$cx","viewer","viewerProps","children"]);return this._mapChildren(c,u),this.setRef2rest(f,u),"textarea"==s||"select"==s?o=o||s:(o=o||"input","notInput"!==s&&(f.type=s)),"notInput"!==s&&(f["checkbox"===s?"checked":"value"]=i),f.className&&l&&(f.className=l(f.className)),h.createElement(o,f,this._mapped)}}]),t}(),A=function(e){function t(){return o(this,t),l(this,c(t).apply(this,arguments))}return p(t,h.Component),u(t,[{key:"componentDidMount",value:function(){var e,t=this;try{e=window&&window.getComputedStyle(this.props.$FField.$refs["@Main"])}catch(e){}e&&this._elem&&["fontSize","fontFamily","fontWeight","fontStyle","letterSpacing"].forEach(function(r){return t._elem.style[r]=e[r]})}},{key:"render",value:function(){var e=this,r=e.props,n=(v.isUndefined(r.value)||null===r.value?"":r.value.toString())||r.placeholder||"";return h.createElement("div",{style:t.sizerStyle,ref:function(t){(e._elem=t)&&r.$FField.$refs["@Main"]&&r.$FField.$refs["@Main"].style&&(r.$FField.$refs["@Main"].style.width=Math.max(t.scrollWidth+(r.addWidth||45),r.minWidth||0)+"px")}},n)}}]),t}();function I(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=I.bind(this);if(v.isFunction(e)&&(e={$:e}),g.isMapFn(e)){var n=e.norm?e:g.normalizeFn(e,Object.assign({},t,{wrapFn:r})),a=g.processFn.bind(this,n);return a._map=n,a}if(v.isMergeable(e)){var i=v.isArray(e)?[]:{};//!~ignore.indexOf(key) &&
return v.objKeys(e).forEach(function(n){return i[n]=m.skipKey(n,e)?e[n]:r(e[n],t)}),i}return e}function x(e){return e instanceof O}A.sizerStyle={position:"absolute",top:0,left:0,visibility:"hidden",height:0,overflow:"scroll",whiteSpace:"pre"};var P=v.memoize(function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length?arguments[2]:void 0;if(r){var n=r.split(":").map(function(e){return(e=e.trim())&&("^"!=e[0]?"^/sets/"+e:e)}).join(":")+":"+(t.$_ref||"");t=v.merge(t,{$_ref:n})}return m.objectResolver(e,t)});function F(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],r=e.$_maps,n=d(e,["$_maps"]);r=Object.assign({},r);var a=v.isArray(e)?[]:{};return v.objKeys(n).forEach(function(e){if(v.isMergeable(n[e])&&!~t.indexOf(e)){var i=F(n[e],t);a[e]=i.rest,v.objKeys(i.$_maps).forEach(function(t){return r[e+"/"+t]=i.$_maps[t]})}else a[e]=n[e]}),{$_maps:r,rest:a}}function k(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",r={data:[],every:[],build:[]};return v.objKeys(e).forEach(function(n){var a=e[n];if(a){var i=g.multiplePath(g.normalizePath((t?t+"/":"")+n));if(v.isFunction(a)||v.isArray(a))v.toArray(a).forEach(function(e){var t=e._map,n=t.update,a=void 0===n?"data":n,o=t.replace,s=void 0===o||o,u=d(t,["update","replace"]);r[a].push(Object.assign({update:a,replace:s},u,{to:i,$:e}))});else{v.isString(a)&&(a={args:a});var o=a=Object.assign({},a,g.normalizeArgs(a.args)),s=o.args,u=o.update,l=void 0===u?"data":u,c=o.replace,f=void 0===c||c,p=d(a,["args","update","replace"]);r.data.push(Object.assign({args:s[0],update:l,replace:f,to:i,dataRequest:!0},p))}}}),r}//!map.$ && map.args[0] == 'selectorValue' && args[0]
function D(e,t,r){for(var n={update:{},replace:{},api:{}},a=arguments.length,i=new Array(3<a?a-3:0),o=3;o<a;o++)i[o-3]=arguments[o];return i.forEach(function(a){return a&&a.forEach(function(a){if("data"!=a.update||function e(n){return v.isUndefined(t)||!n.$||n.dataRequest&&n.args.some(function(n){return g.isNPath(n)?v.getIn(t,n)!==v.getIn(r,n):!!g.isMapFn(n)&&e(n._map||n)})}(a)){var i=a.$?a.$():g.processProp(r,a.args);v.objKeys(a.to).forEach(function(e){return g.setUPDATABLE(n,i,a.replace,a.to[e])}),a.replace||(e=g.mergeUPD_PROC(e,n))}})}),g.mergeUPD_PROC(e,n)}t.extractMaps=F,t.normalizeMaps=k,t.updateProps=D;var M=function(e,t){var r=v.isFunction(e)?e(t):v.getIn(e,t);return r&&v.isString(r)&&(r={label:r}),v.isObject(r)?r:{}};function R(e,t){return(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).equal?function(r){return e[r]===t[r]}:function(r){return e[r]!==t[r]}}function C(){for(var e=this,t=arguments,r=[],n=function(n){var i=n<0||t.length<=n?void 0:t[n];if(!i)return"continue";var o=a(i);"string"===o||"number"===o?r.push(e&&e[i]||i):v.isArray(i)?r.push(C.apply(e,i)):"object"===o&&v.objKeys(i).forEach(function(t){i[t]&&("number"==typeof i[t]||!0===i[t]?r.push(e&&e[t]||t):r.push(C.call(e,i[t])))})},i=0;i<arguments.length;i++)n(i);return r.join(" ")}t.getExten=M,t.comparePropsFn=R,t.classNames=C;var N=i({extend:function(e,t){var r=v.merge.all(this,e,t);return this["_$cx.bind"]!==r["_$cx.bind"]&&(r=v.merge(r,{_$cx:r["_$cx.bind"]?this[y].bind(r["_$cx.bind"]):this[y]})),r},widgets:{Section:S,Generic:O,Input:E,Autowidth:A,Builder:function(e){var t=e.children,r=e.widgets,n=r.Title,a=r.Body,i=r.Main,o=r.Message,s=r.Wrapper,u=r.Autowidth;return t=v.deArray(t),s?h.createElement(s,t.Wrapper,n?h.createElement(n,t.Title):"",a?h.createElement(a,t.Body,i?h.createElement(i,t.Main):"",o?h.createElement(o,t.Message):"",u?h.createElement(u,t.Autowidth):""):""):""},Wrapper:function(e){var t=e._$useTag,r=void 0===t?"div":t,n=e._$cx,a=void 0===n?C:n,i=e.className,o=e.ArrayItemMenu,s=e.ArrayItemBody,u=e.arrayItem,l=d(e,["_$useTag","_$cx","className","ArrayItemMenu","ArrayItemBody","arrayItem"]),c=s||{},f=c._$widget,p=void 0===f?"div":f,v=c.className,g=void 0===v?{}:v,m=d(c,["_$widget","className"]),y=o||{},_=y._$widget,b=void 0===_?"div":_,$=y.className,w=void 0===$?{}:$,S=d(y,["_$widget","className"]),O=h.createElement(r,Object.assign({className:a?a(i):i},l));return u?h.createElement(p,Object.assign({className:a?a(g):g},m),O,h.createElement(b,Object.assign({className:a&&a(w)},S))):O},ItemMenu:function(e){var t=e._$useTag,r=void 0===t?"div":t,n=e._$buttonDefaults,a=void 0===n?{}:n,i=e._$cx,o=e.disabled,s=e.className,u=e.buttonsProps,l=void 0===u?{}:u,c=e.arrayItem,f=e.buttons,p=void 0===f?[]:f,v=e.onClick,g=d(e,["_$useTag","_$buttonDefaults","_$cx","disabled","className","buttonsProps","arrayItem","buttons","onClick"]);return c?(p.forEach(function(e){return delete g[e]}),h.createElement(r,Object.assign({className:i(s)},g),p.map(function(e){var t=Object.assign({},a,l[e]||{}),r=t._$widget,n=void 0===r?"button":r,s=t.type,u=void 0===s?"button":s,f=t.disabledCheck,p=void 0===f?"":f,g=t.className,m=void 0===g?{}:g,y=t.onClick,_=void 0===y?v:y,b=t.title,$=void 0===b?e:b,w=t.children,S=void 0===w?e:w,O=d(t,["_$widget","type","disabledCheck","className","onClick","title","children"]);return h.createElement(n,Object.assign({key:e,type:u,title:$,className:i?i(m):m,children:S,disabled:o||p&&!c[p]},O,{onClick:function(){return _(e)}}))}))):null},CheckboxNull:function(e){var t=e.checked,r=e.onChange,n=e.nullValue,a=void 0===n?null:n,i=e.dual,o=e.tagRef,s=(e.type,d(e,["checked","onChange","nullValue","dual","tagRef","type"]));return h.createElement("input",Object.assign({type:"checkbox",checked:!0===t},s,{onChange:function(e){r(i?!t:t===a||!0!==t&&a,e)},ref:function(e){o&&o(e),e&&(e.indeterminate=t===a)}}))}},sets:{base:{Wrapper:{_$widget:"^/widgets/Wrapper",ArrayItemMenu:{$_ref:"^/parts/ArrayItemMenu"},_$cx:"^/_$cx",$_maps:{"className/fform-hidden":"@/params/hidden",arrayItem:"@/arrayItem"}},Builder:{_$widget:"^/widgets/Builder",_$cx:"^/_$cx",$_maps:{widgets:{$:"^/fn/getProp",args:["_widgets"],update:"build"}}},Body:{_$widget:"^/widgets/Generic",_$cx:"^/_$cx",className:"fform-body"},Message:{$_ref:"^/parts/Message"}},simple:{$_ref:"^/sets/base",Main:{_$widget:"^/widgets/Input",_$cx:"^/_$cx",$_reactRef:{ref:!0},viewerProps:{_$cx:"^/_$cx",emptyMock:"(no value)",className:{"fform-viewer":!0}},onChange:{$:"^/fn/eventValue|setValue"},onBlur:{$:"^/fn/blur"},onFocus:{$:"^/fn/focus"},$_maps:{value:{$:"^/fn/iif",args:[{$:"^/fn/equal",args:["@value",null]},"","@value"]},viewer:"@/params/viewer",autoFocus:"@/params/autofocus",readOnly:"@/params/readonly",disabled:"@/params/disabled",placeholder:"@/fData/placeholder",required:"@/fData/required",label:"@/fData/title","viewerProps/enumExten":"@/fData/enumExten",id:{$:"^/fn/getProp",args:"props/id",update:"build"},name:{$:"^/fn/getProp",args:"props/name",update:"build"},"className/fform-input-priority":{$:"^/fn/setInputPriority",args:"@/status/priority"}}},Title:{_$widget:"^/widgets/Generic",_$cx:"^/_$cx",_$useTag:"label",children:[],$_maps:{"className/fform-required":"@/fData/required","children/0":"@/fData/title","className/fform-hidden":{$:"^/fn/not",args:"@/fData/title"},htmlFor:{$:"^/fn/getProp",args:["id"],update:"build"},"className/fform-title-viewer":"@/params/viewer"}}},string:{$_ref:"^/sets/simple",Main:{type:"text"}},textarea:{$_ref:"^/sets/simple",Main:{type:"textarea",viewerProps:{className:{"fform-viewer":!1,"fform-viewer-inverted":!0}}},Title:{$_maps:{"className/fform-title-viewer-inverted":"@/params/viewer"}}},integer:{$_ref:"^/sets/simple",Main:{type:"number",onChange:{$:"^/fn/eventValue|parseNumber|setValue",args:["${0}",!0,0]}}},integerNull:{$_ref:"^/sets/integer",Main:{onChange:{args:{2:null}}}},number:{$_ref:"^/sets/integer",Main:{onChange:{args:{1:!1}},step:"any"}},numberNull:{$_ref:"^/sets/integerNull",Main:{onChange:{args:{1:!1,2:null}},step:"any"}},null:{$_ref:"^/sets/simple",Main:!1},boolean:{$_ref:"^/sets/simple",Main:{type:"checkbox",onChange:{$:"^/fn/eventChecked|setValue|liveUpdate"}}},booleanLeft:{$_ref:"^/sets/base",Main:{_$widget:"^/widgets/Generic",_$useTag:"label",_$cx:"^/_$cx",$_reactRef:{0:{ref:!0}},children:[{$_ref:"^/sets/simple/Main:^/sets/boolean/Main",$_reactRef:!1,viewerProps:{_$useTag:"span"}},{$_ref:"^/sets/simple/Title",_$useTag:"span",$_maps:{"className/fform-hidden":"@/params/viewer"}}]},Title:{$_ref:"^/sets/simple/Title",$_maps:{"className/fform-hidden":{$:"^/fn/not",args:"@/params/viewer"}}}},booleanNull:{$_ref:"^/sets/boolean",Main:{_$useTag:"^/widgets/CheckboxNull",$_reactRef:{tagRef:!0},onChange:{$:"^/fn/setValue|liveUpdate",args:["${0}"]}}},booleanNullLeft:{$_ref:"^/sets/booleanLeft",Main:{$_reactRef:{0:{ref:null,tagRef:!0}},children:[{$_ref:"^/sets/booleanNull/Main"},{}]}},object:{$_ref:"^/sets/base",Main:{_$widget:"^/widgets/Section",_$cx:"^/_$cx",$_reactRef:!0,uniqKey:"params/uniqKey",LayoutDefaultClass:"layout",LayoutDefaultWidget:"div",viewerProps:{$_ref:"^/sets/simple/Main/viewerProps"},$_maps:{length:"@/length",oneOf:"@/oneOf",branchKeys:"@/branchKeys",strictLayout:"@/fData/strictLayout",isArray:{$:"^/fn/equal",args:["@/fData/type","array"]},$branch:{$:"^/fn/getProp",args:"$branch",update:"every"},arrayStart:{$:"^/fn/getArrayStart",args:[],update:"build"},$FField:{$:"^/fn/getProp",args:[],update:"build"},FFormApi:{$:"^/fn/getProp",args:"props/pFForm/api",update:"build"},id:{$:"^/fn/getProp",args:"props/id",update:"build"},name:{$:"^/fn/getProp",args:"props/name",update:"build"},$layout:{$:"^/fn/getProp",args:"_layout",update:"build"}}},Title:{_$widget:"^/widgets/Generic",_$cx:"^/_$cx",_$useTag:"legend",children:[{$_ref:"^/sets/simple/Title",_$useTag:"span"},{$_ref:"^/parts/ArrayAddButton"},{$_ref:"^/parts/ArrayDelButton"},{$_ref:"^/parts/ArrayEmpty"}]},Wrapper:{_$useTag:"fieldset"}},array:{$_ref:"^/sets/object"},select:{$_ref:"^/sets/simple",Main:{type:"select",children:[],onChange:{$:"^/fn/eventValue|liveUpdate|setValue"},$_maps:{children:{$:"^/fn/arrayOfEnum",args:["@/fData/enum","@/fData/enumExten",{_$widget:"option"}],replace:!1},label:!1}}},multiselect:{$_ref:"^/sets/select",Main:{multiple:!0,onChange:{$:"^/fn/eventMultiple|setValue|liveUpdate"}}},radio:{$_ref:"^/sets/base",Title:{$_ref:"^/sets/simple/Title"},Main:{$_ref:"^/parts/RadioSelector",$_reactRef:!0,viewerProps:{$_ref:"^/sets/simple/Main/viewerProps"},$_maps:{value:"@/value",viewer:"@/params/viewer",children:[{args:["@/fData/enum","@/fData/enumExten",{$_reactRef:{$_reactRef:{0:{ref:!0}}}},{onChange:{args:["${0}"]}},{},!0]},{args:["@/fData/enum","@/value"]},{args:{0:"@/fData/enum"}}]}}},checkboxes:{$_ref:"^/sets/radio",Main:{$_maps:{children:{0:{args:{3:{type:"checkbox",onChange:{$:"^/fn/eventCheckboxes|setValue|liveUpdate"}},5:"[]"}}}}}},$radioNull:{Main:{$_maps:{children:{0:{args:{3:{onClick:"^/fn/eventValue|radioClear|liveUpdate"}}}}}}},$radioEmpty:{Main:{$_maps:{children:{0:{args:{3:{onClick:{$:"^/fn/eventValue|radioClear|liveUpdate",args:["${0}",""]}}}}}}}},$autowidth:{Autowidth:{$_ref:"^/parts/Autowidth"},Wrapper:{className:{"fform-shrink":!0}}},$noArrayControls:{Wrapper:{$_maps:{arrayItem:!1}}},$noArrayButtons:{Title:{$_ref:"^/sets/simple/Title"}},$inlineItems:{Main:{className:{"fform-inline":!0}}},$inlineTitle:{Wrapper:{className:{"fform-inline":!0}}},$inlineLayout:{Main:{LayoutDefaultClass:{"fform-inline":!0}}},$inlineArrayControls:{Wrapper:{ArrayItemBody:{className:{"fform-inline":!0}}}},$arrayControls3but:{Wrapper:{ArrayItemMenu:{buttons:["up","down","del"]}}},$noTitle:{Title:!1},$noMessage:{Message:!1},$shrink:{Wrapper:{className:{"fform-shrink":!0}}},$expand:{Wrapper:{className:{"fform-expand":!0}}},$password:{Main:{type:"password"}}},fn:{api:function(e){for(var t,r=arguments.length,n=new Array(1<r?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];(t=this.api)[e].apply(t,n)},format:function(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.reduce(function(e,t,r){return e.replace("${"+r+"}",t)},e)},iif:function(e,t,r){for(var n=arguments.length,a=new Array(3<n?n-3:0),i=3;i<n;i++)a[i-3]=arguments[i];return[e?t:r].concat(a)},not:function(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return[!e].concat(r)},equal:function(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return[r.some(function(t){return e===t})]},equalAll:function(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return[r.every(function(t){return e===t})]},or:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return[t.some(Boolean)]},and:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return[t.every(Boolean)]},getArrayStart:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return[g.arrayStart(this.schemaPart)].concat(t)},getProp:function(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return[v.getIn(this,g.normalizePath(e))].concat(r)},eventValue:function(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return[e.target.value].concat(r)},eventChecked:function(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return[e.target.checked].concat(r)},eventMultiple:function(e){for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return[Array.from(e.target.options).filter(function(e){return e.selected}).map(function(e){return e.value})].concat(r)},parseNumber:function(e){for(var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length,a=new Array(3<n?n-3:0),i=3;i<n;i++)a[i-3]=arguments[i];return[""===e?r:(t?parseInt:parseFloat)(e)].concat(a)},setValue:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.api.setValue(e,t);for(var r=arguments.length,n=new Array(2<r?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];return n},focus:function(e){this.api.set("/@/active",this.path,{noValidation:!0});for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r},blur:function(){var e;this.api.set("./",-1,(i(e={},g.SymData,["status","untouched"]),i(e,"noValidation",!0),i(e,"macros","setStatus"),e)),this.api.set("/@/active",void 0,{noValidation:!0}),this._updateCachedValue(!0),!this.liveValidate&&this.api.validate("./");for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return r},liveUpdate:function(){this._forceUpd=!0;for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t},eventCheckboxes:function(e){var t=(this.getData().value||[]).slice(),r=e.target.value,n=t.indexOf(r),a=t.slice();-1==n?a.push(r):a.splice(n,1);var i=this.getData().fData.enum;a.sort(function(e,t){return i.indexOf(e)>i.indexOf(t)});for(var o=arguments.length,s=new Array(1<o?o-1:0),u=1;u<o;u++)s[u-1]=arguments[u];return[a].concat(s)},radioClear:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;this.api.getValue()===e&&this.api.setValue(t);for(var r=arguments.length,n=new Array(2<r?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];return n},messages:function(e){var t=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=r.className,a=void 0===n?{}:n,o=d(r,["className"]);return[v.objKeys(e||[]).map(function(r){var n=e[r],s=n.norender,u=n.texts,l=n.className,c=void 0===l?{}:l,f=d(n,["norender","texts","className"]),p=[];return v.objKeys(u).forEach(function(e){return v.toArray(u[e]).forEach(function(e,r,n){g.isElemRef(e)&&(e=t._resolver(e)),v.isString(e)&&v.isString(p[p.length-1])?p.push({_$widget:"br"},e):p.push(e)})}),s||!p.length?null:Object.assign({children:p},o,{className:Object.assign(i({},"fform-message-priority-"+r,!0),a,c)},f)})]},arrayOfEnum:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},a=3<arguments.length?arguments[3]:void 0;return[t.map(function(t){var i=M(r,t);return Object.assign({key:t,children:[i.label||t],name:a&&e.name+(!0===a?"":a)},i,n,{value:t})})]},enumInputs:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{},o=5<arguments.length?arguments[5]:void 0;return[t.map(function(t){var s=M(r,t);return Object.assign({key:t},n,{children:[Object.assign({name:o&&e.props.name+(!0===o?"":o)},v.merge(a,s),{value:t}),Object.assign({},i,{children:[s.label||t]})]})})]},enumInputProps:function(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t={},r=arguments.length,n=new Array(1<r?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];for(var i=0;i<n.length;i+=2)t[n[i]]=n[i+1];return[e.map(function(e){return{children:{0:t}}})]},enumInputValue:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length?arguments[1]:void 0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"checked";return t=v.toArray(t),[e.map(function(e){return{children:{0:i({},r,!!~t.indexOf(e))}}})]},setInputPriority:function(e){return"number"==typeof e?["fform-input-priority-"+e]:[!1]}},parts:{Message:{_$widget:"^/widgets/Generic",_$cx:"^/_$cx",children:[],$_maps:{children:{$:"^/fn/messages",args:["@/messages",{}]},"className/fform-hidden":{$:"^/fn/or",args:["@/params/viewer","!@/status/touched"]}}},RadioSelector:{_$widget:"^/widgets/Input",_$cx:"^/_$cx",_$useTag:"div",type:"notInput",children:[],$_maps:{value:"@/selector/value",children:[{$:"^/fn/enumInputs",args:["@/selector/enum","@/selector/enumExten",{_$useTag:"label",_$cx:"^/_$cx"},{_$widget:"input",type:"radio",onChange:{$:"^/fn/eventValue|setValue|liveUpdate",args:["${0}",{path:"./@/selector/value"}]},onBlur:"^/sets/simple/Main/onBlur",onFocus:"^/sets/simple/Main/onFocus"},{_$useTag:"span",_$cx:"^/_$cx"},!0],replace:!1},{$:"^/fn/enumInputValue",args:["@/selector/enum","@/selector/value"],replace:!1},{$:"^/fn/enumInputProps",args:["@/selector/enum","readOnly","@/params/readonly","disabled","@/params/disabled"],replace:!1}]}},Autowidth:{_$widget:"^/widgets/Autowidth",addWidth:35,minWidth:60,$_maps:{value:"value",placeholder:"@/params/placeholder","className/fform-hidden":"@/params/hidden",$FField:{$:"^/fn/getProp",args:[],update:"build"}}},Button:{_$widget:"button",type:"button",$_maps:{"className/fform-hidden":"@/params/viewer",disabled:"@/params/disabled"}},Submit:{$_ref:"^/parts/Button",type:"submit",children:["Submit"]},Reset:{$_ref:"^/parts/Button",type:"reset",children:["Reset"],$_maps:{disabled:"@/status/pristine"}},ArrayAddButton:{$_ref:"^/parts/Button",children:["+"],onClick:{$:"^/fn/api",args:["arrayAdd","./",1]},$_maps:{"className/fform-hidden":{$:"^/fn/or",args:["@/params/viewer",{$:"^/fn/equal | ^/fn/not",args:["@/fData/type","array"]}]},disabled:{$:"^/fn/or",args:["!@/fData/canAdd","@params/disabled"]}}},ArrayDelButton:{$_ref:"^/parts/ArrayAddButton",children:["-"],onClick:{args:{2:-1}},$_maps:{disabled:{$:"^/fn/or",args:["!@/length","@params/disabled"]}}},ArrayEmpty:{children:"(array is empty)",_$widget:"span",$_maps:{"className/fform-hidden":{$:"^/fn/equal | ^/fn/not",args:["@/length",0]}}},ArrayItemMenu:{_$widget:"^/widgets/ItemMenu",_$cx:"^/_$cx",_$buttonDefaults:"^/parts/Button",buttons:["first","last","up","down","del"],onClick:{$:"^/fn/api",args:["arrayItemOps","./","${0}"]},buttonsProps:{first:{disabledCheck:"canUp"},last:{disabledCheck:"canDown"},up:{disabledCheck:"canUp"},down:{disabledCheck:"canDown"},del:{disabledCheck:"canDel"}},$_maps:{arrayItem:"@/arrayItem","className/fform-button-viewer":"@/params/viewer",disabled:"@params/disabled"}},Expander:{_$widget:"div",className:{"fform-expand":!0}}},_$cx:C},y,C);t.elements=N},function(t,r){t.exports=e}])},"object"==typeof exports&&"object"==typeof module?module.exports=t(require("React")):"function"==typeof define&&define.amd?define(["React"],t):"object"==typeof exports?exports.fform=t(require("React")):e.fform=t(e.React);