!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("React")):"function"==typeof define&&define.amd?define(["React"],t):"object"==typeof exports?exports.fform=t(require("React")):e.fform=t(e.React)}(window,(function(e){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=20)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=e=>void 0===e;t.isUndefined=n;t.isNumber=e=>"number"==typeof e;t.isInteger=e=>"number"==typeof e&&(Math.floor(e)===e||e>9007199254740992||e<-9007199254740992);t.isString=e=>"string"==typeof e;const a=Array.isArray;t.isArray=a;t.isObject=e=>o(e)&&!a(e);const i=e=>"function"==typeof e;t.isFunction=i;t.isPromise=e=>i(d(e,"then"));t.toArray=e=>a(e)?e:[e];function o(e){return e&&"object"==typeof e&&"[object RegExp]"!==Object.prototype.toString.call(e)&&"[object Date]"!==Object.prototype.toString.call(e)}t.deArray=(e,t)=>!t&&a(e)&&1==e.length?e[0]:e,t.isMergeable=o;const s=Object.keys;t.objKeys=s;const c=e=>s(e).concat(Object.getOwnPropertySymbols(e));t.objKeysNSymb=c;const u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e=>typeof e:e=>e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e;function l(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function f(e,...t){if(t.length>0)for(let r=0;r<t.length;r++){let i=a(t[r])?t[r]:[t[r]];for(let t=0;t<i.length;t++)if(!n(i[t])){try{if(!e.hasOwnProperty(i[t]))return!1}catch(e){return!1}e=e[i[t]]}}return!0}function p(e,t,...r){let i,s=e;if(r.length>0)for(let e=0;e<r.length;e++){let t=a(r[e])?r[e]:[r[e]];for(let e=0;e<t.length;e++)n(t[e])||(n(i)||(o(s[i])||(s[i]={}),s=s[i]),i=t[e])}return n(i)?t:(s[i]=t,e)}function d(e,...t){let r=e;for(let e=0;e<t.length;e++){let i=t[e];"function"==typeof i&&(i=i(r)),a(i)||(i=[i]);for(let e=0;e<i.length;e++){if(!o(r))return;n(i[e])||(r=r[i[e]])}}return r}function h(e,t,r={}){const n=r.noSymbol?s:c;let{SymbolDelete:u,del:f,diff:p,replace:h,arrays:v}=r,b=h;if("function"!=typeof b&&(b=o(h)?e=>d(h,e):()=>!1),!0===h||!0===b([],e,t))return{state:t,changes:e!==t?t:void 0};return i(v)||(v=void 0),function e(t,r,i=[]){const s={},c=a(r);o(t)||a(t=c?[]:{})&&(s.length=0);const d=a(t);if(!o(r))return{state:t};d&&c&&(v&&(r=v(t,r,i)),t.length!=r.length&&(s.length=r.length));let h=n(t);if(0==h.length&&!f){if(!d&&!c)return n(r).length?{state:r,changes:r}:{state:t};if(d&&c)return t.length==r.length&&0==r.length?{state:t}:n(r).length||r.length!==t.length?{state:r,changes:r}:{state:t}}let g=n(r);const m={},y=d?[]:{};p&&h.forEach(e=>{~g.indexOf(e)||(s[e]=u)}),g.forEach(n=>{if(f&&r[n]===u)t.hasOwnProperty(n)&&(s[n]=u);else{let a=i.concat(n);if(o(r[n])&&o(t[n])&&!0!==b(a,t[n],r[n])){if(t[n]!==r[n]){let i=e(t[n],r[n],a);i.changes&&(m[n]=i)}}else t.hasOwnProperty(n)&&l(t[n],r[n])||(s[n]=r[n])}});let O=n(m),j=n(s);return 0==j.length&&0==O.length?{state:t}:(Object.assign(y,t),j.forEach(e=>{f&&s[e]===u||p&&!r.hasOwnProperty(e)?delete y[e]:y[e]=s[e]}),O.forEach(e=>{y[e]=m[e].state,s[e]=m[e].changes}),{state:y,changes:s})}(e,t)}t.isEqual=function e(t,r,a={}){if(l(t,r))return!0;if("object"!==(n(t)?"undefined":u(t))||null===t||"object"!==(n(r)?"undefined":u(r))||null===r)return!1;const i=a.symbol?c:s,o=i(t),f=i(r);if(o.length!==f.length)return!1;const{skipKeys:p=[],deepKeys:d=[]}=a;for(let n=0;n<o.length;n++)if(!~p.indexOf(o[n]))if(a.deep||~d.indexOf(o[n])){if(!e(t[o[n]],r[o[n]],a))return!1}else if(!r.hasOwnProperty(o[n])||!l(t[o[n]],r[o[n]]))return!1;return!0},t.asNumber=function(e){if(""===e)return null;if(/\.$/.test(e))return e;if(/\.0$/.test(e))return e;const t=Number(e),r="number"==typeof t&&!Number.isNaN(t);return/\.\d*0$/.test(e)?e:r?t:e},t.memoize=function(e){return e.cache=new Map,function(...t){let r=[t.length].concat(t),n=e.cache,a=r.pop();for(let e=0;e<r.length;e++)n.has(r[e])||n.set(r[e],new Map),n=n.get(r[e]);return n.has(a)||n.set(a,e.apply(this,t)),n.get(a)}},t.push2array=function(e,...t){for(let r=0;r<t.length;r++)a(t[r])?e.push(...t[r]):e.push(t[r]);return e},t.moveArrayElems=function(e,t,r){let n=e.length;n&&(t=(t%n+n)%n,r=(r%n+n)%n);let a=e[t];for(let n=t;n<r;n++)e[n]=e[n+1];for(let n=t;n>r;n--)e[n]=e[n-1];return e[r]=a,e},t.hasIn=f,t.setIn=p,t.delIn=function e(t,r){if(!r.length)return t;const n="string"==typeof r[0]?r[0].split(","):[r[0]],a=r.slice(1);if(a.length)n.forEach(r=>{let n;o(t[r])&&(n=e(t[r],a)),n&&n!==t[r]&&(t=v(t,{[r]:n},{replace:{[r]:!0}}))});else{for(let e=0;e<n.length;e++)if(t.hasOwnProperty(n[e])){t=Object.assign({},t);break}for(let e=0;e<n.length;e++)delete t[n[e]]}return t},t.getIn=d,t.getSetIn=function(e,t,...r){return f(e,...r)||p(e,t,...r),d(e,...r)},t.mergeState=h;const v=(e,t,r={})=>h(e,t,r).state;t.merge=v,v.all=function(e,t,r={}){return 0==t.length?e:t.reduce((e,t)=>v(e,t,r),e)},t.objSplit=function(e,t,r=!1){let n=[];return s(e).forEach(a=>p(n,e[a],t(r?a:e[a]),a)),n}},function(e,t){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t,r){var n=r(18);e.exports=function(e,t){if(null==e)return{};var r,a,i=n(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}},function(t,r){t.exports=e},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}},function(e,t,r){var n=r(14),a=r(15),i=r(16);e.exports=function(e){return n(e)||a(e)||i()}},function(e,t){function r(t){return e.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(t)}e.exports=r},function(e,t){function r(){return e.exports=r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},r.apply(this,arguments)}e.exports=r},function(e,t,r){var n=r(12),a=r(2);e.exports=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?a(e):t}},function(e,t,r){var n=r(19);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}},function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(t){return"function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?e.exports=n=function(e){return r(e)}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)},n(t)}e.exports=n},function(e,t,r){var n=r(17);function a(t,r,i){return"undefined"!=typeof Reflect&&Reflect.get?e.exports=a=Reflect.get:e.exports=a=function(e,t,r){var a=n(e,t);if(a){var i=Object.getOwnPropertyDescriptor(a,t);return i.get?i.get.call(r):i.value}},a(t,r,i||t)}e.exports=a},function(e,t){e.exports=function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}},function(e,t){e.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(e,t,r){var n=r(8);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=n(e)););return e}},function(e,t){e.exports=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}},function(e,t){function r(t,n){return e.exports=r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(t,n)}e.exports=r},function(e,t,r){"use strict";r.r(t);var n=r(12),a=r.n(n),i=r(7),o=r.n(i),s=r(13),c=r.n(s),u=r(9),l=r.n(u),f=r(3),p=r.n(f),d=r(10),h=r.n(d),v=r(8),b=r.n(v),g=r(2),m=r.n(g),y=r(11),O=r.n(y),j=r(5),_=r.n(j),$=r(6),w=r.n($),x=r(1),E=r.n(x),S=r(4),I=r(0);function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t,r=1;r<arguments.length;r++)t=null==arguments[r]?{}:arguments[r],r%2?A(t,!0).forEach((function(r){E()(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):A(t).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}));return e}var P=function(){function e(){_()(this,e),E()(this,"done",!1),E()(this,"vals",[{},{}]);var t=this,r=new Promise((function(e,r){t.setFunction(0,e),t.setFunction(1,r)}));return r.resolve=t.execFunction.bind(t,0),r.reject=t.execFunction.bind(t,1),r.isPending=function(){return!t.done},r.isResolved=function(){return t.vals[0].done},r.isRejected=function(){return t.vals[1].done},r.result=function(){return t.done&&t.vals[t.vals[0].done?0:1].rest},r}return w()(e,[{key:"setFunction",value:function(e,t){var r=this.vals[e];r.func=t,r.done&&t.apply(void 0,o()(r.rest))}},{key:"execFunction",value:function(e){if(!this.done){this.done=!0;for(var t=this.vals[e],r=arguments.length,n=Array(1<r?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];t.rest=n,t.done=!0,this.vals[1-e].done=!1,t.func&&t.func.apply(t,n)}}}]),e}(),F=function(e){function t(e){var r;_()(this,t),r=h()(this,b()(t).call(this,e)),E()(m()(r),"_noExec",0),E()(m()(r),"_resultPromises",void 0),E()(m()(r),"_newState",void 0),E()(m()(r),"_updates",[]),E()(m()(r),"_validation",null),E()(m()(r),"_defferedTimerId",void 0),E()(m()(r),"getState",r._getState),E()(m()(r),"noExec",(function(){r._noExec++})),E()(m()(r),"execute",(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return r._setExecution(null,Object(I.merge)(e,{execute:!0}))})),E()(m()(r),"setState",(function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=m()(r);return n._updates=[],n._newState=e,n._setExecution(null,t)})),E()(m()(r),"getActive",(function(){return r.get(J,"active")})),E()(m()(r),"validate",(function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=m()(r);return"boolean"==typeof e?n._validation=e:Re({path:e,value:!0},n.getState()).forEach((function(e){return n._validation=qe(n._validation||{},!0,e.path)})),n._setExecution(null,t)})),E()(m()(r),"get",(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ue.apply(void 0,[r.getState()].concat(t))})),E()(m()(r),"set",(function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(null===e)return r._setExecution([null],n);var a=l()({},n);return a.path=e,a.value=t,r._setExecution(a,n)})),E()(m()(r),"getValue",(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return r.get(J,e.inital?"inital":"current",e.path||[])})),E()(m()(r),"setValue",(function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=t.path,a=t.inital,i=t.replace,o=p()(t,["path","inital","replace"]);if(null===n)return r._setExecution([null],t);if(~(n=Ge(n||[]).slice()).indexOf(J))o.path=n;else{for(var s,c=r.getState();!Object(I.getIn)(c,n)&&n.length;)s=n.pop(),e=E()({},s,e),i=E()({},s,i);o.path=[a?"@inital":"@current"].concat(n)}return o.value=e,o.replace=i,r._setExecution(o,t)})),E()(m()(r),"getDefaultValue",(function(){return r.get(J,"default")})),E()(m()(r),"switch",(function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return r.set(e,t,k({},n,{macros:"switch"}))})),E()(m()(r),"setMessages",(function(e,t){var n=t||{},a=n.priority,i=void 0===a?0:a,o=n.group,s=void 0===o?3:o,c=n.path,u=void 0===c?[]:c,l=n.props,f=void 0===l?void 0:l,d=p()(n,["priority","group","path","props"]),h="@/messages/"+i+"/texts/"+s;null===e?(r.switch([u,h],[],d),Object(I.isObject)(f)&&r.switch([u,"@/messages/"+i],f,d)):Xe(e,{arrayAsValue:!0}).forEach((function(e){r.set([u,e,h],e.pop(),k({replace:!0},d)),Object(I.isObject)(f)&&r.set([u,e,"@/messages/"+i],f,d)}))})),E()(m()(r),"reset",(function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return t.status?r.set(Ge(t.path||"/"),Object(I.isUndefined)(t.value)?Y:t.value,(e={},E()(e,J,["status",t.status]),E()(e,"macros","switch"),e)):r.setValue(Y,t)})),E()(m()(r),"clear",(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return r.setValue(Z,e)})),E()(m()(r),"arrayAdd",(function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return r._setExecution(k({path:e,value:t,macros:"array"},n),n)})),E()(m()(r),"arrayItemOps",(function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return r._setExecution(k({path:e,op:t,macros:"arrayItem"},n),n)})),E()(m()(r),"setHidden",(function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return r._setExecution([k({path:[e,"@","/params/hidden"],value:t},n)],n)})),E()(m()(r),"showOnly",(function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return e=Ge(e),r._setExecution([k({path:[e.slice(0,-1),"/*/@/params/hidden"],value:!0},t),k({path:[e,"@","/params/hidden"],value:!1},t)],t)})),E()(m()(r),"getSchemaPart",(function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return e=Ge(e),ce(r.schema,e,ie(r.getState()))}));var n=m()(r);e.state?n._setState(e.state):!n._getState()&&n._setState(function(e){var t=xe(e.api.schema),r=t.state,n=t.dataMap,a=void 0===n?[]:n,i=t.defaultValues;r=Pe(r=Object(I.merge)(r,Object(I.setIn)({},i,[J,"current"])),e,a);var o=Object(I.getIn)(r,J,"current");return r=ke(r,e,Ve([],["inital"],o)),r=Ae(r=ke(r,e,Ve([],["default"],o)),e)}(n.UPDATABLE));var a,i,o,s=n._getState();return s[X]||n._setState((a=s,i=n.UPDATABLE,o=de(i.api.schema,ie(a)).dataMap,Pe(a,i,void 0===o?[]:o,null))),r}return O()(t,e),w()(t,[{key:"wrapper",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=this,r=function(r){return e[r]||t[r]},n=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"./";return t&&Ge(t,e.path)},a=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=1<arguments.length?arguments[1]:void 0,a=t.path,i=p()(t,["path"]);return null===a?i.path=null:(!Object(I.isUndefined)(a)||r)&&(i.path=n(a||"./")),e.wrapOpts?e.wrapOpts(i):i},i={validate:function(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"./",t=arguments.length,a=Array(1<t?t-1:0),i=1;i<t;i++)a[i-1]=arguments[i];return r("validate").apply(void 0,["boolean"==typeof e?e:n(e)].concat(a))},get:function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return r("get")(n(t))},bind:function(t){return e=t,i},getValue:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return i.get(J,e.inital?"inital":"current",n(e.path))},getApi:function(){return t}};return["setValue","setMessages"].forEach((function(e){return i[e]=function(t){for(var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length,o=Array(2<i?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];return r(e).apply(void 0,[t,a(n)].concat(o))}})),["noExec","setState","getActive","getDefaultValue"].forEach((function(e){return i[e]=function(){return r(e).apply(void 0,arguments)}})),["reset","clear","execute"].forEach((function(e){return i[e]=function(t){for(var n=arguments.length,i=Array(1<n?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return r(e).apply(void 0,[a(t,!0)].concat(i))}})),["showOnly","getSchemaPart"].forEach((function(e){return i[e]=function(){for(var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length,s=Array(2<o?o-2:0),c=2;c<o;c++)s[c-2]=arguments[c];return r(e).apply(void 0,[n(t),a(i)].concat(s))}})),["set","switch","arrayAdd","arrayItemOps","setHidden"].forEach((function(e){return i[e]=function(){for(var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],i=1<arguments.length?arguments[1]:void 0,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length,c=Array(3<s?s-3:0),u=3;u<s;u++)c[u-3]=arguments[u];return r(e).apply(void 0,[n(t),i,a(o)].concat(c))}})),i}},{key:"_clearActions",value:function(){this._newState=void 0,this._defferedTimerId=null,this._validation=null,this._updates=[],this._promise(!0)}},{key:"_execBatch",value:function(e,t,r,n){var a={type:M,state:this._newState,updates:e,api:this,forceValidation:n,opts:t,promises:r};return this._clearActions(),this.dispatch(we.bind(a)),r}},{key:"_setExecution",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(t.setExecution)return t.setExecution(e,t);var r=this;e&&Object(I.push2array)(r._updates,e),!0===t.force&&0<r._noExec&&r._noExec--;var n=r._promise();return!1===t.execute||r._noExec?n:(r._defferedTimerId&&clearTimeout(r._defferedTimerId),!0===t.execute?r._execBatch(r._updates,t,n,r._validation):r._defferedTimerId=setTimeout(r._execBatch.bind(r,r._updates,t,n,r._validation),t.execute||0),n)}},{key:"_promise",value:function(e){return e&&(this._resultPromises=null),this._resultPromises||(this._resultPromises=new P,this._resultPromises.vAsync=new P),this._resultPromises}}]),t}(function(){function e(t){if(_()(this,e),E()(this,"_isDispatching",void 0),E()(this,"_currentState",void 0),E()(this,"_reducer",void 0),E()(this,"_validator",void 0),E()(this,"_unsubscribe",void 0),E()(this,"_listeners",[]),E()(this,"JSONValidator",void 0),E()(this,"UPDATABLE",void 0),E()(this,"props",void 0),E()(this,"schema",void 0),E()(this,"dispatch",void 0),E()(this,"name",void 0),lt[t.name]){var r=lt[t.name];if(Object(I.isEqual)(r.props,t))return r}1==(t.getState?1:0)+(t.setState?1:0)&&new Error('Expected both "getState" and "setState" or none but not only one of them.');lt[t.name]=this,this.props=t,this.schema=U(t.schema,t.elements),this.name=t.name||"",this.dispatch=t.store?t.store.dispatch:this._dispatch.bind(this),this._reducer=N(),t.JSONValidator&&(this.JSONValidator=t.JSONValidator(this.schema)),this._getState=this._getState.bind(this),this._setState=this._setState.bind(this),t.setState&&t.store&&(this._unsubscribe=this.props.store.subscribe(this._handleChange.bind(this))),this.UPDATABLE={update:{},replace:{},api:this}}return w()(e,[{key:"_dispatch",value:function(e){return"function"==typeof e?e(this._dispatch.bind(this)):(this._setState(this._reducer(this._getState()||{},e)),e)}},{key:"_setState",value:function(e){e===this._getState()||(this.props.setState?this.props.setState(e):this._currentState=e,this.props.store&&this._setStoreState(e),this._listeners.forEach((function(t){return t(e)})))}},{key:"_getState",value:function(){return this.props.store?this._getStoreState():this.props.getState?this.props.getState():this._currentState}},{key:"_setStoreState",value:function(e){return this.props.store.dispatch({type:D,state:e,api:this})}},{key:"_getStoreState",value:function(){return this.props.name&&this.props.store.getState()[C][this.props.name]}},{key:"_handleChange",value:function(){var e=this._getStoreState();e!==(this.props.getState?this.props.getState():this._currentState)&&this._setState(e)}},{key:"addListener",value:function(e){return this._listeners.push(e),this.props.store&&!this._unsubscribe&&(this._unsubscribe=this.props.store.subscribe(this._handleChange.bind(this))),this.delListener.bind(this,e)}},{key:"delListener",value:function(e){if(Object(I.isUndefined)(e))this._listeners=[];else{var t=this._listeners.indexOf(e);~t&&this._listeners.splice(t,1)}this._listeners.length||!this._unsubscribe||this.props.setState||(this._unsubscribe(),delete this._unsubscribe)}}]),e}()),D="FFROM_SET_STATE",M="FFROM_UPDATE_STATE",C="fforms";function N(e){e&&(C=e);var t={};return t[D]=function(e,t){return t.api.props.store?function(e,t,r){if(e[t]!==r){var n=k({},e);return n[t]=r,n}return e}(e,t.api.name,t.state):t.state},function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=1<arguments.length?arguments[1]:void 0,n=t[r.type];return n?n(e,r):e}}var U=function(e,t){return K(e)?e:V(t,e)},V=Object(I.memoize)((function(e,t){return function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=1<arguments.length?arguments[1]:void 0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];if(K(r))return r;var a=Object(I.isArray)(r)?[]:{_compiled:!0},i=r,o=i._validators,s=i._data$,c=i._stateMaps,u=i._oneOfSelector,l=p()(i,["_validators","_data$","_stateMaps","_oneOfSelector"]),f={noStrictArrayResult:!0};return o&&(a._validators=Ye(R(W(t,o,n)),(function(e){return tt(e,f)}))),s&&(a._data$=Ye(R(W(t,s,n)),(function(e){return tt(e)}))),c&&(a._stateMaps=W(t,c,n)),u&&(a._oneOfSelector=W(t,tt(u,f),n)),Object(I.objKeys)(l).forEach((function(r){if("_"==r.substr(0,1))return a[r]="_presets"!==r&&Qe(l[r])?q(t,l[r],n):l[r];switch(r){case"default":case"enum":a[r]=l[r];break;case"definitions":case"properties":case"patternProperties":case"dependencies":var i={},o=l[r]||{};Object(I.isArray)(o)?i=o:Object(I.objKeys)(o).forEach((function(a){return i[a]=e(t,o[a],n.concat(r,a))})),a[r]=i;break;default:a[r]=Object(I.isMergeable)(l[r])?e(t,l[r],n.concat(r)):l[r]}})),a}(e,t)})),R=function(e){return Object(I.isObject)(e)?e:Object(I.toArray)(e)};function K(e){return Object(I.getIn)(e,"_compiled")}function T(e,t,r){if(Object(I.isUndefined)(e))throw new Error('Reference "'+t+"\" leads to undefined object's property in path: "+He(r));return!0}function B(e,t){for(var r=e["^"],n=!1;!n;){n=!0;for(var a=0;a<t.length;a++){if(e=Object(I.getIn)(e,t[a]),Qe(e)){t=Je(e).concat(t.slice(a+1)),e={"^":r},n=!1;break}if(Object(I.isFunction)(e)&&a+1!==t.length){e=e(r,t.slice(a+1));break}if(Object(I.isUndefined)(e))break}}return e}function L(e,t){return"_$"==e.substr(0,2)||t._$skipKeys&&~t._$skipKeys.indexOf(e)}var q=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"",a={"^":e};return Object(I.deArray)(t.split("|").map((function(e){e=e.trim(),Qe(e)?n=e.substr(0,e.lastIndexOf("/")+1):e=n+e,e=e.split(":");for(var t,i,o=0;o<e.length;o++)if(i=e[o]){Qe(i)||(i=n+i);var s=B(a,Je(i));T(s,i,r.concat("@"+o)),t=t?Object(I.merge)(t,s):s}return t})))};function W(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];if(Qe(t))return q(e,t,r);if(!Object(I.isMergeable)(t))return t;var n=function e(t,r){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];if(!Object(I.isMergeable)(r))return r;var a=r.$_ref,i=void 0===a?"":a,o=p()(r,["$_ref"]);i=i.split(":");for(var s=[],c=0;c<i.length;c++)if(i[c]){var u=Je(i[c]);if("^"!==u[0])throw new Error("Can reffer only to ^");var l=B({"^":t},u);T(l,i[c],n.concat("@"+c)),Object(I.isMergeable)(l)&&(l=e(t,l,n.concat("@"+c))),s.push(l)}for(var f=Object(I.isArray)(r)?[]:{},d=0;d<s.length;d++)f=Object(I.merge)(f,s[d]);return Object(I.merge)(f,Ye(o,e.bind(null,t),n))}(e,t),a=Object(I.isArray)(n)?[]:{};return Object(I.objKeys)(n).forEach((function(t){var i=n[t];Qe(i)&&(i=q(e,i,r),"$"!==t&&!L(t,n)&&(Object(I.isFunction)(i)||Object(I.isArray)(i)&&i.every(I.isFunction))&&(i={$:i})),a[t]=L(t,n)?i:W(e,i,r.concat(t))})),a}function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function G(e){for(var t,r=1;r<arguments.length;r++)t=null==arguments[r]?{}:arguments[r],r%2?z(t,!0).forEach((function(r){E()(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):z(t).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}));return e}function H(e){var t=function(e,t){if("object"!==a()(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==a()(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===a()(t)?t:t+""}var J=Symbol.for("FFormData"),Q=Symbol.for("FFormDataMapTree"),X=Symbol.for("FFormDataMap"),Y=Symbol.for("FFormReset"),Z=Symbol.for("FFormClear"),ee=void 0,te=["null","boolean","integer","number","string","array","object"];te.any=function(){return!0},te.null=function(e){return null===e},te.boolean=function(e){return"boolean"==typeof e},te.number=I.isNumber,te.integer=I.isInteger,te.string=I.isString,te.array=I.isArray,te.object=I.isObject,te.empty={any:null,null:null,boolean:!1,number:0,integer:0,string:"",array:Object.freeze([]),object:Object.freeze({})},te.detect=function(e){for(var t=0;t<te.length;t++)if(te[te[t]](e))return te[t]};var re={};function ne(e){var t=[];if(be(e))return t;if("array"==e[J].fData.type)for(var r=0;r<Object(I.getIn)(e,J,"length");r++)t.push(r.toString());else t=Object(I.objKeys)(e).filter(Boolean);return t}re.array=function(e,t,r,n){var a=n,i=a.path,o=(a.macros,a.value,a[J],p()(a,["path","macros","value",J].map(H))),s=Ne([r.update,e],i,J,"length");if(!Object(I.isNumber)(s))return e;if(Object(I.isArray)(n.value)){for(var c=[],u={},l=0;l<n.value.length;l++)c[s+l]=n.value[l],u[s+l]=Object(I.getIn)(n.replace,l);return c.length=s+n.value.length,Ee(e,r,c,u,i,n.setOneOf)}return 0>(s+=n.value||1)&&(s=0),ke(e,r,Ve(i,["length"],s,!1,o))},re.arrayItem=function(e,t,r,n){var a=n.path,i=n.op,s=n.value||0,c=parseInt(a.pop()),u=c,l=ue(ce(t,a,ie(e))),f=Ne([r.update,e],a,J,"length")-1;"up"==i&&u--,"down"==i&&u++,"first"==i&&(u=l),("last"==i||"del"==i)&&(u=f),"move"==i&&(u=s),"shift"==i&&(u+=s),u<l&&(u=l),u>f&&(u=f);var p={},d={},h={},v=[];v[0]=Object(I.getIn)(r.update,a),v[1]=Object(I.getIn)(r.update,J,"current",a),v[2]=Object(I.getIn)(r.replace,a),v[3]=Object(I.getIn)(r.replace,J,"current",a);for(var b=o()(Ce(e,r)(a,J,"keys")),g=function(t){p[t]=Object(I.getIn)(e,a,t),d[t]=p[t][J].arrayItem,h[t]=Object(I.getIn)(e,J,"current",a,t),v.forEach((function(e){return Object(I.isMergeable)(e)&&!e.hasOwnProperty(t)&&(e[t]=Z)}))},m=Math.min(c,u);m<=Math.max(c,u);m++)g(m);p=Object(I.moveArrayElems)(p,c,u),h=Object(I.moveArrayElems)(h,c,u),b=Object(I.moveArrayElems)(b,c,u);var y=function e(t){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],n=Object(I.getIn)(t,Q,J)||[],a=n.map((function(e){return Object(I.merge)(e,{emitter:r})})),i=n.length?E()({},Q,E()({},J,[])):void 0;return Object(I.objKeys)(t).forEach((function(o){var s;t[o]&&(s=e(t[o],r.concat(o)),Object(I.push2array)(n,s.maps2disable),Object(I.push2array)(a,s.maps2enable),s.clearBinded&&(!i&&(i={}),i[o]=s.clearBinded))})),{maps2disable:n,maps2enable:a,clearBinded:i}}(p,a),O=y.maps2disable,j=y.maps2enable,_=y.clearBinded;return _&&(p=Object(I.merge)(p,_)),v.forEach((function(e){if(Object(I.isMergeable)(e)){Object(I.moveArrayElems)(e,c,u);for(var t=Math.min(c,u);t<=Math.max(c,u);t++)e[t]===Z&&delete e[t]}})),Object(I.objKeys)(p).forEach((function(e){p[e]=Object(I.merge)(p[e],it(J,"arrayItem",d[e]),{replace:it(J,"arrayItem",!0)})})),e=Object(I.merge)(e,it(a,p),{replace:De(n.path.length+1)}),e=ke(e=Object(I.merge)(e,it(J,"current",a,h),{replace:De(n.path.length+3)}),r,Ve(a,["keys"],b)),"del"==i&&(e=ke(e,r,Ve(a,["length"],f))),e=Pe(e=Ae(e,r),r,O,!0),e=Pe(e,r,j)},re.switch=function(e,t,r,n){return Xe(it(n[J]||[],n.value),{arrayAsValue:!0}).forEach((function(a){return e=function e(t,r,n,a){var i=Object(I.getIn)(t,a.path),o=ne(i);if(a.value==Y&&"status"==a[J][0]){var s=G({},a);s.value="untouched"==a[J][1]?be(i)?1:o.length:0,t=ke(t,n,s)}else t=ke(t,n,a);return o.forEach((function(i){return t=e(t,r,n,Object(I.merge)(a,{path:a.path.concat(i)}))})),t}(e,t,r,Ve(n.path,a,a.pop()))})),e},re.setExtraStatus=function(e,t,r,n){var a=n[J]||[],i=Ne([r.update,e],n.path,J,a),o=0<n.value;return!i==o&&(e=ke(e,r,Ve(n.path,a,o)),e=re.setStatus(e,t,r,Ve(n.path,["status",a[a.length-1]],o?1:-1))),e},re.setStatus=function(e,t,r,n){var a=n[J]||[];if(2<a.length)return re.setExtraStatus(e,t,r,n);var i=a[1];if(!i)return e;if("valid"==i||"pristine"==i||"touched"==i)throw new Error('Setting "'+i+'" directly is not allowed');var o=Ne([r.update,e],n.path,J,a),s=be(e,n.path);if("untouched"==i&&0==o&&!s)return e;var c,u=o+n.value;return s&&1<u&&(u=1),0>u&&(u=0),e=ke(e,r,Ve(n.path,["status",i],u)),0==(c=n.path).length||1==c.length&&"#"==c[0]||!o==!u||(e=re.setStatus(e,t,r,Ve(n.path.slice(0,-1),a,0<u?1:-1))),e},re.setCurrent=function(e,t,r,n){return Ee(e,r,n.value,n.replace,n.path,n.setOneOf)},re.setOneOf=function(e,t,r,n){if(Object(I.getIn)(e,n.path,J,"oneOf")==n.value)return Object(I.isUndefined)(n.setValue)||(e=Ee(e,r,n.setValue,!1,n.path)),e;n.macros;var a=p()(n,["macros"]);return a[J]=["oneOf"],Object(I.isUndefined)(a.setValue)&&(e=Ae(e,r),a.setValue=Object(I.getIn)(e,J,"current",n.path)),ke(e,r,a)};var ae=Object(I.memoize)((function(){return{}}));function ie(e){return function(t){var r=Object(I.getIn)(Object(I.isFunction)(e)?e():e,t,J);return{oneOf:Object(I.getIn)(r,"oneOf"),type:Object(I.getIn)(r,"fData","type")}}}function oe(e,t){"function"==typeof e&&(e=e());var r={},n=r;Object(I.setIn)(n,Object(I.getIn)(e,J,"oneOf"),J,"oneOf"),Object(I.setIn)(n,Object(I.getIn)(e,J,"fData","type"),J,"type");for(var a=0;a<t.length;a++)Object(I.isUndefined)(t[a])||""===t[a]||(n[t[a]]={},n=n[t[a]],e=Object(I.getIn)(e,t[a]),Object(I.setIn)(n,Object(I.getIn)(e,J,"oneOf"),J,"oneOf"),Object(I.setIn)(n,Object(I.getIn)(e,J,"fData","type"),J,"type"));var i=function(e,t){return Object(I.isUndefined)(t)?Object(I.getIn)(r,e,J):Object(I.setIn)(r,t,e,J)};return i._canSet=!0,i}var se=Object(I.memoize)((function(e){return{_compiled:!0,oneOf:e,_oneOfSelector:tt((function(){return Je(this.path).pop()%e.length}),{noStrictArrayResult:!0})}}));function ce(e,t,r,n){function a(e,r){var n=[];if(r.items){if(!Object(I.isArray)(r.items))return r.items;n=r.items}if(e<n.length)return n[e];if(!1!==r.additionalItems)return r.additionalItems&&!0!==r.additionalItems?r.additionalItems:se(n);throw new Error(f+t.join("/"))}function i(e,t){var r=Je(t);if("#"==t[0])return Object(I.getIn)(e,r);throw new Error("Can only ref to #")}function o(t){if(t.$ref||t.allOf||t.oneOf)if(h.get(t))t=h.get(t);else{var r=t;if((t=s(e,t)).oneOf){var n=t,a=n.oneOf,i=p()(n,["oneOf"]);t=a.map((function(t,r){return I.merge.all(s(e,t),[i,{_oneOfIndex:r}],{array:"replace"})}))}h.set(r,t)}return t}function s(e,t){if((t=function(e,t){for(;t.$ref;)t=i(e,t.$ref);return t}(e,t)).allOf){for(var r,n=t,a=n.allOf,o=p()(n,["allOf"]),c=0;c<a.length;c++)r=Object(I.merge)(r,s(e,a[c]),{array:"replace"});t=Object(I.merge)(r,o)}return t}function c(e,t,r){var n=0,a=te.detect(t);if(a){e=Object(I.toArray)(e);for(var i,o=0;o<e.length;o++)if(!(i=e[o].type)||Object(I.toArray)(i).some((function(e){return e===a}))){n=o;break}e[n]._oneOfSelector&&(n=at.call({path:He(r)},e[n]._oneOfSelector,t),Object(I.isArray)(n)&&(n=n[0]))}return{oneOf:n,type:a}}for(var u=Object(I.isFunction)(r)?r:void 0,l=Object(I.isFunction)(r)?void 0:r,f="Schema path not found: ",d=e,h=Object(I.getSetIn)(ae(e),new Map,"combinedSchemas"),v="#"==t[0]?1:0;v<t.length;v++){if(!d)throw new Error(f+t.join("/"));d=o(d);var b=t.slice(0,v),g=u?u(b):c(d,Object(I.getIn)(l,b),b),m=g.oneOf,y=g.type;if(Object(I.isArray)(d)&&(d=d[m||0]),Object(I.isUndefined)(y)&&(y=Object(I.toArray)(d.type||"null")[0]),"array"==y){if(isNaN(parseInt(t[v])))throw new Error(f+t.join("/"));d=a(t[v],d)}else{if(!d.properties||!d.properties[t[v]])throw new Error(f+t.join("/"));d=d.properties[t[v]]}}if(d=o(d),n)return d;if(Object(I.isArray)(d)){var O=u?u(t):c(d,Object(I.getIn)(l,t),t);m=O.oneOf,y=O.type;d=d[m||0]}return d}var ue=Object(I.memoize)((function(e){return Object(I.isArray)(e.items)?!1===e.additionalItems?e.items.length:"object"===a()(e.additionalItems)?e.items.length:0==e.items.length?0:e.items.length-1:0})),le={invalid:0,dirty:0,untouched:1,pending:0,valid:!0,touched:!1,pristine:!0},fe=Object(I.memoize)((function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:e.default,a=e._params,i=void 0===a?{}:a,o=e._data,s=void 0===o?{}:o,c=Object.assign({params:i},s);Object(I.isObject)(c.messages)||(c.messages={}),Object(I.isUndefined)(n)&&(n=te.empty[r||"any"]),c.oneOf=t,c.status=le,Object(I.isObject)(c.fData)||(c.fData={});var u=c.fData;if(u.type=r,u.required=e.required,u.title=e.title,u.placeholder=e._placeholder,u.additionalProperties=e.additionalProperties,u.strictLayout=e._strictLayout,e.enum&&(u.enum=e.enum),e._enumExten&&(u.enumExten=e._enumExten),Object(I.isArray)(e._enumExten)&&Object(I.isArray)(e.enum)){var l={};u.enumExten=u.enumExten.map((function(e){return Object(I.isString)(e)?{label:e}:e})),u.enum.forEach((function(e,t){return l[e]=u.enumExten[t]})),u.enumExten=l}else if(e._enumExten&&!u.enum)if(Object(I.isArray)(u.enumExten)){var f={},p=[];u.enumExten.forEach((function(e){Object(I.isString)(e)?(f[e]={label:e},p.push(e)):Object(I.isObject)(e)&&(Object(I.isUndefined)(e.value)?!Object(I.isUndefined)(e.label)&&(f[e.label]=e,p.push(e.label)):(Object(I.isUndefined)(e.label)&&(e=G({},e,{label:e.value})),f[e.value]=e,p.push(e.value)))})),u.enumExten=f,u.enum=p}else u.enum=Object(I.objKeys)(u.enumExten).filter((function(e){return u.enumExten[e]}));e._oneOfSelector&&(u.oneOfSelector=!0),ge(e,r)?c.value=n:delete c.value;var d=1;if("array"==r?(c.length=Object(I.getIn)(n,"length")||0,!Object(I.isUndefined)(e.minItems)&&c.length<e.minItems&&(c.length=e.minItems),c.fData.canAdd=he(e,c.length),d=c.length):"object"==r&&(d=Object(I.objKeys)(e.properties||{}).length),1!=d&&(c.status=G({},c.status,{untouched:d})),e._data$){var h=[];Object(I.objKeys)(e._data$).forEach((function(t){return Object(I.push2array)(h,at.call({},e._data$[t],e))})),c=Object(I.merge)(c,h)}return c}));function pe(){return Date.now().toString(36)+Math.random().toString(36)}function de(e,t){var r,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],a=3<arguments.length?arguments[3]:void 0,i={},o=[],s=(t(n)||{}).oneOf,c=Object(I.toArray)(ce(e,n,t,!0));if(Object(I.isUndefined)(s)){var u=c[s||0]._oneOfSelector;if(u){var l=at.call({path:He(n)},u,a);Object(I.isArray)(l)&&(l=l[0]),s=l}}var f=me(c,a,s),d=f.schemaPart,h=f.oneOf,v=f.type;if(Object(I.isUndefined)(d)||!Object(I.isUndefined)(s)&&s!=h){console.info('Passed value: "'+a+'" is not supported by schema.type in path "'+n.join("/")+'" and oneOfIndex "'+s+'". Reset value to default.\n');var b=me(c,a=c[s||0].default,s);d=b.schemaPart,h=b.oneOf,v=b.type}if(Object(I.push2array)(o,function(e,t){return Object(I.objKeys)(e).map((function(r){var n=e[r],a=n.from,i=n.to,o=p()(n,["from","to"]);return o=!o.$||tt(o),a&&i||(o=!1),{emitter:t,from:a,to:i,action:o}}))}(d._stateMaps||[],n)),i[X]={},i[J]=fe(d,h,v,a),t(n,{oneOf:h,type:v}),i[J].hasOwnProperty("value"))r=i[J].value;else{if("array"==v){(r=[]).length=i[J].length;for(var g=[],m=0;m<r.length;m++){var y=de(e,t,n.concat(m),Object(I.getIn)(Object(I.isUndefined)(a)?d.default:a,m)),O=y.state,j=y.dataMap,_=y.defaultValues;r[m]=_,Object(I.push2array)(o,j),O=Object(I.merge)(O,E()({},J,{arrayItem:ve(d,m,r.length)}),{replace:E()({},J,{ArrayItem:!0})}),O=Object(I.merge)(O,E()({},J,{params:{uniqKey:pe()}})),i[m]=O,g[m]=O[J].params.uniqKey}i[J]=Object(I.merge)(i[J],{keys:g})}else if("object"==v){r=Object(I.isObject)(d.default)?G({},d.default):{},a&&!1===d.additionalProperties&&(a=Se(d,a),r=Se(d,r)),Object(I.isObject)(a)&&Object.assign(r,a);var $=i[J].fData.required;$=Object(I.isArray)($)&&$.length&&$,Object(I.objKeys)(d.properties||{}).forEach((function(s){var c=de(e,t,n.concat(s),Object(I.getIn)(Object(I.isUndefined)(a)?d.default:a,s)),u=c.state,l=c.dataMap,f=c.defaultValues;r[s]=f,Object(I.push2array)(o,l),$&&~$.indexOf(s)&&(u=Object(I.merge)(u,E()({},J,{fData:{required:!0}}))),i[s]=u}))}a&&(r=Object(I.merge)(a,r,{replace:De(1)}))}return{state:i,defaultValues:r,dataMap:o}}function he(e,t){var r=ue(e);e.minItems;return(!1!==e.additionalItems||t<r)&&t<(e.maxItems||1/0)}function ve(e,t,r){var n={},a=ue(e);e.minItems;return n.canUp=a<t,n.canDown=a<=t&&t<r-1,n.canDel=t>=Math.min(a,r-1),n}function be(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return I.hasIn.apply(void 0,[e].concat(r,[J,"value"]))}function ge(e,t){return"array"!==t&&"object"!==t||Object(I.getIn)(e,"_simple")}function me(e,t,r){Object(I.isArray)(e)||(e=[e]);var n=e.map((function(e,t){return t}));r&&Object(I.moveArrayElems)(n,r,0);for(var a=0;a<n.length;a++){var i=n[a],o=e[i].type||te;Object(I.isArray)(o)||(o=[o]);for(var s=void 0,c=Object(I.isUndefined)(t)?(s=!0)&&e[i].default:t,u=0;u<o.length;u++)if(te[o[u]](c)||Object(I.isUndefined)(c))return{schemaPart:e[i],oneOf:i,type:o[u]};if(s&&!Object(I.isUndefined)(e[i].default))throw new Error("Type of schema.default is not supported by schema.type")}return{}}function ye(e,t,r,n){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0;return Object(I.toArray)(n).map((function(e){return"object"===a()(e)?e:{group:i,data:e}})).forEach((function(n){var a=n.path,o=p()(n,["path"]);if(a)a=Ge(a,r),e=ye(e,t,a,o,i);else{var s=o.group,c=void 0===s?i:s,u=o.data,l=o.priority,f=void 0===l?0:l,d=p()(o,["group","data","priority"]),h=Object(I.getSetIn)(t.update,{},r,J,"messages",f);Object.assign(h,d),Object(I.isObject)(h.texts)||(h.texts={}),Object(I.isArray)(h.texts[c])||(h.texts[c]=[]),u&&Object(I.push2array)(h.texts[c],u)}})),e}function Oe(e){for(var t,r=Object(I.objKeys)(e||{}),n=0;n<r.length;n++){for(var a=Object(I.getIn)(e,r[n],"texts")||{},i=Object(I.objKeys)(a),o=0;o<i.length;o++)if(a[i[o]]&&a[i[o]].length){t=parseInt(r[n]);break}if(!Object(I.isUndefined)(t))break}return t}function je(e,t,r,n){return e=ke(e,t,Ve(r,["status","validation","invalid"],0===n?1:0,!0,{macros:"setStatus"})),e=ke(e,t,Ve(r,["status","priority"],n))}function _e(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[],a=Oe(Object(I.getIn)(e,n,J,"messages"));return be(e=je(e,t,n,a),n)||Object(I.objKeys)(r).forEach((function(a){return e=_e(e,t,r[a],n.concat(a))})),e}function $e(e,t,r,n){var a,i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:[],o=!!(5<arguments.length&&void 0!==arguments[5])&&arguments[5],s=t.api.schema;try{a=ce(s,i,ie(e))}catch(e){}if(!a||be(e,i)){var c=Object(I.getIn)(e,J,"current",i);Object(I.isUndefined)(r)&&(r=Object(I.getIn)(e,J,"default",i));var u=o||c!==r?1:-1,l=i,f=["status","dirty"];a||(l=l.slice(),f.push(l.pop(),f.pop())),e=ke(e,t,Ve(l,f,u,!1,{macros:"setStatus"}))}else{var p=Object(I.objKeys)(n||{});if("array"==a.type){~p.indexOf("length")||p.push("length");var d=ne(Object(I.getIn)(e,i));p=p.filter((function(e){return isNaN(parseInt(e))||~d.indexOf(e)}))}o=o||!Object(I.isMergeable)(r),p.forEach((function(a){return e=$e(e,t,Object(I.getIn)(r,a),Object(I.getIn)(n,a),i.concat(a),o)}))}return e}function we(e){var t=this.updates,r=this.state,n=this.api,a=this.forceValidation,i=this.opts,o=this.promises,s=n.getState,c=(n.schema,n.UPDATABLE);r||(r=s());var u=r;t.forEach((function(e){return r=ke(r,c,e)})),r=Ae(r,c);var l=Object(I.getIn)(u,J,"current");if(c.forceCheck&&(l=Object(I.merge)(l,c.forceCheck),c.forceCheck=void 0),u[J].inital!==r[J].inital){var f=Object(I.mergeState)(u[J].inital,r[J].inital,{diff:!0}).changes;r=$e(r,c,r[J].inital,f)}var p,d=Object(I.mergeState)(l,Object(I.getIn)(r,J,"current"),{diff:!0}).changes;return d&&(r=$e(r,c,r[J].inital,d)),r=Ae(r=function e(t,r,n){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[];return Object(I.getIn)(r.update,a,J,"status","pristine")?Object(I.isMergeable)(n)&&Object(I.getIn)(t,J,"current",a)!==n&&(Object(I.setIn)(r.update,n,J,"current",a),Object(I.setIn)(r.replace,!0,J,"current",a)):Object(I.objKeys)(Object(I.getIn)(r.update,a)).forEach((function(i){return e(t,r,Object(I.getIn)(n,i),a.concat(i))})),t}(r,c,r[J].inital),c),i.noValidation?p=a:a?(Xe(d).forEach((function(e){e.pop(),qe(a,!0,e)})),p=a):p=Object(I.isMergeable)(d)?d:!Object(I.isUndefined)(d),p&&(r=function(e,t,r){var n=r.api,a=r.force,i=(r.opts,r.promises),o=n.JSONValidator,s=n.schema,c=n.getState,u=n.UPDATABLE,l=e[J].current,f=[],p=!0===a?l:a;if(!p||0==Object(I.objKeys)(p).length)return i.resolve(),i.vAsync.resolve(),e;o&&(e=function e(t,r){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],a=Object(I.getIn)(t,n,J,"fData","type");return a?(("object"==a||"array"==a)&&r&&Object(I.objKeys)(r).forEach((function(a){return e(t,r[a],n.concat(a))})),Ie(u,{},!0,n,J,"messages","0","texts"),t):t}(e,p),o(l).forEach((function(t){return ye(e,u,t[0],t[1])}))),e=function e(t,r,n){var a,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[];try{a=ce(s,i,ie(t))}catch(e){return t}var o=be(t,i);!o&&n&&Object(I.objKeys)(n).forEach((function(a){return t=e(t,r[a],n[a],i.concat(a))}));var c=Object(I.getIn)(a,"_validators");if(c){var l=Me(u.api,He(i));Object(I.objKeys)(c).forEach((function(e){var n=c[e],a=[];l.updates=a;var s=at.call(l,n,r);s&&s.then&&"function"==typeof s.then?(s.validatedValue=r,s.path=i,s.selfManaged=o,f.push(s),t=ke(t,u,Ve(i,["status","validation","pending"],1,!0,{macros:"setStatus"}))):t=ye(t,u,i,s,1),a.length&&a.forEach((function(e){return t=ke(t,u,e)})),l.updates=null}))}return t}(e,l,p);var d=u.update;return e=Ae(e,u),e=Ae(e=_e(e,u,d),u),i.resolve(),f.length?Promise.all(f).then((function(e){for(var r=c(),a=n.UPDATABLE,o=r[J].current,s=0;s<f.length;s++){var u=f[s],l=u.validatedValue,p=u.path;u.selfManaged;l==Object(I.getIn)(o,p)&&(r=ke(r=ye(r,a,p,e[s]||"",2),a,Ve(p,["status","validation","pending"],0,!1,{macros:"setStatus"})))}var d=a.update;r=Ae(r,a),r=Ae(r=_e(r,a,d),a),t({type:D,state:r,api:n}),i.vAsync.resolve()})).catch((function(e){for(var r=c(),a=n.UPDATABLE,o=r[J].current,s=0;s<f.length;s++){var u=f[s],l=u.validatedValue,p=u.path;u.selfManaged;l==Object(I.getIn)(o,p)&&(r=ke(r,a,Ve(p,["status","validation","pending"],0,!1,{macros:"setStatus"})))}var d=a.update;r=Ae(r,a),r=Ae(r=_e(r,a,d),a),t({type:D,state:r,api:n}),i.vAsync.reject(e)})):i.vAsync.resolve(),e}(r,e,{force:p,api:n,opts:i,promises:o})),e({type:D,state:r,api:n}),o}var xe=Object(I.memoize)((function(e){return de(e,oe({},[]))}));function Ee(e,t,r,n){var a=4<arguments.length&&void 0!==arguments[4]?arguments[4]:[],i=5<arguments.length?arguments[5]:void 0;if((r===Y||Object(I.isUndefined)(r))&&(r=Object(I.getIn)(e,J,"inital",a)),(r===Z||Object(I.isUndefined)(r))&&(r=Object(I.getIn)(e,J,"default",a)),Object(I.getIn)(e,J,"current",a)===r&&!Object(I.hasIn)(t.update,J,"current",a))return e;var o=t.api.schema,s=Object(I.getIn)(e,a);if(!s){if("length"==a[a.length-1]){var c=a.slice(0,-1);if("array"==Object(I.getIn)(e,c)[J].fData.type)return ke(e,t,Ve(c,["length"],r))}return ke(e,t,Ve([],["current"].concat(a),r,n))}s[J].fData.oneOfSelector&&Me(t.api,He(a));var u=s[J].fData.oneOfSelector,l=s[J].fData.type;if(!Object(I.isUndefined)(i)||u||!te[l||"any"](r)){var f=ce(o,a,ie(e),!0),p=s[J].oneOf;if(u){var d=f[p]._oneOfSelector;i=at.call({path:He(a)},d,r),Object(I.isArray)(i)&&(i=i[0])}var h=me(f,r,Object(I.isUndefined)(i)?p:i),v=h.schemaPart,b=h.oneOf,g=h.type;if(p!==b){if(v)return Object(I.getIn)(e,J,"current",a),ge(v,g)||s[J].fData.type!==g||(r=Object(I.merge)(Object(I.getIn)(e,J,"current",a),r,{replace:n})),ke(e,t,Ve(a,["oneOf"],b,!1,{type:g,setValue:r}));console.warn('Type "'+te.detect(r)+'" not found in path ['+a.join("/")+"]")}}if(be(s))e=ke(e,t,Ve(a,["value"],r,n));else if(Object(I.isMergeable)(r)){"array"!=l||Object(I.isUndefined)(r.length)||(e=ke(e,t,Ve(a,["length"],r.length)),s=Object(I.getIn)(e,a));var m="object"==l&&!1===s[J].fData.additionalProperties;if(m&&(r=Se(ce(o,a,ie(e)),r)),!0===n){var y=Object(I.isArray)(r)?[]:{};ne(s).forEach((function(e){return y[e]=void 0})),r=Object.assign(y,r)}if(Object(I.objKeys)(r).forEach((function(i){return e=Ee(e,t,r[i],!0===n||Object(I.getIn)(n,i),a.concat(i))})),!0===n||m){e=Ae(e,t),s=Object(I.getIn)(e,a);var O=Object(I.getIn)(e,J,"current",a);ne(s).forEach((function(e){return r[e]=O[e]})),e=ke(e,t,Ve([],["current"].concat(a),r,n))}}return e}function Se(e,t){if("object"!==e.type||!1!==e.additionalProperties)return t;var r={},n=e.properties||{},a=Object(I.objKeys)(e.patternProperties||{}).map((function(e){return new RegExp(e)}));return Object(I.objKeys)(t).forEach((function(e){(n[e]||a.some((function(t){return e.match(t)})))&&(r[e]=t[e])})),r}function Ie(e,t,r){for(var n=arguments.length,a=Array(3<n?n-3:0),i=3;i<n;i++)a[i-3]=arguments[i];return Xe(r).forEach((function(r){var n=r.pop();I.setIn.apply(void 0,[e,Object(I.getIn)(t,r),"update"].concat(a,[r])),n&&I.setIn.apply(void 0,[e,n,"replace"].concat(a,[r]))})),e}function Ae(e,t){return e=Object(I.merge)(e,t.update,{replace:t.replace}),t.update={},t.replace={},e}function ke(e,t,r){if(!r)return e;var n,a=t.update,i=(t.replace,t.api.schema);if(n=r,Object(I.isUndefined)(Object(I.getIn)(n,J))||!Object(I.isArray)(n[J]))return function(e,t,r){return Re(r,e).forEach((function(r){if(0===r.path.length&&"current"==r[J][0]&&(r.macros="setCurrent",r.path=r[J].slice(1),r[J]=[]),"value"==r[J][0])r.macros="setCurrent",r.path=r.path.concat(r[J].slice(1)),r[J]=[];else{if("status"==r[J][0])return void console.warn("Status should not be changed through StateApi. Update ignored.");"oneOf"==r[J][0]&&(r.macros="setOneOf")}e=ke(e,t,r)})),e}(e,t,r);if(r.macros){var s=re[r.macros];if(!s)throw new Error('"'+s+'" not found in macros');return s(e,i,t,r)}var c=r.value,u=r.path,l=r.replace,f=r[J];if(Object(I.isFunction)(c)&&(c=c(Ce(e,t)(u,J,f))),0!=u.length||"inital"!=f[0]&&"default"!=f[0]){if(Object(I.isObject)(c)&&(0==f.length&&(Object(I.hasIn)(c,"value")||Object(I.hasIn)(c,"status")||Object(I.hasIn)(c,"length")||Object(I.hasIn)(c,"oneOf"))||1==f.length&&"status"==f[0]))return function(e,t,r){var n=r.value,a=r.path,i=r.replace,o=r[J]||[];if(0==o.length){n.value,n.status,n.length,n.oneOf;var s=p()(n,["value","status","length","oneOf"]);["value","status","length","oneOf"].forEach((function(r){Object(I.hasIn)(n,r)&&(e=ke(e,t,Ve(a,[r],n[r],Object(I.getIn)(i,r))))})),Object(I.objKeys)(s).length&&(e=ke(e,t,Ve(a,o,s,i)))}else Object(I.objKeys)(n).forEach((function(r){e=ke(e,t,Ve(a,o.concat(r),n[r],Object(I.getIn)(i,r)))}));return e}(e,t,r);var d=Object(I.getIn)(e,u);if(!Object(I.isObject)(d))return e;if("value"==f[0]&&!Object(I.hasIn)(d,J,"value"))return re.setCurrent(e,i,t,{value:c,replace:l,path:u.concat(f.slice(1))});if(c===Ne([t.update,e],u,J,f))return e;if(Ie(t,c,l,u,J,f),"value"==f[0])e=ke(e,t,Ve([],Object(I.push2array)(["current"],u,f.slice(1)),c,l));else if("messages"==f[0]){var h=Oe(Ce(e,t)(u,J,"messages"));e=je(e,t,u,h)}else if("length"==f[0]){e=ke(e,t,Ve([],Object(I.push2array)(["current"],u,f),c,l));var v=d[J].length;v=Math.max(v,0);var b=Math.max(c||0),g=oe(e,u),m=[],y=[],O=o()(Ce(e,t)(u,J,"keys"));O.length=b;for(var j,_=v;_<b;_++){j=u.concat(_),Object(I.isUndefined)(r.setOneOf)||g(j,{oneOf:r.setOneOf});var $=de(i,g,j),w=$.state,x=$.dataMap,S=void 0===x?[]:x,A=$.defaultValues,k=Ne([e,t.update],u,J,"status","untouched"),P=E()({},J,{params:{uniqKey:pe()}});O[_]=P[J].params.uniqKey,k||Object(I.setIn)(P[J],{untouched:0,touched:!0},"status"),w=Object(I.merge)(w,P),e=ke(e=Object(I.merge)(e,Object(I.setIn)({},w,j),{replace:Object(I.setIn)({},!0,j)}),t,Ve([],Object(I.push2array)(["current"],j),A,!0)),Object(I.push2array)(m,S),k&&(e=re.setStatus(e,i,t,Ve(u,["status","untouched"],1)))}for(var F=function(r){var n=u.concat(r);Object(I.push2array)(y,Object(I.getIn)(e,n,Q,J)||[]),["invalid","dirty","untouched","pending"].forEach((function(r){Ne([a,e],n,J,"status",r)&&(e=re.setStatus(e,i,t,Ve(u,["status",r],-1)))})),Ie(t,ee,!0,n)},D=b;D<v;D++)F(D);var M=ce(i,u,ie(e));Object(I.setIn)(a,he(M,b),u,J,"fData","canAdd");for(var C=Math.max(Math.min(v,b)-1,0);C<b;C++)Ie(t,ve(M,C,b),!0,u,C,J,"arrayItem");e=Pe(e=Ae(e,t),t,y,!0),e=ke(e=Pe(e,t,m),t,Ve(u,["keys"],O))}else if("status"==f[0]){var N,U,V=f[1];"invalid"==V||"pending"==V?(U=Ne([a,e],u,J,"status","pending")?null:!Ne([a,e],u,J,"status","invalid"),N="valid"):("untouched"==V||"dirty"==V)&&(U=!Ne([a,e],u,J,"status",V),N="untouched"==V?"touched":"pristine"),Object(I.isUndefined)(N)||(e=ke(e,t,Ve(u,["status",N],U)))}else if("oneOf"==f[0]){var R=Object(I.getIn)(e,u);if((Object(I.getIn)(R,J,"oneOf")||0)!=Object(I.getIn)(t.update,u,J,"oneOf")||r.type&&r.type!=Object(I.getIn)(R,J,"fData","type")){qe(t,Y,"forceCheck",r.path),e=Pe(e=Ae(e,t),t,Object(I.getIn)(e,u,Q,J)||[],!0);var K=de(i,oe(e,u),u,r.setValue),T=K.state,B=K.dataMap,L=void 0===B?[]:B,q=(A=K.defaultValues,R[J]),W=(q.value,q.length,q.oneOf,q.fData,p()(q,["value","length","oneOf","fData"]));if(be(R)&&be(T)||delete W.status,T=Object(I.merge)(T,E()({},J,W),{arrays:"replace"}),u.length){var z=u.slice(),G=z.pop();["invalid","dirty","pending"].forEach((function(r){var n=Object(I.getIn)(R,J,"status",r),a=Object(I.getIn)(T,J,"status",r);!n!=!a&&(e=re.setStatus(e,i,t,Ve(z,["status",r],a?1:-1)))}));var H=Object(I.getIn)(e,z,J,"fData","required");(H=Object(I.isArray)(H)&&H.length&&H)&&~H.indexOf(G)&&(T=Object(I.merge)(T,E()({},J,{fData:{required:!0}})))}0==Object(I.getIn)(R,J,"status","untouched")&&(T=Object(I.merge)(T,E()({},J,{status:{untouched:0,touched:!0}}))),e=Pe(e=ke(e=Object(I.merge)(e,Object(I.setIn)({},T,u),{replace:Object(I.setIn)({},!0,u)}),t,Ve([],Object(I.push2array)(["current"],u),A,!0)),t,L),0==Object(I.getIn)(T,J,"status","untouched")&&(e=re.switch(e,i,t,Ve(u,["status","untouched"],0)),e=re.switch(e,i,t,Ve(u,["status","touched"],!0)))}}}else e=Object(I.merge)(e,it(J,f,c),{replace:it(J,f,l)});for(var Z=Object(I.getIn)(e,u,Q),te=0;te<f.length&&Z;te++)e=Fe(e,t,Z[X],Ve(u,f.slice(0,te),Object(I.setIn)({},c,f.slice(te)),Object(I.setIn)({},l,f.slice(te)))),Z=Z[f[te]];return Z&&(e=function r(n,a,i){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:[];return e=Fe(e,t,n[X],Ve(u,o,a,i)),Object(I.isMergeable)(a)&&Object(I.objKeys)(n).forEach((function(t){return a.hasOwnProperty(t)&&(e=r(n[t],a[t],Object(I.getIn)(i,t),o.concat(t)))})),e}(Z,c,l,f)),e}function Pe(e,t,r){var n=!!(3<arguments.length&&void 0!==arguments[3])&&arguments[3],a=[];return r.forEach((function(r){var i=r.emitter,s=!1;if(Re({path:("/"==r.from[0]?"":i.join("/"))+"/"+r.from,value:null},e).forEach((function(c){var u=c[J][0];("current"==u||"inital"==u||"default"==u&&c.path.length)&&(c=G({},c,E()({path:[]},J,[u].concat(o()(c.path),o()(c[J].slice(1)))))),Re({path:i.join("/")+"/"+r.to,value:null},e).forEach((function(u){var l,f=He(Le(c.path,(l=u.path).concat.apply(l,[J].concat(o()(u[J])))));Object(I.getIn)(e,c.path)&&Object(I.setIn)(t.update,n?void 0:r.action,c.path,Q,c[J],X,f),n||(a.push({map:it(f,r.action),fromPath:c.path,keyPath:c[J]}),!s&&"."!=Le(i,c.path)[0]&&(s=!0))}))})),s){var c=Object(I.getIn)(e,i);if(c){var u,l=Object(I.getIn)(c,Q,J)||[];for(u=0;u<l.length&&(r.from!==l[u].from||r.to!==l[u].to);u++);(l=l.slice())[u]=r,Ie(t,l,!0,i,Q,J)}}e=Ae(e,t)})),null!==n&&a.forEach((function(r){e=Ae(e=Fe(e,t,r.map,Ve(r.fromPath,r.keyPath,Object(I.getIn)(e,r.fromPath,J,r.keyPath))),t)})),e}function Fe(e,t,r,n){var a=n.value,i=n.path,o=n.replace,s=function(e){var t=He(e.path);return t+(e[J]&&!~t.indexOf("@")?"/@/"+He(e[J]):"")}(n);return Object(I.objKeys)(r||{}).forEach((function(n){if(r[n]){var c=r[n],u=He(Ge(n,i)),l=a,f=[];if(Object(I.isObject)(c)){var p=Me(t.api,u,s);p.get=Ce(e,t),p.updates=f,l=at.call(p,c,a),p.updates=null,p.get=null}f.length||Object(I.isUndefined)(l)&&Object(I.isObject)(c)||f.push({path:u,value:l,replace:Object(I.isUndefined)(c.replace)?o:c.replace}),f.forEach((function(r){return e=ke(e,t,r)}))}})),e}var De=function(e){return function(t){return Object(I.getIn)(t,"length")===e}};var Me=Object(I.memoize)((function(e,t,r){var n=t.split("@")[0],a=r?r.split("@")[0]:n,i={from:r,to:t,path:n,stateApi:e,updates:[]};return i.api=e.wrapper(i),i.wrapOpts=function(e){return i.updates&&Object(I.isUndefined)(e.setExecution)&&(e.setExecution=function(e){return e&&Object(I.push2array)(i.updates,e)}),e},i.getData=function(){return i.api.get(a,J)},i}));function Ce(e,t){return function(){for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];return I.hasIn.apply(void 0,[t.update].concat(o()(n.map((function(e){return Ge(e)})))))?Object(I.merge)(Ue.apply(void 0,[e].concat(n)),Ue.apply(void 0,[t.update].concat(n)),{replace:Ue.apply(void 0,[t.replace].concat(n))}):Ue.apply(void 0,[e].concat(n))}}function Ne(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];for(var a=0;a<e.length;a++)if(I.hasIn.apply(void 0,[e[a]].concat(r)))return I.getIn.apply(void 0,[e[a]].concat(r))}function Ue(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return I.getIn.apply(void 0,[e].concat(o()(r.map((function(e){return Ge(e)})))))}var Ve=function(e,t,r,n){var a,i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:{};return G((a={path:e},E()(a,J,t),E()(a,"value",r),E()(a,"replace",n),a),i)};function Re(e,t){var r=e.path,n=e.value,a=e.replace,i=e.base,o=p()(e,["path","value","replace","base"]),s=[];return He(r).split(";").forEach((function(e){var r=Ge(e,i),c=[],u=r.indexOf(J);~u&&(c=r.slice(u+1),r=r.slice(0,u)),r=Te(r,{"*":function(e){return ne(Object(I.getIn)(t,e)).join(",")}}),c=Te(c),Object(I.objKeys)(r).forEach((function(e){return Object(I.objKeys)(c).forEach((function(t){return s.push(Ve(r[e],c[t],n,a,o))}))}))})),s}var Ke=function(e,t){return Object(I.isUndefined)(t)?Ke._data[e]:(Ke._data[e]=t,void(Ke._data[t]=e))};function Te(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r={"":[]};return e.forEach((function(e){var n={};"string"==typeof(e=t[e]||e)&&~e.indexOf(",")?Object(I.objKeys)(r).forEach((function(t){return e.split(",").forEach((function(e){return n[t&&t+","+e||e]=r[t].concat(e.trim())}))})):"function"==typeof e?Object(I.objKeys)(r).forEach((function(a){var i=e(r[a]);"string"==typeof i&&(i=Je(i)),i=Te(i,t),Object(I.objKeys)(i).forEach((function(e){return n[a&&a+(e?","+e:"")||e]=r[a].concat(i[e])}))})):Object(I.objKeys)(r).forEach((function(t){return Object(I.push2array)(r[t],e)})),Object(I.objKeys)(n).length&&(r=n)})),r}Ke._data={"#":""},Ke.sym2str=function(e){return"symbol"!=a()(e)||Object(I.isUndefined)(Ke(e))?e:Ke(e)},Ke.str2sym=function(e){return"string"!=typeof e||Object(I.isUndefined)(Ke(e))?e:Ke(e)},Ke("@",J);var Be=function(e){return"number"==typeof e?e.toString():e};function Le(e,t){"#"===e[0]&&(e=e.slice(1)),"#"===t[0]&&(t=t.slice(1));var r,n=[];for(r=0;r<e.length&&Be(e[r])===Be(t[r]);r++);for(var a=r;a<e.length;a++)n.push("..");return n.length||n.push("."),Object(I.push2array)(n,t.slice(r))}function qe(e,t){if(e===t)return e;for(var r=arguments.length,n=Array(2<r?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];for(var i=We(n),o=e,s=0;s<i.length-1;s++){if(o[i[s]]===t)return e;Object(I.isObject)(o[i[s]])||(o[i[s]]={}),o=o[i[s]]}return i.length?(o[i[i.length-1]]=t,e):t}function We(e){if(Object(I.isArray)(e)){var t=[];return I.push2array.apply(void 0,[t].concat(o()(e.map(We)))),t}return"string"==typeof e?Je(e):[e]}function ze(e){return Object(I.isMergeable)(e)&&"nPath"===Object(I.getIn)(e,J)}function Ge(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],r=function(e,t){for(var r,n=!t||"."!==e[0]&&".."!=e[0]?[]:t.slice(),a=0;a<e.length;a++)".."===(r=e[a])?n.pop():""!==r&&"."!==r&&n.push(r);return n}(We(e),t.length?We(t):[]);return r[J]="nPath",r}function He(e){return Object(I.isArray)(e)?e.map(He).join("/"):Ke.sym2str(e)}function Je(e){e=(e=e.replace(Ke(J),"/"+Ke(J)+"/")).replace(/\/+/g,"/");var t=[];return e.split("/").forEach((function(e){return e&&(e=Ke.str2sym(e.trim()))&&t.push(e)})),t}var Qe=function(e){return Object(I.isString)(e)&&"^/"==e.trim().substr(0,2)};function Xe(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],n=t.symbol?I.objKeysNSymb:I.objKeys,a=t.arrayAsValue?I.isObject:I.isMergeable;if(!a(e))return[[e]];var i=[];return n(e).forEach((function(n){var o=r.concat(n);a(e[n])?Xe(e[n],t,o).forEach((function(e){return i.push(e)})):(o.push(e[n]),i.push(o))})),i.length?i:[Object(I.push2array)(r.slice(),{})]}var Ye=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];return Object(I.objKeys)(e).reduce((function(n,a){return n[a]=t(e[a],r.concat(a)),n}),Object(I.isArray)(e)?[]:{})},Ze=function(e){return Object(I.isObject)(e)&&e.$||Object(I.isFunction)(e)&&e._map};function et(e,t){var r=!1;return e=Object(I.toArray)(Object(I.isUndefined)(e)?[]:e).map((function(e){if(Object(I.isString)(e)){var n=0;if("@"==e[0]&&(n=1),"!@"==e.substr(0,2)&&(n=2),"!!@"==e.substr(0,3)&&(n=3),n){r=!0;var a=Ge(e.substr(n));return 2==n&&(a[X]="not"),3==n&&(a[X]="doubleNot"),a}}if(Ze(e)){var i=et(e.args,t);return i.dataRequest&&(r=!0),i=G({},e,{},i),t?t(i):i}return t&&Object(I.isMergeable)(e)?t(e):e})),{dataRequest:r,args:e,norm:!0}}function tt(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=(t.wrapFn,p()(t,["wrapFn"])),n=Object(I.isObject)(e)?G({},e,{},r):G({$:e},r);return n.args?Object.assign(n,et(n.args,t.wrapFn)):n.args=["${...}"],n}function rt(e){if(Object(I.isUndefined)(e))return[];if(!Object(I.isArray)(e))throw new Error("array expected");return e}function nt(e,t){var r=Object(I.getIn)(e,t);switch(t[X]){case"not":return!r;case"doubleNot":return!!r;default:return r}}function at(e){for(var t=this,r=arguments.length,n=Array(1<r?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];var i=e.dataRequest?this.getData():null,o=function(e){for(var r,a=[],o=0;o<e.length;o++)ze(r=e[o])?a.push(nt(i,r)):Ze(r)?a.push(r._map?r.apply(void 0,n):at.call.apply(at,[t,r].concat(n))):"${...}"==r?a.push.apply(a,n):Object(I.isString)(r)&&~r.search(/^\${\d+}$/)?a.push(n[r.substring(2,r.length-1)]):a.push(r);return a}(e.args),s=Object(I.toArray)(e.$).reduce((function(r,n){return Object(I.isFunction)(n)?(e.noStrictArrayResult?I.toArray:rt)(n.apply(t,r)):r}),o);return e.noStrictArrayResult?Object(I.deArray)(s):rt(s)[0]}function it(){for(var e,t=[],r=0;r<arguments.length-1;r++)Object(I.push2array)(t,0>r||arguments.length<=r?void 0:arguments[r]);var n=0>(e=arguments.length-1)||arguments.length<=e?void 0:arguments[e];return t.length?Object(I.setIn)({},n,t):n}r.d(t,"_CORES",(function(){return lt})),r.d(t,"elements",(function(){return Mt})),r.d(t,"FForm",(function(){return dt})),r.d(t,"FField",(function(){return vt})),r.d(t,"fformCores",(function(){return ft})),r.d(t,"extractMaps",(function(){return It})),r.d(t,"normalizeMaps",(function(){return At})),r.d(t,"updateProps",(function(){return kt})),r.d(t,"classNames",(function(){return Dt})),r.d(t,"comparePropsFn",(function(){return Ft})),r.d(t,"getExten",(function(){return Pt})),r.d(t,"formReducer",(function(){return N}));var ot;function st(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ct(e){for(var t,r=1;r<arguments.length;r++)t=null==arguments[r]?{}:arguments[r],r%2?st(t,!0).forEach((function(r){E()(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):st(t).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}));return e}var ut=Symbol("_$cx"),lt=new WeakMap;function ft(e){return Object(I.isString)(e)?lt[e]:new F(e)}var pt=function(){function e(t){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};_()(this,e),E()(this,"type",void 0),E()(this,"bubbles",void 0),E()(this,"cancelable",void 0),E()(this,"detail",void 0),E()(this,"defaultPrevented",void 0);this.type=t,this.bubbles=!!r.bubbles,this.cancelable=!!r.cancelable,this.detail=!!r.detail}return w()(e,[{key:"preventDefault",value:function(){this.defaultPrevented=!0}}]),e}(),dt=function(e){function t(e){var r,n;_()(this,t);for(var a=arguments.length,i=Array(1<a?a-1:0),o=1;o<a;o++)i[o-1]=arguments[o];n=h()(this,(r=b()(t)).call.apply(r,[this,e].concat(i))),E()(m()(n),"_unsubscribe",void 0),E()(m()(n),"_savedState",void 0),E()(m()(n),"_savedValue",void 0),E()(m()(n),"_root",void 0),E()(m()(n),"_form",void 0),E()(m()(n),"_methods",{onSubmit:null,onChange:null,onStateChange:null}),E()(m()(n),"api",void 0),E()(m()(n),"elements",void 0),E()(m()(n),"parent",void 0),E()(m()(n),"wrapFns",xt);var s=m()(n);return s.api=s._coreFromParams(e.core),Object.defineProperty(s,"elements",{get:function(){return s.api.props.elements}}),Object.defineProperty(s,"valid",{get:function(){return s.api.get("/@/status/valid")}}),s.parent=e.parent,s._updateMethods(e),s._initState(e),s._unsubscribe=s.api.addListener(s._handleStateUpdate.bind(s)),s._setRootRef=s._setRootRef.bind(s),s._setFormRef=s._setFormRef.bind(s),s._submit=s._submit.bind(s),s.reset=s.reset.bind(s),n}return O()(t,e),w()(t,[{key:"_coreFromParams",value:function(e){return e instanceof F?e:new F(e)}},{key:"_initState",value:function(e){var r=ct({},e);null!==e.touched&&(r.touched=!!r.touched),t.params.forEach((function(t){Object(I.isUndefined)(r[t])||(r[t]=function(r){return Object(I.isUndefined)(r)?e[t]:r})})),Object(I.isUndefined)(r.value)&&(r.value=r.inital),this._updateValues(r),e.noValidation||this.api.validate(!0)}},{key:"_updateMethods",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=this,n={};Object(I.objKeys)(r._methods).forEach((function(r){t[r]!==e[r]&&(n[r]=e[r])})),Object.assign(r._methods,r.wrapFns(W(r.elements,n),{noStrictArrayResult:!0}))}},{key:"_setRootRef",value:function(e){this._root=e}},{key:"_setFormRef",value:function(e){this._form=e}},{key:"_updateValues",value:function(e){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=e.state,a=e.value,i=e.inital,o=e.extData,s=e.noValidation,c=e.touched,u=this;n&&n!==r.state&&u.api.setState(n),i&&i!==r.inital&&u.api.setValue(i,{replace:!0,inital:!0,noValidation:s}),a&&a!==r.value&&u.api.setValue(a,{replace:!0,noValidation:s}),o&&o!==r.extData&&Object(I.objKeys)(o).forEach((function(e){return u.api.set(e,o[e],{replace:!0})})),Object(I.isUndefined)(c)||null===c||c===r.touched||u.api.reset({status:"untouched",value:c?0:void 0}),t.params.forEach((function(t){return!Object(I.isUndefined)(e[t])&&e[t]!==r[t]&&u.api.switch("/@/params/"+t,e[t])}))}},{key:"_handleStateUpdate",value:function(e){this._savedState==e||(this._savedState=e,this._methods.onStateChange&&this._methods.onStateChange(this._extendEvent(new pt("stateChanged"))),e[J].current!==this._savedValue&&(this._savedValue=e[J].current,this._methods.onChange&&this._methods.onChange(this._extendEvent(new pt("valueChanged")))),this._root&&this._root.setState({branch:e}))}},{key:"_extendEvent",value:function(e){return e.value=this.api.getValue(),e.state=this.api.getState(),e.fform=this,e}},{key:"_submit",value:function(e){var t,r=this,n=r.api.get("/@active");if(n){var a=r.getRef(n+"@");a&&(a._updateCachedValue(!0),r.api.execute())}var i=function(e){return r.api.set([],e,E()({},J,["status","pending"]))},o=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];Object(I.isUndefined)(e)||Object(I.toArray)(e).forEach((function(e){if(e){var t=e[J];r.api.setMessages(Object(I.objKeys)(e).length?e:null,t)}}))};if(r.api.set([],0,(t={},E()(t,J,["status","untouched"]),E()(t,"execute",!0),E()(t,"macros","switch"),t)),r._methods.onSubmit){r.api.setMessages(null,{execute:!0});var s=r._methods.onSubmit(r._extendEvent(e));s&&s.then&&"function"==typeof s.then?(i(1),s.then((function(e){i(0),o(e)}),(function(e){i(0),o(e)}))):o(s)}}},{key:"shouldComponentUpdate",value:function(e){this.parent=e.parent;var t=!1,r=this._coreFromParams(e.core);return this.api===r?this._updateValues(e,this.props):(this._unsubscribe(),this.api=r,this._unsubscribe=this.api.addListener(this._handleStateUpdate.bind(this)),t=!0,this._initState(e)),this._updateMethods(e,this.props),t||!Object(I.isEqual)(this.props,e,{skipKeys:["core","state","value","inital","extData","fieldCache","flatten","noValidate","parent","onSubmit","onChange","onStateChange"]})}},{key:"componentWillUnmount",value:function(){this._unsubscribe&&this._unsubscribe()}},{key:"getRef",value:function(e){return this._root&&this._root.getRef(e)}},{key:"getDataObject",value:function(e){return Object(I.getIn)(e,J)}},{key:"getValue",value:function(e,t){return be(e)?Object(I.getIn)(e,J,"value"):this.api.getValue({path:t.path})}},{key:"getBranch",value:function(e){return this.api.get(e)}},{key:"reset",value:function(e){e&&e.preventDefault(),this.api.reset()}},{key:"submit",value:function(){var e=new pt("submit",{cancelable:!0});this._submit(e),e.defaultPrevented||this._form.submit()}},{key:"render",value:function(){var e=this.props,r=(e.core,e.state,e.value,e.inital,e.extData,e.fieldCache,e.touched,e.parent,e.onSubmit,e.onChange,e.onStateChange,e._$useTag),n=void 0===r?this.elements.widgets.Form||"form":r,a=p()(e,["core","state","value","inital","extData","fieldCache","touched","parent","onSubmit","onChange","onStateChange","_$useTag"]);return t.params.forEach((function(e){return delete a[e]})),Object(I.objKeys)(a).forEach((function(e){return("_"===e[0]||"$"===e[0])&&delete a[e]})),Object(S.createElement)(n,l()({ref:this._setFormRef},a,{onSubmit:this._submit,onReset:this.reset}),Object(S.createElement)(vt,{ref:this._setRootRef,id:(a.id||this.api.name)+"/#",name:this.api.name,pFForm:this,getPath:t._getPath,FFormApi:this.api}))}}],[{key:"_getPath",value:function(){return"#"}}]),t}(S.Component);E()(dt,"params",["readonly","disabled","viewer","liveValidate","liveUpdate"]);var ht=function(e){function t(e,r){var n;_()(this,t),n=h()(this,b()(t).call(this,e,r)),E()(m()(n),"$refs",{});var a=m()(n);return a._setRef=a._setRef.bind(a),n}return O()(t,e),w()(t,[{key:"getRef",value:function(e){return e.length?1!=e.length||this.$refs[e[0]].getRef?this.$refs[e[0]]&&this.$refs[e[0]].getRef&&this.$refs[e[0]].getRef(e.slice(1)):this.$refs[e[0]]:this}},{key:"_setRef",value:function(e){var t=this;return function(r){return t.$refs[e]=r}}},{key:"_refProcess",value:function(e,t){return!0===t?this._setRef(e):Object(I.isString)(t)?this._setRef(t):Object(I.isMergeable)(t)?Ye(t,this._refProcess.bind(this,e)):t}}]),t}(S.Component),vt=function(e){function t(e,r){var n;_()(this,t),n=h()(this,b()(t).call(this,e,r)),E()(m()(n),"_mappedData",{}),E()(m()(n),"_builderData",{}),E()(m()(n),"_rebuild",!0),E()(m()(n),"_cached",void 0),E()(m()(n),"_cachedTimeout",void 0),E()(m()(n),"_blocks",[]),E()(m()(n),"_widgets",void 0),E()(m()(n),"_components",void 0),E()(m()(n),"_maps",{}),E()(m()(n),"_$_parse",void 0),E()(m()(n),"_forceLiveUpd",!1),E()(m()(n),"_forceUpd",!1),E()(m()(n),"get",null),E()(m()(n),"_layout",void 0),E()(m()(n),"$branch",void 0),E()(m()(n),"schemaPart",void 0),E()(m()(n),"liveValidate",void 0),E()(m()(n),"liveUpdate",void 0),E()(m()(n),"path",void 0),E()(m()(n),"api",void 0),E()(m()(n),"pFForm",void 0),E()(m()(n),"stateApi",void 0),E()(m()(n),"wrapFns",xt);var a=m()(n);return Object.defineProperty(a,"path",{get:function(){return a.props.getPath()}}),Object.defineProperty(a,"pFForm",{get:function(){return a.props.pFForm}}),Object.defineProperty(a,"liveValidate",{get:function(){return Object(I.getIn)(a.getData(),"params","liveValidate")}}),Object.defineProperty(a,"liveUpdate",{get:function(){return Object(I.getIn)(a.getData(),"params","liveUpdate")}}),Object.defineProperty(a,"value",{get:function(){return a.props.pFForm.getValue(a.state.branch,a)}}),Object.defineProperty(a,"stateApi",{get:function(){return a.props.pFForm.api}}),a.state={branch:a.pFForm.getBranch(a.path)},a.$branch=a.state.branch,a._updateStateApi(e.pFForm.api),n}return O()(t,e),w()(t,[{key:"getRef",value:function(e){return(e=Ge(e)).length?1==e.length&&e[0]==J?this:"@"==e[0][0]?1==e.length?this.$refs[e[0]]:this.$refs[e[0]].getRef(e.slice(1)):this.$refs["@Main"]&&this.$refs["@Main"].getRef&&this.$refs["@Main"].getRef(e):this.$refs["@Main"]}},{key:"_resolver",value:function(e){try{return W(this.pFForm.elements,e)}catch(e){throw this._addErrPath(e)}}},{key:"_addErrPath",value:function(e){return e.message=e.message+", in form '"+(this.pFForm.props.name||"")+"', path: '"+this.path+"'",e}},{key:"_updateStateApi",value:function(e){var t=this;if(e){if(!e.wrapper)return void(t.api=e);var r=e.wrapper({get path(){return t.path}});r._set=r.set,r._setValue=r.setValue,r.set=function(){return t._cacheValue(0>=arguments.length?void 0:arguments[0],1>=arguments.length?void 0:arguments[1],"set",2>=arguments.length?void 0:arguments[2])||r._set.apply(r,arguments)},r.setValue=function(){return t._cacheValue(((1>=arguments.length?void 0:arguments[1])||{}).path,0>=arguments.length?void 0:arguments[0],"setValue",1>=arguments.length?void 0:arguments[1])||r._setValue.apply(r,arguments)},t.api=r}}},{key:"_updateCachedValue",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.liveUpdate||this._forceLiveUpd,t=this;t._cachedTimeout=void 0,e&&t._cached&&(t.stateApi.setValue(t._cached.value,ct({noValidation:!t.liveValidate&&!t._forceLiveUpd,path:t.path},t._cached.opts)),t._forceLiveUpd=!1,t._cached=void 0)}},{key:"_cacheValue",value:function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"set",n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{},a=this,i=a.pFForm.props.fieldCache;(Object(I.isUndefined)(i)||!0===i)&&(i=Object(I.isNumber)(this.liveUpdate)?this.liveUpdate:40);var o="setValue"===r&&(!e||"./"==e||"."==e);if(!o){var s=a.path;o=(e="#/"+He(Ge(e,a.path))+("setValue"===r?"/@/value":""))==s+"/@/value"||e=="#/@/current/"+s.slice(2)}if(o){var c=a.getData();if(a._cached={value:t,opts:n},i&&!a._forceUpd){a._cachedTimeout&&clearTimeout(a._cachedTimeout),a._cachedTimeout=setTimeout(a._updateCachedValue.bind(a),i);var u=a.getData(),l=a._mappedData;a.get=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=Ge(t,a.path);return Object(I.isEqual)(n,Ge("./@value",a.path))?u.value:a.stateApi.get(n)},a._setMappedData(c,u,!0),a.get=null,l!=a._mappedData&&a.forceUpdate()}else a._forceUpd=!1,a._updateCachedValue();return!0}}},{key:"_build",value:function(){var e=this;e.state={branch:e.pFForm.getBranch(e.path)},e.$branch=e.state.branch;var t=e.api.getSchemaPart(e.path);if(e.schemaPart=t,(Object(I.isArray)(t.type)||Object(I.isUndefined)(t.type))&&!t._presets)throw new Error("schema._presets should be defined explicitly for multi type");e._layout=e.wrapFns(St(e.pFForm.elements,t._layout));var r=St(e.pFForm.elements,t._custom,t._presets||t.type),n=It(r=e.wrapFns(r)),a=n.$_maps,i=n.rest;e._maps=At(a),e._widgets={},e._components=i,e._blocks=Object(I.objKeys)(i).filter((function(e){return i[e]})),e._blocks.forEach((function(t){var r=i[t],n=r._$widget,a=r.$_reactRef,o=(r._$skipKeys,p()(r,["_$widget","$_reactRef","_$skipKeys"]));if(!n)throw new Error('_$widget for "'+t+'" is empty');if(e._widgets[t]=n,a){var s=e._refProcess("@"+t,a);o[Object(I.isFunction)(s)?"ref":"$_reactRef"]=s}e._mappedData[t]=o})),e._setMappedData(void 0,e.getData(),"build"),e._rebuild=!1}},{key:"_setMappedData",value:function(e,t,r){var n=this.getData;this.getData=function(){return t};var a=kt(this._mappedData,e,t,"build"==r&&this._maps.build,r&&this._maps.data,this._maps.every);return this.getData=n,this._mappedData!=a&&(this._mappedData=a,!0)}},{key:"getData",value:function(e){var t=this.pFForm.getDataObject(e||Object(I.getIn)(this,"state","branch"),this);return this._cached?Object(I.merge)(t,{value:this._cached.value},{replace:{value:this._cached.opts.replace}}):t}},{key:"shouldComponentUpdate",value:function(e,t){if(e.FFormApi!==this.props.FFormApi)return this._updateStateApi(e.FFormApi),this._rebuild=!0;if(!Object(I.isEqual)(e,this.props))return this._rebuild=!0;if(Object(I.isUndefined)(t.branch))return!0;this.$branch=t.branch;var r=!1,n=this.getData(),a=this.getData(Object(I.getIn)(t,"branch"));if(Object(I.getIn)(a,"oneOf")!==Object(I.getIn)(n,"oneOf"))return this._rebuild=!0;try{r=(r=this._setMappedData(n,a,a!==n)||r)||Object(I.getIn)(a,"params","norender")!==Object(I.getIn)(n,"params","norender")}catch(e){throw this._addErrPath(e)}return r}},{key:"render",value:function(){return Object(I.isUndefined)(this.state.branch)?null:!Object(I.getIn)(this.getData(),"params","norender")&&(this._rebuild&&this._build(),this._widgets.Builder?Object(S.createElement)(this._widgets.Builder,this._mappedData.Builder,this._mappedData):null)}}]),t}(ht),bt=function(e){function t(){var e,r;_()(this,t);for(var n=arguments.length,a=Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=h()(this,(e=b()(t)).call.apply(e,[this].concat(a))),E()(m()(r),"refs",void 0),r}return O()(t,e),w()(t,[{key:"_cn",value:function(e){return e&&this.props._$cx&&e.className&&!Object(I.isString)(e.className)?Et(this.props._$widget)?ct({_$cx:this.props._$cx},e):ct({},e,{className:this.props._$cx(e.className)}):e}},{key:"render",value:function(){var e=this._cn(this.props.getMappedData());return Object(S.createElement)(this.props._$widget,e,this.props.children||e.children)}}]),t}(S.Component),gt=function(e){function t(e,r){var n;_()(this,t),n=h()(this,b()(t).call(this,e,r)),E()(m()(n),"_arrayStart",0),E()(m()(n),"_rebuild",!0),E()(m()(n),"_focusField",""),E()(m()(n),"_arrayKey2field",{}),E()(m()(n),"_widgets",{}),E()(m()(n),"_objectLayouts",[]),E()(m()(n),"_arrayLayouts",[]),E()(m()(n),"_setWidRef",void 0),E()(m()(n),"_maps",{}),E()(m()(n),"_mappedData",{}),E()(m()(n),"_$widget",void 0),E()(m()(n),"_isArray",!1);var a=m()(n);return a._setWidRef=function(e){return function(t){return a._widgets[e]=t}},n}return O()(t,e),w()(t,[{key:"_getMappedData",value:function(e){var t=this;return function(){return t._mappedData[e]}}},{key:"_build",value:function(e){function t(e,t){var n=It(t,["$_fields"]),a=n.$_maps,i=n.rest,s=i.$_fields,c=i.$_reactRef,u=(i._$skipKeys,i._$widget),f=void 0===u?l:u,h=i.className,b=p()(i,["$_fields","$_reactRef","_$skipKeys","_$widget","className"]);(s||!e)&&(h=Object(I.merge)(d,h)),b.className=h;var g=r._refProcess("@widget_"+e,c)||{};Object(I.isFunction)(g)&&(g={ref:g}),Object.assign(b,g);var m=At(a,e.toString());return v.forEach((function(e){var t;return(t=r._maps[e]).push.apply(t,o()(m[e]))})),r._mappedData[e]=b,{_$widget:f,$_fields:s}}var r=this,n=e.$branch,a=e.$layout,i=e._$cx,s=e.arrayStart,c=e.strictLayout,u=e.LayoutDefaultWidget,l=void 0===u?"div":u,f=e.LayoutDefaultClass,d=void 0===f?{}:f,h=(e.uniqKey,e.focusField),v=["build","data","every"];v.forEach((function(e){return r._maps[e]=[]})),r.$refs={},r._widgets={},r._mappedData={},r._objectLayouts=[];var b={keys:r._getObjectKeys(n),counter:1};r._focusField=h||b.keys[0]||"";var g=t(0,Object(I.isArray)(a)?{$_fields:a}:a),m=g._$widget,y=g.$_fields;if(r._$widget=m,y&&(r._objectLayouts=function e(n,a){var o=[];return Object(I.objKeys)(a).forEach((function(s){var c=a[s];n.keys,n.counter;if(Object(I.isString)(c)){var u=n.keys.indexOf(c);~u&&(o.push(r._makeFField(c)),n.keys.splice(u,1))}else if(Object(I.isObject)(c)){var l=n.counter++,f=t(l,c),p=f._$widget,d=f.$_fields;o.push(Object(S.createElement)(bt,{_$widget:p,_$cx:i,key:"widget_"+l,ref:r._setWidRef(l),getMappedData:r._getMappedData(l)},d&&e(n,d)))}})),o}(b,y)),!0!==c&&b.keys.forEach((function(e){return r._objectLayouts.push(r._makeFField(e))})),r._arrayLayouts=[],r._arrayKey2field={},r.props.isArray)for(var O,j=s;j<r.props.length;j++)O=r._arrayIndex2key(n[j]),r._arrayLayouts.push(r._makeFField(j.toString(),O)),O&&(r._arrayKey2field[O]=j);r._mappedData=r._updateMappedData(void 0,r._getData(n),"build"),r._rebuild=!1}},{key:"_makeFField",value:function(e,t){return Object(S.createElement)(vt,{ref:this._setRef(t||e),key:t||e,pFForm:this.props.$FField.pFForm,FFormApi:this.props.FFormApi,id:this.props.id?this.props.id+"/"+(t||e):void 0,name:this.props.name?this.props.name+"["+(this.props.isArray?"${idx}_"+(t||e):e)+"]":void 0,getPath:t?this._getArrayPath.bind(this,t):this._getObjectPath.bind(this,e)})}},{key:"_arrayIndex2key",value:function(e){return this.props.uniqKey?Object(I.getIn)(this._getData(e),Je(this.props.uniqKey)):void 0}},{key:"_getObjectKeys",value:function(e){var t=[];if(this.props.isArray)for(var r=0;r<this.props.arrayStart;r++)t.push(r.toString());else t=ne(e);return t}},{key:"_getObjectPath",value:function(e){return this.props.$FField.path+"/"+e}},{key:"_getArrayPath",value:function(e){return this.props.$FField.path+"/"+this._arrayKey2field[e]}},{key:"_getArrayField",value:function(e){return this._arrayLayouts[e-this.props.arrayStart]}},{key:"_reorderArrayLayout",value:function(e,t,r){for(var n,a=[],i=!1,o=r.arrayStart;o<r.length;o++){if(n=this._arrayIndex2key(t[o]),Object(I.isUndefined)(n))throw new Error("no unique key provided for array item");this.$refs[n]&&this.$refs[n].setState({branch:t[o]});var s=this._arrayKey2field[n];this._arrayKey2field[n]!==o&&(this._arrayKey2field[n]=o,i=!0),a.push(Object(I.isUndefined)(s)?this._makeFField(o.toString(),n):this._getArrayField(s))}return this._arrayLayouts.length!==a.length&&(i=!0),i&&(this._arrayLayouts=a),i}},{key:"_updateMappedData",value:function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:e!==t,n=this;return kt(n._mappedData,e,t,"build"==r&&n._maps.build,r&&n._maps.data,n._maps.every)}},{key:"_getData",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.props.$branch;return this.props.$FField.getData(e)}},{key:"shouldComponentUpdate",value:function(e){var t=this;if(["FFormApi","oneOf","branchKeys"].some(Ft(t.props,e)))return t._rebuild=!0;var r=!Object(I.isEqual)(e,t.props,{skipKeys:["$branch"]}),n=t.props.$branch,a=e.$branch;if(n!=a){var i;try{i=t._updateMappedData(t._getData(n),t._getData(a))}catch(e){throw t.props.$FField._addErrPath(e)}if(i!=t._mappedData){var o=t._mappedData;t._mappedData=i,Object(I.objKeys)(i).forEach((function(e){return t._widgets[e]&&i[e]!=o[e]&&t._widgets[e].forceUpdate()}))}t._getObjectKeys(a).forEach((function(e){return a[e]!==n[e]&&t.$refs[e]&&t.$refs[e].setState({branch:a[e]})})),t.props.isArray&&(r=t._reorderArrayLayout(n,a,e)||r)}return r}},{key:"getRef",value:function(e){if(!this.props.isArray||isNaN(parseInt(e[0]))||e[0]<this.props.arrayStart)return c()(b()(t.prototype),"getRef",this).call(this,e);var r=this._getArrayField(e[0]);return r&&this.$refs[r.key].getRef(e.slice(1))}},{key:"render",value:function(){var e=this.props;if(e.viewer){var t=e.$_viewerProps||{},r=t._$widget,n=void 0===r?Ot:r,a=p()(t,["_$widget"]);return a.inputProps=e,a.value=e.$FField.value,Object(S.createElement)(n,a)}return this._rebuild&&this._build(e),Object(S.createElement)(bt,{_$widget:this._$widget,_$cx:e._$cx,key:"widget_0",ref:this._setWidRef(0),getMappedData:this._getMappedData(0)},this._objectLayouts,this._arrayLayouts)}}]),t}(ht),mt=function(e){function t(e,r){var n;return _()(this,t),n=h()(this,b()(t).call(this,e,r)),E()(m()(n),"_children",void 0),E()(m()(n),"_reactRef",void 0),E()(m()(n),"_mapped",void 0),n}return O()(t,e),w()(t,[{key:"_newWidget",value:function(e,r){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},a=r._$widget,i=void 0===a?t:a,o=r.className,s=r.$_reactRef,c=p()(r,["_$widget","className","$_reactRef"]),u=this,f=u._refProcess(e,s)||{};return Object(I.isFunction)(f)&&(f={ref:f}),Object(I.isFunction)(n)?f.ref=n:Object.assign(f,n),Object(S.createElement)(i,l()({key:e,className:!Et(i)&&this.props._$cx?this.props._$cx(o):o,_$cx:Et(i)?this.props._$cx:void 0},c,f))}},{key:"_mapChildren",value:function(e,t){var r=this;if(e!==r._children||r._reactRef!==t){var n=r._children&&Object(I.toArray)(r._children),a=e&&Object(I.toArray)(e);r._mapped=a&&a.map((function(e,i){return!Object(I.isObject)(e)||e.$$typeof?e:r._mapped&&Object(I.getIn)(r._mapped,i)&&n[i]===a[i]&&Object(I.getIn)(r._reactRef,i)===Object(I.getIn)(t,i)?r._mapped[i]:r._newWidget(i,e,Object(I.getIn)(t,i))})),r._children=e,r._reactRef=t}}},{key:"setRef2rest",value:function(e,t){return t?(Object(I.objKeys)(t).filter((function(e){return isNaN(+e)})).forEach((function(r){return e[r]=t[r]})),e):e}},{key:"setElements2rest",value:function(e,t){if(!t)return e;var r={"^":t};return Object(I.objKeys)(e).forEach((function(t){return Qe(e[t])&&(e[t]=Object(I.getIn)(r,Je(e[t])))})),e}},{key:"render",value:function(){if(this.props.norender)return null;var e=this.props,t=e._$useTag,r=void 0===t?"div":t,n=e._$cx,a=e._$elements,i=e.className,o=e.$_reactRef,s=e.children,c=p()(e,["_$useTag","_$cx","_$elements","className","$_reactRef","children"]);return this._mapChildren(s,o),this.setRef2rest(c,o),this.setElements2rest(c,a),!n&&a&&(n=a._$cx),Object(S.createElement)(r,l()({children:this._mapped,className:n?n(i):i},c))}}]),t}(ht);function yt(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length?arguments[2]:void 0;return function(e){return Object(I.isMergeable)(e)?0===Object(I.objKeys)(e).length:null==e||""===e}(r)?e:Object(I.isArray)(r)?r.map(yt.bind(null,e,t)).join(", "):(r=Pt(t,r).label||r,Object(I.isString)(r)?r:JSON.stringify(r))}function Ot(e){var t=e._$useTag,r=void 0===t?"div":t,n=e.value,a=(e.inputProps,e._$cx),i=e.enumExten,o=void 0===i?{}:i,s=e.emptyMock,c=void 0===s?"(none)":s,u=p()(e,["_$useTag","value","inputProps","_$cx","enumExten","emptyMock"]);return u.className&&a&&(u.className=a(u.className)),Object(S.createElement)(r,u,yt(c,o,n))}var jt=function(e){function t(){return _()(this,t),h()(this,b()(t).apply(this,arguments))}return O()(t,e),w()(t,[{key:"render",value:function(){var e=this.props;if(e.viewer){var t=e.$_viewerProps||{},r=t._$widget,n=void 0===r?Ot:r,a=p()(t,["_$widget"]);return a.inputProps=e,a.value=e.value,Object(S.createElement)(n,a)}var i=e.value,o=e._$useTag,s=e.type,c=e.$_reactRef,u=e._$cx,l=e._$elements,f=(e.viewer,e.$_viewerProps,e.children),d=p()(e,["value","_$useTag","type","$_reactRef","_$cx","_$elements","viewer","$_viewerProps","children"]);return this._mapChildren(f,c),this.setRef2rest(d,c),this.setElements2rest(d,l),!u&&l&&(u=l._$cx),o?d.type=s:"textarea"==s||"select"==s?o=s:(o="input",d.type=s),d["checkbox"===s?"checked":"value"]=i,d.className&&u&&(d.className=u(d.className)),Object(S.createElement)(o,d,this._mapped)}}]),t}(mt),_t=function(e){function t(){var e,r;_()(this,t);for(var n=arguments.length,a=Array(n),i=0;i<n;i++)a[i]=arguments[i];return r=h()(this,(e=b()(t)).call.apply(e,[this].concat(a))),E()(m()(r),"_elem",void 0),r}return O()(t,e),w()(t,[{key:"componentDidMount",value:function(){var e,t=this;try{e=window&&window.getComputedStyle(this.props.$FField.$refs["@Main"])}catch(e){}e&&this._elem&&["fontSize","fontFamily","fontWeight","fontStyle","letterSpacing"].forEach((function(r){return t._elem.style[r]=e[r]}))}},{key:"render",value:function(){var e=this,r=e.props,n=(Object(I.isUndefined)(r.value)||null===r.value?"":r.value.toString())||r.placeholder||"";return Object(S.createElement)("div",{style:t.sizerStyle,ref:function(t){(e._elem=t)&&r.$FField.$refs["@Main"]&&r.$FField.$refs["@Main"].style&&(r.$FField.$refs["@Main"].style.width=Math.max(t.scrollWidth+(r.addWidth||45),r.minWidth||0)+"px")}},n)}}]),t}(S.Component);E()(_t,"sizerStyle",{position:"absolute",top:0,left:0,visibility:"hidden",height:0,overflow:"scroll",whiteSpace:"pre"});var $t=Object(S.forwardRef)((function(e,t){var r=e.$tags,n=void 0===r?{}:r,a=e.$props,i=void 0===a?{}:a,o=(e.children,e.placeholder),s=e.role,c=void 0===s?"checkbox":s,u=e.type,l=void 0===u?"checkbox":u,f=e.className,d=void 0===f?"":f,h=p()(e,["$tags","$props","children","placeholder","role","type","className"]);return h.ref=t,h.type=l,h.key="input",h.role="input",i.input&&Object.assign(h,i.input),Object(S.createElement)(n.parent||"label",Object.assign({className:d,role:c},i.parent||{}),[Object(S.createElement)(n.input||"input",h),Object(S.createElement)(n.label||"span",ct({key:"label",role:"label"},i.label||{}),o)])})),wt=Object(S.forwardRef)((function(e,t){var r=e.checked,n=e.onChange,a=e.nullValue,i=void 0===a?"":a,o=(e.type,p()(e,["checked","onChange","nullValue","type"]));return Object(S.createElement)("input",l()({type:"checkbox",checked:!0===r},o,{onChange:function(e){n(!(r!==i)||!0!==r&&i,e)},ref:function(e){t&&t(e),e&&(e.indeterminate=r===i)}}))}));function xt(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=xt.bind(this);if(Object(I.isFunction)(e)&&(e={$:e}),Ze(e)){var n=e.norm?e:tt(e,ct({},t,{wrapFn:r})),a=at.bind(this,n);return a._map=n,a}if(Object(I.isMergeable)(e)){var i=Object(I.isArray)(e)?[]:{};//!~ignore.indexOf(key) &&
return Object(I.objKeys)(e).forEach((function(n){return i[n]=L(n,e)?e[n]:r(e[n],t)})),i}return e}function Et(e){return e instanceof mt}var St=Object(I.memoize)((function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=2<arguments.length?arguments[2]:void 0;if(r){var n=r.split(":").map((function(e){return(e=e.trim())&&("^"==e[0]?e:"^/sets/"+e)})).join(":")+":"+(t.$_ref||"");t=Object(I.merge)(t,{$_ref:n})}return W(e,t)}));function It(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],r=e.$_maps,n=p()(e,["$_maps"]);r=ct({},r);var a=Object(I.isArray)(e)?[]:{};return Object(I.objKeys)(n).forEach((function(e){if(Object(I.isMergeable)(n[e])&&!~t.indexOf(e)){var i=It(n[e],t);a[e]=i.rest,Object(I.objKeys)(i.$_maps).forEach((function(t){return r[e+"/"+t]=i.$_maps[t]}))}else a[e]=n[e]})),{$_maps:r,rest:a}}function At(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",r={data:[],every:[],build:[]};return Object(I.objKeys)(e).forEach((function(n){var a=e[n];if(a){var i=Te(Ge((t?t+"/":"")+n));if(Object(I.isFunction)(a)||Object(I.isArray)(a))Object(I.toArray)(a).forEach((function(e){var t=e._map,n=t.update,a=void 0===n?"data":n,o=t.replace,s=p()(t,["update","replace"]);r[a].push(ct({update:a,replace:void 0===o||o},s,{to:i,$:e}))}));else{Object(I.isString)(a)&&(a={args:a});var o=a=ct({},a,{},et(a.args)),s=o.args,c=o.update,u=void 0===c?"data":c,l=o.replace,f=p()(o,["args","update","replace"]);r.data.push(ct({args:s[0],update:u,replace:void 0===l||l,to:i,dataRequest:!0},f))}}})),r}//!map.$ && map.args[0] == 'selectorValue' && args[0]
function kt(e,t,r){for(var n=function(e){return Object(I.isUndefined)(t)||!e.$||e.dataRequest&&e.args.some((function(e){return ze(e)?Object(I.getIn)(t,e)!==Object(I.getIn)(r,e):!!Ze(e)&&n(e._map||e)}))},a={update:{},replace:{},api:{}},i=arguments.length,o=Array(3<i?i-3:0),s=3;s<i;s++)o[s-3]=arguments[s];return o.forEach((function(t){return t&&t.forEach((function(t){if("data"!=t.update||n(t)){var i=t.$?t.$():nt(r,t.args);Object(I.objKeys)(t.to).forEach((function(e){return Ie(a,i,t.replace,t.to[e])})),t.replace||(e=Ae(e,a))}}))})),Ae(e,a)}var Pt=function(e,t){var r=Object(I.isFunction)(e)?e(t):Object(I.getIn)(e,t);return r&&Object(I.isString)(r)&&(r={label:r}),Object(I.isObject)(r)?r:{}};function Ft(e,t){return(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}).equal?function(r){return e[r]===t[r]}:function(r){return e[r]!==t[r]}}function Dt(){for(var e=this,t=arguments,r=[],n=function(n){var i=0>n||t.length<=n?void 0:t[n];if(!i)return"continue";var o=a()(i);"string"===o||"number"===o?r.push(e&&e[i]||i):Object(I.isArray)(i)?r.push(Dt.apply(e,i)):"object"===o&&Object(I.objKeys)(i).forEach((function(t){i[t]&&("number"==typeof i[t]||!0===i[t]?r.push(e&&e[t]||t):r.push(Dt.call(e,i[t])))}))},i=0;i<arguments.length;i++)n(i);return r.join(" ")}var Mt=(ot={extend:function(e,t){var r=I.merge.all(this,e,t);return this["_$cx.bind"]!==r["_$cx.bind"]&&(r=Object(I.merge)(r,{_$cx:r["_$cx.bind"]?this[ut].bind(r["_$cx.bind"]):this[ut]})),r},widgets:{Section:gt,Generic:mt,Input:jt,Autowidth:_t,Builder:function(e){var t=e.children,r=e.widgets,n=r.Title,a=r.Body,i=r.Main,o=r.Message,s=r.Wrapper,c=r.Autowidth;return t=Object(I.deArray)(t),s?Object(S.createElement)(s,t.Wrapper,n?Object(S.createElement)(n,t.Title):"",a?Object(S.createElement)(a,t.Body,i?Object(S.createElement)(i,t.Main):"",o?Object(S.createElement)(o,t.Message):"",c?Object(S.createElement)(c,t.Autowidth):""):""):""},Wrapper:function(e){var t=e._$useTag,r=void 0===t?"div":t,n=e._$cx,a=void 0===n?Dt:n,i=e.className,o=e.wrapperClassName,s=void 0===o?{}:o,c=e.ArrayItemMenu,u=e.ArrayItemBody,f=e.arrayItem,d=p()(e,["_$useTag","_$cx","className","wrapperClassName","ArrayItemMenu","ArrayItemBody","arrayItem"]),h=u||{},v=h._$widget,b=void 0===v?"div":v,g=h.className,m=void 0===g?{}:g,y=p()(h,["_$widget","className"]),O=c||{},j=O._$widget,_=void 0===j?"div":j,$=O.className,w=void 0===$?{}:$,x=p()(O,["_$widget","className"]);f?m=[m,i]:s=[s,i];var E=Object(S.createElement)(r,l()({className:a?a(s):s},d));return f?Object(S.createElement)(b,l()({className:a?a(m):m},y),E,Object(S.createElement)(_,l()({className:a&&a(w)},x))):E},ItemMenu:function(e){var t=e._$useTag,r=void 0===t?"div":t,n=e._$buttonDefaults,a=void 0===n?{}:n,i=e._$cx,o=e.disabled,s=e.className,c=e.buttonsProps,u=void 0===c?{}:c,f=e.arrayItem,d=e.buttons,h=void 0===d?[]:d,v=e.onClick,b=p()(e,["_$useTag","_$buttonDefaults","_$cx","disabled","className","buttonsProps","arrayItem","buttons","onClick"]);return f?(h.forEach((function(e){return delete b[e]})),Object(S.createElement)(r,l()({className:i(s)},b),h.map((function(e){var t=Object.assign({},a,u[e]||{}),r=t._$widget,n=void 0===r?"button":r,s=t.type,c=void 0===s?"button":s,d=t.disabledCheck,h=void 0===d?"":d,b=t.className,g=void 0===b?{}:b,m=t.onClick,y=void 0===m?v:m,O=t.title,j=void 0===O?e:O,_=t.children,$=void 0===_?e:_,w=p()(t,["_$widget","type","disabledCheck","className","onClick","title","children"]);return w.dangerouslySetInnerHTML||(w.children=$),Object(S.createElement)(n,l()({key:e,type:c,title:j,className:i?i(g):g},w,{disabled:o||h&&!f[h],onClick:function(){return y(e)}}))})))):null},Checkbox:$t,CheckboxNull:wt},sets:{base:{Wrapper:{_$widget:"^/widgets/Wrapper",ArrayItemMenu:{$_ref:"^/parts/ArrayItemMenu"},_$cx:"^/_$cx",$_maps:{"className/fform-hidden":"@/params/hidden",arrayItem:"@/arrayItem"}},Builder:{_$widget:"^/widgets/Builder",_$cx:"^/_$cx",$_maps:{widgets:{$:"^/fn/getProp",args:["_widgets"],update:"build"}}},Body:{_$widget:"^/widgets/Generic",_$cx:"^/_$cx",className:"fform-body"},Message:{$_ref:"^/parts/Message"}},simple:{$_ref:"^/sets/base",Main:{_$widget:"^/widgets/Input",_$cx:"^/_$cx",$_reactRef:{ref:!0},$_viewerProps:{_$cx:"^/_$cx",emptyMock:"(no value)",className:{"fform-viewer":!0}},onChange:{$:"^/fn/eventValue|setValue"},onBlur:{$:"^/fn/blur"},onFocus:{$:"^/fn/focus"},$_maps:{value:{$:"^/fn/iif",args:[{$:"^/fn/equal",args:["@value",null]},"","@value"]},viewer:"@/params/viewer",autoFocus:"@/params/autofocus",readOnly:"@/params/readonly",disabled:"@/params/disabled",placeholder:"@/fData/placeholder",required:"@/fData/required",label:"@/fData/title","$_viewerProps/enumExten":"@/fData/enumExten",id:{$:"^/fn/getProp",args:"props/id",update:"build"},name:{$:"^/fn/getProp",args:"props/name",update:"build"},"className/fform-input-priority":{$:"^/fn/setInputPriority",args:"@/status/priority"}}},Title:{_$widget:"^/widgets/Generic",_$cx:"^/_$cx",_$useTag:"label",children:[],$_maps:{"className/fform-required":"@/fData/required","children/0":"@/fData/title","className/fform-hidden":{$:"^/fn/not",args:"@/fData/title"},htmlFor:{$:"^/fn/getProp",args:["id"],update:"build"},"className/fform-title-viewer":"@/params/viewer"}}},string:{$_ref:"^/sets/simple",Main:{type:"text"}},textarea:{$_ref:"^/sets/simple",Main:{type:"textarea",$_viewerProps:{className:{"fform-viewer":!1,"fform-viewer-inverted":!0}}},Title:{$_maps:{"className/fform-title-viewer-inverted":"@/params/viewer"}}},integer:{$_ref:"^/sets/simple",Main:{type:"number",onChange:{$:"^/fn/eventValue|parseNumber|setValue",args:["${0}",!0,0]}}},integerNull:{$_ref:"^/sets/integer",Main:{onChange:{args:{2:null}}}},number:{$_ref:"^/sets/integer",Main:{onChange:{args:{1:!1}},step:"any"}},numberNull:{$_ref:"^/sets/integerNull",Main:{onChange:{args:{1:!1,2:null}},step:"any"}},null:{$_ref:"^/sets/simple",Main:!1},boolean:{$_ref:"^/sets/simple",Main:{type:"checkbox",_$useTag:"^/widgets/Checkbox",onChange:{$:"^/fn/eventChecked|setValue|liveUpdate"}}},booleanNull:{$_ref:"^/sets/boolean",Main:{$tags:{input:"^/widgets/CheckboxNull",_$skipKeys:["input"]},onChange:{$:"^/fn/parseTristate|setValue|liveUpdate",args:["${0}"]}}},booleanLeft:{$_ref:"^/sets/boolean"},booleanNullLeft:{$_ref:"^/sets/booleanNull"},object:{$_ref:"^/sets/base",Main:{_$widget:"^/widgets/Section",_$cx:"^/_$cx",$_reactRef:!0,uniqKey:"params/uniqKey",LayoutDefaultClass:"layout",LayoutDefaultWidget:"div",$_viewerProps:{$_ref:"^/sets/simple/Main/$_viewerProps"},$_maps:{length:"@/length",oneOf:"@/oneOf",branchKeys:"@/branchKeys",strictLayout:"@/fData/strictLayout",isArray:{$:"^/fn/equal",args:["@/fData/type","array"]},$branch:{$:"^/fn/getProp",args:"$branch",update:"every"},arrayStart:{$:"^/fn/getArrayStart",args:[],update:"build"},$FField:{$:"^/fn/getProp",args:[],update:"build"},FFormApi:{$:"^/fn/getProp",args:"props/pFForm/api",update:"build"},id:{$:"^/fn/getProp",args:"props/id",update:"build"},name:{$:"^/fn/getProp",args:"props/name",update:"build"},$layout:{$:"^/fn/getProp",args:"_layout",update:"build"}}},Title:{_$widget:"^/widgets/Generic",_$cx:"^/_$cx",_$useTag:"legend",children:[{$_ref:"^/sets/simple/Title",_$useTag:"span"},{$_ref:"^/parts/ArrayAddButton"},{$_ref:"^/parts/ArrayDelButton"},{$_ref:"^/parts/ArrayEmpty"}]},Wrapper:{_$useTag:"fieldset"}},array:{$_ref:"^/sets/object"},select:{$_ref:"^/sets/simple",Main:{type:"select",children:[],onChange:{$:"^/fn/eventValue|setValue|liveUpdate"},$_maps:{children:{$:"^/fn/arrayOfEnum",args:["@/fData/enum","@/fData/enumExten",{_$widget:"option"}],replace:!1},label:!1}}},multiselect:{$_ref:"^/sets/select",Main:{multiple:!0,onChange:{$:"^/fn/eventMultiple|setValue|liveUpdate"}}},radio:{$_ref:"^/sets/base",Title:{$_ref:"^/sets/simple/Title"},Main:{$_ref:"^/parts/RadioSelector",$_reactRef:!0,$_viewerProps:{$_ref:"^/sets/simple/Main/$_viewerProps"},$_maps:{value:"@/value",viewer:"@/params/viewer",children:[{args:["@/fData/enum","@/fData/enumExten",{onChange:{args:["${0}"]}},{name:!0}]},{args:["@/fData/enum","@/value"]},{args:{0:"@/fData/enum"}}]}}},checkboxes:{$_ref:"^/sets/radio",Main:{$_maps:{children:{0:{args:{2:{type:"checkbox",onChange:{$:"^/fn/eventCheckboxes|setValue|liveUpdate"}},3:{name:"[]"}}}}}}},$radioInteger:{Main:{$_maps:{children:{0:{args:{2:{onChange:{$:"^/fn/eventValue|parseNumber|setValue|liveUpdate",args:["${0}",!0,0]}}}}}}}},$radioNull:{Main:{$_maps:{children:{0:{args:{2:{onClick:"^/fn/eventValue|radioClear|liveUpdate"}}}}}}},$radioEmpty:{Main:{$_maps:{children:{0:{args:{2:{onClick:{$:"^/fn/eventValue|radioClear|liveUpdate",args:["${0}",""]}}}}}}}},$autowidth:{Autowidth:{$_ref:"^/parts/Autowidth"},Wrapper:{className:{"fform-shrink":!0}}},$noArrayControls:{Wrapper:{$_maps:{arrayItem:!1}}},$noArrayButtons:{Title:{$_ref:"^/sets/simple/Title"}},$inlineItems:{Main:{className:{"fform-inline":!0}}},$inlineTitle:{Wrapper:{wrapperClassName:{"fform-inline":!0}}},$inlineLayout:{Main:{LayoutDefaultClass:{"fform-inline":!0}}},$inlineArrayControls:{Wrapper:{ArrayItemBody:{className:{"fform-inline":!0}}}},$arrayControls3but:{Wrapper:{ArrayItemMenu:{buttons:["up","down","del"]}}},$arrayControlsDelOnly:{Wrapper:{ArrayItemMenu:{buttons:["del"]}}},$noTitle:{Title:!1},$noMessage:{Message:!1},$shrink:{Wrapper:{className:{"fform-shrink":!0}}},$expand:{Wrapper:{className:{"fform-expand":!0}}},$password:{Main:{type:"password"}},$:"^/$",$C:"^/$C",$S:"^/$S"},fn:{api:function(e){for(var t,r=arguments.length,n=Array(1<r?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];(t=this.api)[e].apply(t,n)},format:function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return[r.reduce((function(e,t,r){return e.replace("{"+r+"}",t)}),e)]},iif:function(e,t,r){for(var n=arguments.length,a=Array(3<n?n-3:0),i=3;i<n;i++)a[i-3]=arguments[i];return[e?t:r].concat(a)},not:function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return[!e].concat(r)},equal:function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return[r.some((function(t){return e===t}))]},equalAll:function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return[r.every((function(t){return e===t}))]},or:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return[t.some(Boolean)]},and:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return[t.every(Boolean)]},getArrayStart:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return[ue(this.schemaPart)].concat(t)},getProp:function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return[Object(I.getIn)(this,Ge(e))].concat(r)},eventValue:function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return[e.target.value].concat(r)},eventChecked:function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return[e.target.checked].concat(r)},parseTristate:function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return[""===e?null:e].concat(r)},eventMultiple:function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return[Array.from(e.target.options).filter((function(e){return e.selected})).map((function(e){return e.value}))].concat(r)},parseNumber:function(e){for(var t=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length,a=Array(3<n?n-3:0),i=3;i<n;i++)a[i-3]=arguments[i];return[""===e?r:(t?parseInt:parseFloat)(e)].concat(a)},stringify:function(e){Object(I.isString)(e)||(e=JSON.stringify(e));for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return[e].concat(r)},setValue:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.api.setValue(e,t);for(var r=arguments.length,n=Array(2<r?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];return n},focus:function(){this.api.set("/@/active",this.path,{noValidation:!0});for(var e=arguments.length,t=Array(1<e?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];return t},blur:function(){var e;this.api.set("./",-1,(e={},E()(e,J,["status","untouched"]),E()(e,"noValidation",!0),E()(e,"macros","setStatus"),e)),this.api.set("/@/active",void 0,{noValidation:!0}),this._updateCachedValue(!0),this.liveValidate||this.api.validate("./");for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return r},liveUpdate:function(){this._forceLiveUpd=!0;for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t},forceUpdate:function(){this._forceUpd=!0;for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t},eventCheckboxes:function(e){var t=(this.getData().value||[]).slice(),r=e.target.value,n=t.indexOf(r),a=t.slice();-1==n?a.push(r):a.splice(n,1);var i=this.getData().fData.enum;a.sort((function(e,t){return i.indexOf(e)>i.indexOf(t)}));for(var o=arguments.length,s=Array(1<o?o-1:0),c=1;c<o;c++)s[c-1]=arguments[c];return[a].concat(s)},radioClear:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;this.api.getValue()===e&&this.api.setValue(t);for(var r=arguments.length,n=Array(2<r?r-2:0),a=2;a<r;a++)n[a-2]=arguments[a];return n},messages:function(e){var t=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=r.className,a=void 0===n?{}:n,i=p()(r,["className"]);return[Object(I.objKeys)(e||[]).map((function(r){var n=e[r],o=n.norender,s=n.texts,c=n.className,u=void 0===c?{}:c,l=p()(n,["norender","texts","className"]),f=[];return Object(I.objKeys)(s).forEach((function(e){return Object(I.toArray)(s[e]).forEach((function(e){Qe(e)&&(e=t._resolver(e)),Object(I.isString)(e)&&Object(I.isString)(f[f.length-1])?f.push({_$widget:"br"},e):f.push(e)}))})),o||!f.length?null:ct({children:f},i,{className:ct(E()({},"fform-message-priority-"+r,!0),a,{},u)},l)}))]},arrayOfEnum:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},a=3<arguments.length?arguments[3]:void 0;return[t.map((function(t){var i=Pt(r,t);return ct({key:t,children:[i.label||t],name:a&&e.name+(!0===a?"":a)},i,{},n,{value:t})}))]},enumInputs:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};return delete(n=ct({},n))._$skipKeys,[t.map((function(t){var i=Pt(r,t),o=i.label,s=p()(i,["label"]);return ct({key:t,name:a.name&&e.props.name+(!0===a.name?"":a.name)},Object(I.merge)(n,s),{placeholder:o||t,value:t})}))]},enumInputProps:function(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t={},r=arguments.length,n=Array(1<r?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];for(var i=0;i<n.length;i+=2)t[n[i]]=n[i+1];return[e.map((function(){return t}))]},enumInputValue:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],t=1<arguments.length?arguments[1]:void 0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"checked";return t=Object(I.toArray)(t),[e.map((function(e){return E()({},r,!!~t.indexOf(e))}))]},setInputPriority:function(e){return"number"==typeof e?["fform-input-priority-"+e]:[!1]}},parts:{Message:{_$widget:"^/widgets/Generic",_$cx:"^/_$cx",children:[],$_maps:{children:{$:"^/fn/messages",args:["@/messages",{}]},"className/fform-hidden":{$:"^/fn/or",args:["@/params/viewer","!@/status/touched"]}}},RadioSelector:{_$widget:"^/widgets/Input",_$cx:"^/_$cx",_$useTag:"div",children:[],$_maps:{value:"@/selector/value",children:[{$:"^/fn/enumInputs",args:["@/selector/enum","@/selector/enumExten",{_$widget:"^/widgets/Checkbox",type:"radio",onChange:{$:"^/fn/eventValue|setValue|liveUpdate",args:["${0}",{path:"./@/selector/value"}]},onBlur:"^/sets/simple/Main/onBlur",onFocus:"^/sets/simple/Main/onFocus"},{name:!0}],replace:!1},{$:"^/fn/enumInputValue",args:["@/selector/enum","@/selector/value"],replace:!1},{$:"^/fn/enumInputProps",args:["@/selector/enum","readOnly","@/params/readonly","disabled","@/params/disabled"],replace:!1}]}},Autowidth:{_$widget:"^/widgets/Autowidth",addWidth:35,minWidth:60,$_maps:{value:"value",placeholder:"@/params/placeholder","className/fform-hidden":"@/params/hidden",$FField:{$:"^/fn/getProp",args:[],update:"build"}}},Button:{_$widget:"button",type:"button",$_maps:{"className/fform-hidden":"@/params/viewer",disabled:"@/params/disabled"}},Submit:{$_ref:"^/parts/Button",type:"submit",children:["Submit"]},Reset:{$_ref:"^/parts/Button",type:"reset",children:["Reset"],$_maps:{disabled:"@/status/pristine"}},ArrayAddButton:{$_ref:"^/parts/Button",children:["+"],onClick:{$:"^/fn/api",args:["arrayAdd","./",1]},$_maps:{"className/fform-hidden":{$:"^/fn/or",args:["@/params/viewer",{$:"^/fn/equal | ^/fn/not",args:["@/fData/type","array"]}]},disabled:{$:"^/fn/or",args:["!@/fData/canAdd","@params/disabled"]}}},ArrayDelButton:{$_ref:"^/parts/ArrayAddButton",children:["-"],onClick:{args:{2:-1}},$_maps:{disabled:{$:"^/fn/or",args:["!@/length","@params/disabled"]}}},ArrayEmpty:{children:"(array is empty)",_$widget:"span",$_maps:{"className/fform-hidden":{$:"^/fn/equal | ^/fn/not",args:["@/length",0]}}},ArrayItemMenu:{_$widget:"^/widgets/ItemMenu",_$cx:"^/_$cx",_$buttonDefaults:"^/parts/Button",buttons:["first","last","up","down","del"],onClick:{$:"^/fn/api",args:["arrayItemOps","./","${0}"]},buttonsProps:{first:{disabledCheck:"canUp"},last:{disabledCheck:"canDown"},up:{disabledCheck:"canUp"},down:{disabledCheck:"canDown"},del:{disabledCheck:"canDel"}},$_maps:{arrayItem:"@/arrayItem","className/fform-button-viewer":"@/params/viewer",disabled:"@params/disabled"}},Expander:{_$widget:"div",className:{"fform-expand":!0}}},_$cx:Dt},E()(ot,ut,Dt),E()(ot,"$",(function(e,t){var r=Te(t.map((function(t){if(t=e._$shorts[t]||t,Object(I.isString)(t)&&2==t.length){var r=e._$shorts[t[0]],n=e._$shorts[t[1]];return r&&n&&(t=Object(I.isArray)(n)?n.map((function(e){return r+e})):r+n),Object(I.toArray)(t).join(",")}return t}))),n={};return Object(I.objKeys)(r).forEach((function(e){return Object(I.setIn)(n,r[e].pop(),r[e])})),n})),E()(ot,"$C",(function(e,t){var r=(t=t.slice()).pop(),n="!"!==r[0];return n||(r=r.substr(1)),Object(I.push2array)(t,"className",r,n),e.$(e,t)})),E()(ot,"$S",(function(e,t){t=t.slice();var r=[];return r.unshift(t.pop()),r.unshift(t.pop()),Object(I.push2array)(t,"style",r),e.$(e,t)})),E()(ot,"_$shorts",{W:"Wrapper",M:"Main",B:"Body",T:"Title",MSG:"Message",m:"margin",p:"padding",t:"Top",b:"Bottom",l:"Left",r:"Right",x:["Left","Right"],y:["Top","Bottom"],fg:"flexGrow",fs:"flexShirnk",fd:"flexDirection",fw:"flexWrap",fb:"flexBasis",minW:"minWidth",minH:"minHeight",maxW:"maxWidth",maxH:"maxHeight",as:"alignSelf",ai:"alignItems",jc:"justifyContent"}),ot)}])}));
//# sourceMappingURL=fform.min.js.map